/*! For license information please see player.js.LICENSE.txt */
var adserve;(()=>{var t={740:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(954),r=i.n(n)()((function(t){return t[1]}));r.push([t.id,'.adserve-tv-player,\n.adserve-tv-player:before,\n.adserve-tv-player:after,\n.adserve-tv-player * {\n    hyphens: manual;\n    font-size: 16px; /*inherit*/\n    color: inherit;\n    background: 0 0;\n    border: 0;\n    border-radius: 0;\n    border-spacing: 0;\n    border-collapse: collapse;\n    box-sizing: content-box;\n    clear: none;\n    float: none;\n    font-variant: normal;\n    font-weight: inherit;\n    letter-spacing: normal;\n    line-height: 1.5; /*normal*/\n    margin: 0;\n    max-height: none;\n    max-width: none;\n    min-height: 0;\n    min-width: 0;\n    outline: 0;\n    padding: 0;\n    position: static;\n    text-align: left;\n    text-decoration: none;\n    text-indent: 0;\n    text-transform: none;\n    vertical-align: baseline;\n    visibility: inherit;\n    word-spacing: normal;\n}\n.adserve-tv-player {\n    position: relative;\n}\n.adserve-tv-player.sticky {\n    position: fixed;\n    right: 20px;\n    bottom: 20px;\n    z-index: 9999;\n    width: 280px;\n}\n.adserve-tv-player .video-container {\n    padding-bottom: 56.25%;\n}\n.adserve-tv-player .video {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n.adserve-tv-player .resizer {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    border: none;\n    background-color: transparent\n}\n.adserve-tv-player .ad-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n.adserve-tv-player .spinner {\n    display: none;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin: -25px 0 0 -25px;\n    opacity: 1;\n    text-align: left;\n    /*border: 6px solid rgba($primary-background-color, $primary-background-transparency);*/\n    border: 4px solid rgba(255, 255, 255, 0.5);\n    box-sizing: border-box;\n    background-clip: padding-box;\n    width: 50px;\n    height: 50px;\n    border-radius: 25px;\n    visibility: hidden;\n}\n.adserve-tv-player.waiting .spinner {\n    display: block;\n    animation: spinner-show 0s linear 0.3s forwards;\n}\n.adserve-tv-player .spinner:before,\n.adserve-tv-player .spinner:after {\n    content: "";\n    position: absolute;\n    margin: -4px;\n    box-sizing: inherit;\n    width: inherit;\n    height: inherit;\n    border-radius: inherit;\n    opacity: 1;\n    border: inherit;\n    border-color: transparent;\n    border-top-color: white;\n}\n.adserve-tv-player.waiting .spinner:before,\n.adserve-tv-player.waiting .spinner:after {\n    -webkit-animation: spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, spinner-fade 1.1s linear infinite;\n    animation: spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, spinner-fade 1.1s linear infinite;\n}\n.adserve-tv-player.waiting .spinner:before {\n    border-top-color: rgb(255,255,255);\n}\n.adserve-tv-player.waiting .spinner:after {\n    border-top-color: rgb(255,255,255);\n    -webkit-animation-delay: 0.44s;\n    animation-delay: 0.44s;\n}\n@keyframes spinner-show {\n    to {\n        visibility: visible;\n    }\n}\n@-webkit-keyframes spinner-show {\n    to {\n        visibility: visible;\n    }\n}\n@keyframes spinner-spin {\n    100% {\n        transform: rotate(360deg);\n    }\n}\n@-webkit-keyframes spinner-spin {\n    100% {\n        -webkit-transform: rotate(360deg);\n    }\n}\n@keyframes spinner-fade {\n    0% {\n        border-top-color: white;\n    }\n    20% {\n        border-top-color: white;\n    }\n    35% {\n        border-top-color: white;\n    }\n    60% {\n        border-top-color: white;\n    }\n    100% {\n        border-top-color: white;\n    }\n}\n@-webkit-keyframes spinner-fade {\n    0% {\n        border-top-color: white;\n    }\n    20% {\n        border-top-color: white;\n    }\n    35% {\n        border-top-color: white;\n    }\n    60% {\n        border-top-color: white;\n    }\n    100% {\n        border-top-color: white;\n    }\n}\n.adserve-tv-player .gradient {\n    transition: opacity 250ms ease 0s, visibility 250ms ease 0s;\n    opacity: 0.01;\n    visibility: hidden;\n}\n.adserve-tv-player .gradiant.show {\n    opacity: 1;\n    visibility: visible;\n}\n.adserve-tv-player .overlay {\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    z-index: 1;\n    top: 0px;\n    user-select: none;\n    /*pointer-events: none;*/\n}\n.adserve-tv-player .header {\n    transition: opacity 250ms ease 0s, visibility 250ms ease 0s;\n    opacity: 0.01;\n    visibility: hidden;\n    box-sizing: border-box;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    line-height: 22px;\n    padding: 25px 20px;\n    font-size: 17px;\n    width: 100%;\n    display: flex;\n    -webkit-box-align: center;\n    align-items: center;\n    z-index: 1;\n}\n/*.adserve-tv-player.hovered .header,*/\n.adserve-tv-player.user-active .header,\n.adserve-tv-player.slider-active .header,\n.adserve-tv-player.paused .header {\n    opacity: 1;\n    visibility: visible;\n}\n.adserve-tv-player .title {\n    box-sizing: border-box;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    Xcursor: pointer;\n    text-decoration: none;\n    background-image: none;\n    color: rgb(247, 247, 247);\n    user-select: none;\n    pointer-events: auto;\n}\n.adserve-tv-player .gradient {\n    transition: opacity 250ms ease 0s, visibility 250ms ease 0s;\n    opacity: 0.01;\n    visibility: hidden;\n}\n/*.adserve-tv-player.hovered .gradient,*/\n.adserve-tv-player.user-active .gradient,\n.adserve-tv-player.slider-active .gradient,\n.adserve-tv-player.paused .gradient {\n    opacity: 1;\n    visibility: visible;\n}\n.adserve-tv-player .gradient-top {\n    left: 0px;\n    pointer-events: none;\n    position: absolute;\n    width: 100%;\n    z-index: 0;\n    background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.45) 40%, rgba(0, 0, 0, 0));\n    height: 6em;\n    top: 0px;\n}\n.adserve-tv-player .gradient-bottom {\n    left: 0px;\n    pointer-events: none;\n    position: absolute;\n    width: 100%;\n    z-index: 0;\n    background: linear-gradient(0deg, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.45) 40%, rgba(0, 0, 0, 0));\n    bottom: 0px;\n    height: 10em;\n}\n.adserve-tv-player .control-bar {\n    position: absolute;\n    bottom: 0;\n    top: auto;\n    width: 100%;\n    left: 0;\n    right: 0;\n    height: 65px;\n}\n.adserve-tv-player .controls {\n    bottom: 0px;\n    display: flex;\n    flex-direction: row;\n    -webkit-box-pack: start;\n    justify-content: flex-start;\n    position: absolute;\n    width: 100%;\n    color: rgb(247, 247, 247);\n    padding: 0px 20px 20px;\n    height: 45px;\n    -webkit-box-align: center;\n    align-items: center;\n    z-index: 10;\n    pointer-events: all;\n    transition: opacity 250ms ease 0s, visibility 250ms ease 0s;\n    opacity: 0.01;\n    visibility: hidden;\n    box-sizing: border-box;\n}\n/*.adserve-tv-player.hovered .controls,*/\n.adserve-tv-player.user-active .controls,\n.adserve-tv-player.slider-active .controls,\n.adserve-tv-player.paused .controls {\n    opacity: 1;\n    visibility: visible;\n}\n.adserve-tv-player .timeline {\n    position: absolute;\n    height: 4px;\n    left: 20px;\n    right: 20px;\n    bottom: 56px;\n    cursor: pointer;\n    background: rgb(100, 100, 100);\n    background: rgba(255, 255, 255, 0.5);\n    -webkit-box-shadow: 0 0 3px 0 rgb(0 0 0 / 10%);\n    -moz-box-shadow: 0 0 3px 0 rgba(0, 0, 0, 0.1);\n    box-shadow: 0 0 3px 0 rgb(0 0 0 / 10%);\n\n    transition: opacity 250ms ease 0s, visibility 250ms ease 0s;\n    opacity: 0.01;\n    visibility: hidden;\n}\n.adserve-tv-player.slider-active .timeline,\n.adserve-tv-player .timeline:hover,\n.adserve-tv-player .timeline.sliding {\n    height: 8px;\n    bottom: 54px;\n}\n/*.adserve-tv-player.hovered .timeline,*/\n.adserve-tv-player.user-active .timeline,\n.adserve-tv-player.slider-active .timeline,\n.adserve-tv-player.paused .timeline {\n    opacity: 1;\n    visibility: visible;\n}\n.adserve-tv-player .timeline:before {\n    content: "";\n    width: 100%;\n    position: absolute;\n    left: 0;\n    height: 100%\n}\n.adserve-tv-player .timeline-buffer {\n    position: absolute;\n    left: 0;\n    height: 100%;\n    background: #fff;\n}\n.adserve-tv-player .timeline-progress {\n    position: absolute;\n    left: 0;\n    height: 100%;\n    background: red;\n}\n.adserve-tv-player .timeline-progress:before {\n    -webkit-transition-timing-function: cubic-bezier(0,0,0.2,1);\n    transition-timing-function: cubic-bezier(0,0,0.2,1);\n    -webkit-transition-duration: 167ms;\n    transition-duration: 167ms;\n    content: \'\';\n    position: absolute;\n    background-color: #fff;\n    width: 10px;\n    height: 10px;\n    border-radius: 5px;\n    -webkit-box-shadow: 0 1px 1px 1px rgb(0 0 0 / 40%);\n    box-shadow: 0 1px 1px 1px rgb(0 0 0 / 40%);\n    top: 50%;\n    right: -5px;\n    margin-top: -5px;\n}\n.adserve-tv-player .timeline:hover .timeline-progress:before {\n    -webkit-transform: scale(1.5);\n    transform: scale(1.5);\n}\n.adserve-tv-player .time-tooltip {\n    -webkit-transition-timing-function: cubic-bezier(0,0,0.2,1);\n    transition-timing-function: cubic-bezier(0,0,0.2,1);\n    -webkit-transition-duration: 167ms;\n    transition-duration: 167ms;\n    background-color: rgba(0,0,0,0.75);\n    -webkit-box-shadow: 0 0 0 1px rgb(255 255 255 / 10%);\n    box-shadow: 0 0 0 1px rgb(255 255 255 / 10%);\n    border-radius: 2px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    /*font-size: 1.2rem;\n    line-height: 1.33333;\n    font-weight: 600;*/\n    color: #fff;\n    text-shadow: 0 1px 0 rgb(0 0 0 / 80%);\n    pointer-events: none;\n    position: static;\n    padding: 4px 8px;\n    max-width: 240px;\n    -webkit-transition-property: opacity;\n    transition-property: opacity;\n    display: none;\n    position: absolute;\n    bottom: 22px;\n}\n.adserve-tv-player .play {\n    Xbackground-image: url(data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSIzM3B4IiBoZWlnaHQ9IjM4cHgiIHZpZXdCb3g9IjMxIDI0IDMzIDM4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDIgKDM2NzgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPHBhdGggZD0iTTQ2Ljc1MjQ1OTcsMjcuMjk5NDI0MSBDNDYuOTYzMzE0MiwyNi45Mzk3MDM4IDQ3LjMwNzMyNDEsMjYuOTQzMzY3IDQ3LjUxNjAzMTQsMjcuMjk5NDI0MSBMNjUuNDQxMzE5Nyw1Ny44ODAxODQ1IEM2NS42NTIxNzQyLDU4LjIzOTkwNDggNjUuNDg4NTU1OCw1OC41MzE1MTU4IDY1LjA3NjQ3MTUsNTguNTMxNTE1OCBMMjkuMTkyMDE5Niw1OC41MzE1MTU4IEMyOC43Nzk2NjUsNTguNTMxNTE1OCAyOC42MTg0NjQxLDU4LjIzNjI0MTYgMjguODI3MTcxNCw1Ny44ODAxODQ1IEw0Ni43NTI0NTk3LDI3LjI5OTQyNDEgWiIgaWQ9IlRyaWFuZ2xlIiBzdHJva2U9Im5vbmUiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDcuMTM0NjkzLCA0Mi43ODEyNjEpIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC00Ny4xMzQ2OTMsIC00Mi43ODEyNjEpICI+PC9wYXRoPg0KPC9zdmc+);\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA3NTIgMTAyNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNzUyIDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNzUyLDUxMiAwLDAgMCwxMDI0ICIvPg0KPC9zdmc+DQo=);\n    padding: 0px;\n    background-color: transparent;\n    border: none;\n    background-repeat: no-repeat;\n    background-position: center center;\n    outline: none;\n    width: 24px;\n    height: 24px;\n    background-size: 15px;\n    cursor: pointer;\n}\n.adserve-tv-player .play.pause {\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA3ODQgMTAyNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNzg0IDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01ODIuMiwwaDkuOGMzOSwwLDY4LjMsMjkuMyw2OC4zLDY4LjN2ODg3LjVjMCwzOS0yOS4zLDY4LjMtNjguMyw2OC4zaC05LjhjLTM5LDAtNjguMy0yOS4zLTY4LjMtNjguM1Y2OC4zDQoJQzUxMy45LDI5LjMsNTQzLjIsMCw1ODIuMiwwTDU4Mi4yLDB6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTkyLjEsMGg5LjhjMzksMCw2OC4zLDI5LjMsNjguMyw2OC4zdjg4Ny41YzAsMzktMjkuMyw2OC4zLTY4LjMsNjguM2gtOS44Yy0zOSwwLTY4LjMtMjkuMy02OC4zLTY4LjNWNjguMw0KCUMxMjMuOCwyOS4zLDE1My4xLDAsMTkyLjEsMEwxOTIuMSwweiIvPg0KPC9zdmc+DQo=);\n    background-size: 14px;\n}\n.adserve-tv-player.ended .play {\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMDEwLjQgOTc2LjEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMTAuNCA5NzYuMTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE1Ny4yLDU0djI3Ny4zYzAsMzQuMS0yOS45LDY0LTY0LDY0aC00LjNjLTM0LjEsMC01OS43LTI1LjYtNTkuNy01OS43VjExMy43QzI5LjIsNzkuNiw1NC44LDU0LDg4LjksNTQNCglDODguOSw1NCwxNTcuMiw1NCwxNTcuMiw1NHoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDguOSwzMTQuMkgxMTguOGMtMjkuOSwwLTU1LjUsMjUuNi01NS41LDU1LjVsMCwwYzAsMjkuOSwyNS42LDU1LjUsNTUuNSw1NS41aDIzMC40DQoJYzM0LjEsMCw1OS43LTI1LjYsNTkuNy01OS43VjMxNC4yTDQwOC45LDMxNC4yeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyNi4xLDI0OS45QzI1OC4zLDMyLjMsNTM5LjktMzYsNzU3LjUsOTYuM3MyOTAuMSw0MTMuOSwxNTcuOSw2MzEuNXMtNDEzLjksMjgxLjYtNjMxLjUsMTUzLjYNCgljLTIxLjMtMTcuMS0yOS45LTQ2LjktMTcuMS03Mi41YzEyLjgtMjUuNiw0Ni45LTI5LjksNjguMy0xNy4xYzE3MC43LDEwMi40LDM4OC4zLDQ2LjksNDkwLjctMTE5LjUNCglDOTI4LjIsNTAxLjYsODcyLjcsMjg0LDcwMi4xLDE4MS42cy0zODguMy00Ni45LTQ5MC43LDExOS41Yy0xMi44LDI1LjYtNDYuOSwyOS45LTY4LjMsMTcuMVMxMTMuMywyNzUuNSwxMjYuMSwyNDkuOUwxMjYuMSwyNDkuOXoiDQoJLz4NCjwvc3ZnPg0K);\n    background-size: 20px;\n}\n.adserve-tv-player .next {\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA4ODAgMTAyNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgODgwIDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik04MDAuOCwwaDkuOGMzOSwwLDY4LjMsMjkuMyw2OC4zLDY4LjN2ODg3LjVjMCwzOS0yOS4zLDY4LjMtNjguMyw2OC4zaC05LjhjLTM5LDAtNjguMy0yOS4zLTY4LjMtNjguM1Y2OC4zDQoJQzczMi42LDI5LjMsNzYxLjgsMCw4MDAuOCwwTDgwMC44LDB6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMS4xLDEwMjRjMCwwLDAtMzQxLjMsMC0xMDI0YzAsMCwyNDMuOCwxNjAuOSw3MzEuNCw0ODcuNmMwLDE5LjUsMCwyNC40LDAsNDguOA0KCUM3MzIuNiw1MjEuOCw0ODguOCw2ODIuNywxLjEsMTAyNHoiLz4NCjwvc3ZnPg0K);\n    padding: 0px;\n    background-color: transparent;\n    border: none;\n    background-repeat: no-repeat;\n    background-position: center center;\n    outline: none;\n    width: 24px;\n    height: 24px;\n    background-size: 16px;\n    cursor: pointer;\n}\n.adserve-tv-player .volume {\n    Xbackground-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE0NyIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxnIGlkPSJzdmdfMSIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsLTEsMCw5NjApICI+CiAgIDxwYXRoIGlkPSJzdmdfMiIgZD0ibTc5NSw3OThxLTksMCAtMTUsLTZ0LTYsLTE1bDAsLTQycTAsLTkgNiwtMTUuNXQxNSwtNi41cTUxLC0zIDk1LjUsLTI1dDc3LjUsLTU3LjV0NTIsLTgydDE5LC05OC41dC0xOSwtOTh0LTUyLC04MS41dC03Ny41LC01Ny41dC05NS41LC0yNnEtOSwwIC0xNSwtNnQtNiwtMTVsMCwtNDJxMCwtOSA2LC0xNXQxNSwtNnE2OSw0IDEyOC41LDMzdDEwMy41LDc2dDY5LjUsMTA4LjV0MjUuNSwxMjkuNXEwLDY5IC0yNS41LDEzMC41dC02OS41LDEwOHQtMTAzLjUsNzZ0LTEyOC41LDMzLjVsMCwwem01LC00NzlxNDYsOSA3Niw0NXQzMCw4NHQtMzAsODR0LTc2LDQ1cS0xMSwyIC0xOC41LC00dC03LjUsLTE3bDAsLTIxNnEwLC05IDcuNSwtMTZ0MTguNSwtNWwwLDB6bS0yNTEsNTI4bC0zMTcsLTE5OWwtMTcwLDBxLTI2LDAgLTQ0LjUsLTE4LjV0LTE4LjUsLTQ1LjVsMCwtMjg2cTAsLTI3IDE4LjUsLTQ1LjV0NDQuNSwtMTguNWwxOTUsMGwyODcsLTE4NXEyMywtMTYgNTUsLTUuNXQzMiw0MC41bDAsNzI4cTIsMzAgLTI5LDM5LjV0LTUzLC00LjVsMCwweiIgZmlsbD0iI2Y3ZjdmNyIvPgogIDwvZz4KIDwvZz4KPC9zdmc+Cg==);\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMjE2IDEwMjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMTYgMTAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAsNzExLjloMjYzLjNMNjc3LjgsMTAyNFYwTDI2My4zLDMxMi4xSDBWNzExLjl6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODc3LjcsMzQxLjNsLTY4LjMsNjguM2M1My42LDU4LjUsNTMuNiwxNDYuMywwLDIwNC44bDY4LjMsNjguM0M5NzAuNCw1OTAsOTcwLjQsNDM0LDg3Ny43LDM0MS4zTDg3Ny43LDM0MS4zeg0KCSIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwODcuNCwyMDQuOGwtNzMuMSw3OGM2OC4zLDczLjEsMTAyLjQsMTY1LjgsMTAyLjQsMjYzLjNjMCwxMDIuNC0zNC4xLDE5NS0xMDIuNCwyNjMuM2w3My4xLDc4DQoJYzgyLjktOTIuNiwxMzEuNy0yMTQuNiwxMzEuNy0zNDEuM1MxMTcwLjMsMjk3LjQsMTA4Ny40LDIwNC44TDEwODcuNCwyMDQuOHoiLz4NCjwvc3ZnPg0K);\n    padding: 0px;\n    background-color: transparent;\n    border: none;\n    background-repeat: no-repeat;\n    background-position: center center;\n    outline: none;\n    width: 24px;\n    height: 24px;\n    background-size: 24px;\n    cursor: pointer;\n    margin-left: 10px;\n}\n.adserve-tv-player .volume.mid {\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMjE2IDEwMjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMTYgMTAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAsNzExLjloMjYzLjNMNjc3LjgsMTAyNFYwTDI2My4zLDMxMi4xSDBWNzExLjl6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODc3LjcsMzQxLjNsLTY4LjMsNjguM2M1My42LDU4LjUsNTMuNiwxNDYuMywwLDIwNC44bDY4LjMsNjguM0M5NzAuNCw1OTAsOTcwLjQsNDM0LDg3Ny43LDM0MS4zTDg3Ny43LDM0MS4zeg0KCSIvPg0KPC9zdmc+DQo=);\n}\n.adserve-tv-player .volume.muted {\n    Xbackground-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE0NCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxnIGlkPSJzdmdfMSIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsLTEsMCw5NjApICI+CiAgIDxwYXRoIGlkPSJzdmdfMiIgZD0ibTEwMTUsNDQxbDg5LDg5cTEyLDEzIDEyLDMwdC0xMiwyOXQtMjkuNSwxMnQtMjkuNSwtMTJsLTg5LC04OWwtODksODlxLTEzLDEyIC0zMCwxMnQtMjksLTEydC0xMiwtMjl0MTIsLTMwbDg5LC04OWwtODksLTg5cS0xMiwtMTMgLTEyLC0zMHQxMiwtMjlxNywtNyAxNC41LC05LjV0MTUuNSwtMi41cTksMCAxNi41LDMuNXQxNC41LDguNWw4OSw4OWw4OSwtODlxOCwtNyAxNSwtOS41dDE2LC0yLjV0MTYuNSwzLjV0MTQuNSw4LjVxMTIsMTIgMTIsMjl0LTEyLDMwbC05NCw4OWwwLDB6bS00NjgsNDA0bC0zMTQsLTE5N2wtMTcyLDBxLTI2LDAgLTQ0LjUsLTE4LjV0LTE4LjUsLTQ1LjVsMCwtMjg2cTAsLTI3IDE4LjUsLTQ1LjV0NDQuNSwtMTguNWwxOTUsMGwyODcsLTE4NXEyMiwtMTYgNTQsLTUuNXQzMiw0MC41bDAsNzI2cTIsMzAgLTI3LjUsNDAuNXQtNTQuNSwtNS41bDAsMHoiIGZpbGw9IiNmN2Y3ZjciLz4KICA8L2c+CiA8L2c+Cjwvc3ZnPgo=);\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMjE2IDEwMjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMTYgMTAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAsNzExLjloMjYzLjNMNjc3LjgsMTAyNFYwTDI2My4zLDMxMi4xSDBWNzExLjl6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTE4Ny4xLDY4NC4ybC0zOC4xLDM1LjdjLTkuMyw4LjctMjMuOCw4LjItMzIuNS0xLjFMNzczLjEsMzUyLjJjLTguNy05LjMtOC4yLTIzLjgsMS4xLTMyLjVsMzguMS0zNS43DQoJYzkuMy04LjcsMjMuOC04LjIsMzIuNSwxLjFsMzQzLjUsMzY2LjZDMTE5Ni44LDY2MSwxMTk2LjMsNjc1LjYsMTE4Ny4xLDY4NC4yeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTc3NC4xLDY4NC4ybDM4LjEsMzUuN2M5LjMsOC43LDIzLjgsOC4yLDMyLjUtMS4xbDM0My41LTM2Ni42YzguNy05LjMsOC4yLTIzLjgtMS4xLTMyLjVsLTM4LjEtMzUuNw0KCWMtOS4zLTguNy0yMy44LTguMi0zMi41LDEuMUw3NzMuMSw2NTEuOEM3NjQuNCw2NjEsNzY0LjksNjc1LjYsNzc0LjEsNjg0LjJ6Ii8+DQo8L3N2Zz4NCg==);\n}\n.adserve-tv-player .timer {\n    margin-left: 10px;\n}\n.adserve-tv-player .fullscreen {\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA5OTIgMTAyNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgOTkyIDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KPC9zdHlsZT4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik05MDEuMSw0MTguNWgtMTcuOGMtMjIuMywwLTQ0LjUtMTcuOC00NC41LTQ0LjVWMTY5LjJINjM0Yy0yMi4zLDAtNDQuNS0xNy44LTQ0LjUtNDQuNVY4OQ0KCWMwLTIyLjMsMTcuOC00NC41LDQ0LjUtNDQuNWgzMjkuNVYzNzRjMCwyMi4zLTE3LjgsNDQuNS00NC41LDQ0LjVIOTAxLjFMOTAxLjEsNDE4LjV6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTg5LjUsOTE3LjF2LTE3LjhjMC0yMi4zLDE3LjgtNDQuNSw0NC41LTQ0LjVoMjA0LjhWNjUwYzAtMjIuMywxNy44LTQ0LjUsNDQuNS00NC41SDkxOQ0KCWMyMi4zLDAsNDQuNSwxNy44LDQ0LjUsNDQuNXYzMjkuNUg2MzRjLTIyLjMsMC00NC41LTE3LjgtNDQuNS00NC41VjkxNy4xTDU4OS41LDkxNy4xeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTkwLjksNjA1LjVoMTcuOGMyMi4zLDAsNDQuNSwxNy44LDQ0LjUsNDQuNXYyMDQuOEgzNThjMjIuMywwLDQ0LjUsMTcuOCw0NC41LDQ0LjVWOTM1DQoJYzAsMjIuMy0xNy44LDQ0LjUtNDQuNSw0NC41SDI4LjVWNjUwYzAtMjIuMywxNy44LTQ0LjUsNDQuNS00NC41SDkwLjlMOTAuOSw2MDUuNXoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDIuNSwxMDYuOXYxNy44YzAsMjIuMy0xNy44LDQ0LjUtNDQuNSw0NC41SDE1My4yVjM3NGMwLDIyLjMtMTcuOCw0NC41LTQ0LjUsNDQuNUg3Mw0KCWMtMjIuMywwLTQ0LjUtMTcuOC00NC41LTQ0LjVWNDQuNUgzNThjMjIuMywwLDQ0LjUsMTcuOCw0NC41LDQ0LjVWMTA2LjlMNDAyLjUsMTA2Ljl6Ii8+DQo8L3N2Zz4NCg==);\n    padding: 0px;\n    background-color: transparent;\n    border: none;\n    background-repeat: no-repeat;\n    background-position: center center;\n    outline: none;\n    width: 24px;\n    height: 24px;\n    background-size: 18px;\n    cursor: pointer;\n    margin-left: auto;\n}\n.adserve-tv-player .fullscreen.off {\n    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMjQgMTAyNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTY4Mi43LDBoMjAuNUM3MzAuNSwwLDc1MSwyMC41LDc1MSw0Ny44djIyNS4zaDIyNS4zYzI3LjMsMCw0Ny44LDIwLjUsNDcuOCw0Ny44djQxDQoJYzAsMjcuMy0yMC41LDQ3LjgtNDcuOCw0Ny44SDYxNC40VjQ3LjhjMC0yNy4zLDIwLjUtNDcuOCw0Ny44LTQ3LjhINjgyLjdMNjgyLjcsMHoiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDI0LDY4Mi43djIwLjVjMCwyNy4zLTIwLjUsNDcuOC00Ny44LDQ3LjhINzUwLjl2MjI1LjNjMCwyNy4zLTIwLjUsNDcuOC00Ny44LDQ3LjhoLTQxDQoJYy0yNy4zLDAtNDcuOC0yMC41LTQ3LjgtNDcuOFY2MTQuNGgzNjEuOGMyNy4zLDAsNDcuOCwyMC41LDQ3LjgsNDcuOEwxMDI0LDY4Mi43TDEwMjQsNjgyLjd6Ii8+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMCwzNDEuM3YtMjAuNUMwLDI5My41LDIwLjUsMjczLDQ3LjgsMjczaDIyNS4zVjQ3LjhjMC0yNy4zLDIwLjUtNDcuOCw0Ny44LTQ3LjhoNDENCgljMjcuMywwLDQ3LjgsMjAuNSw0Ny44LDQ3Ljh2MzYxLjhINDcuOEMyMC41LDQwOS42LDAsMzg5LjEsMCwzNjEuOFYzNDEuM0wwLDM0MS4zeiIvPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM0MS4zLDEwMjRoLTIwLjVjLTI3LjMsMC00Ny44LTIwLjUtNDcuOC00Ny44Vjc1MC45SDQ3LjhDMjAuNSw3NTAuOSwwLDczMC41LDAsNzAzLjF2LTQxDQoJYzAtMjcuMywyMC41LTQ3LjgsNDcuOC00Ny44aDM2MS44djM2MS44YzAsMjcuMy0yMC41LDQ3LjgtNDcuOCw0Ny44TDM0MS4zLDEwMjRMMzQxLjMsMTAyNHoiLz4NCjwvc3ZnPg0K);\n}\n\n.adserve-tv-player.ads .overlay,\n.adserve-tv-player.ads .gradient,\n.adserve-tv-player.ads .header,\n.adserve-tv-player.ads .timeline,\n.adserve-tv-player.ads .controls {\n    opacity: 0;\n    visibility: hidden;\n}\n',""]);const a=r},954:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(r[s]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);n&&r[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),e.push(l))}},e}},11:(t,e,i)=>{var n;n="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},t.exports=n},328:function(t,e,i){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=e(t),n=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),n>-1)},this.trigger=function(e){var i,n,r,a;if(i=t[e])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else{for(a=[],n=arguments.length,n=1;n<arguments.length;++n)a.push(arguments[n]);for(r=i.length,n=0;n<r;++n)i[n].apply(this,a)}},this.dispose=function(){t={}}}};n.prototype.pipe=function(t){return this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),this.on("partialdone",(function(e){t.partialFlush(e)})),this.on("endedtimeline",(function(e){t.endTimeline(e)})),this.on("reset",(function(e){t.reset(e)})),t},n.prototype.push=function(t){this.trigger("data",t)},n.prototype.flush=function(t){this.trigger("done",t)},n.prototype.partialFlush=function(t){this.trigger("partialdone",t)},n.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},n.prototype.reset=function(t){this.trigger("reset",t)};var r,a,s,o,l,d,u,c=n,h=9e4;l=function(t,e){return r(o(t,e))},d=function(t,e){return a(s(t),e)},u=function(t,e,i){return s(i?t:t-e)};var p,g={ONE_SECOND_IN_TS:h,secondsToVideoTs:r=function(t){return t*h},secondsToAudioTs:a=function(t,e){return t*e},videoTsToSeconds:s=function(t){return t/h},audioTsToSeconds:o=function(t,e){return t/e},audioTsToVideoTs:l,videoTsToAudioTs:d,metadataTsToSeconds:u},m=g.ONE_SECOND_IN_TS,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(p=function(t){var e,i=0;p.prototype.init.call(this),this.skipWarn_=function(t,e){this.trigger("log",{level:"warn",message:"adts skiping bytes "+t+" to "+e+" in frame "+i+" outside syncword"})},this.push=function(n){var r,a,s,o,l,d=0;if(t||(i=0),"audio"===n.type){var u;for(e&&e.length?(s=e,(e=new Uint8Array(s.byteLength+n.data.byteLength)).set(s),e.set(n.data,s.byteLength)):e=n.data;d+7<e.length;)if(255===e[d]&&240==(246&e[d+1])){if("number"==typeof u&&(this.skipWarn_(u,d),u=null),a=2*(1&~e[d+1]),r=(3&e[d+3])<<11|e[d+4]<<3|(224&e[d+5])>>5,l=(o=1024*(1+(3&e[d+6])))*m/f[(60&e[d+2])>>>2],e.byteLength-d<r)break;this.trigger("data",{pts:n.pts+i*l,dts:n.dts+i*l,sampleCount:o,audioobjecttype:1+(e[d+2]>>>6&3),channelcount:(1&e[d+2])<<2|(192&e[d+3])>>>6,samplerate:f[(60&e[d+2])>>>2],samplingfrequencyindex:(60&e[d+2])>>>2,samplesize:16,data:e.subarray(d+7+a,d+r)}),i++,d+=r}else"number"!=typeof u&&(u=d),d++;"number"==typeof u&&(this.skipWarn_(u,d),u=null),e=e.subarray(d)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){e=void 0,this.trigger("reset")},this.endTimeline=function(){e=void 0,this.trigger("endedtimeline")}}).prototype=new c;var y,v,b,T=p,A=function(t){var e=t.byteLength,i=0,n=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+n},this.loadWord=function(){var r=t.byteLength-e,a=new Uint8Array(4),s=Math.min(4,e);if(0===s)throw new Error("no bytes available");a.set(t.subarray(r,r+s)),i=new DataView(a.buffer).getUint32(0),n=8*s,e-=s},this.skipBits=function(t){var r;n>t?(i<<=t,n-=t):(t-=n,t-=8*(r=Math.floor(t/8)),e-=r,this.loadWord(),i<<=t,n-=t)},this.readBits=function(t){var r=Math.min(n,t),a=i>>>32-r;return(n-=r)>0?i<<=r:e>0&&this.loadWord(),(r=t-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var t;for(t=0;t<n;++t)if(0!=(i&2147483648>>>t))return i<<=t,n-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(v=function(){var t,e,i=0;v.prototype.init.call(this),this.push=function(n){var r;e?((r=new Uint8Array(e.byteLength+n.data.byteLength)).set(e),r.set(n.data,e.byteLength),e=r):e=n.data;for(var a=e.byteLength;i<a-3;i++)if(1===e[i+2]){t=i+5;break}for(;t<a;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}i+3!==t-2&&this.trigger("data",e.subarray(i+3,t-2));do{t++}while(1!==e[t]&&t<a);i=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}e=e.subarray(i),t-=i,i=0},this.reset=function(){e=null,i=0,this.trigger("reset")},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(i+3)),e=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new c,b={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},y=function(){var t,e,i,n,r,a,s,o=new v;y.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,i=t.pts,n=t.dts,o.push(t))},o.on("data",(function(s){var o={trackId:e,pts:i,dts:n,data:s,nalUnitTypeCode:31&s[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",o)})),o.on("done",(function(){t.trigger("done")})),o.on("partialdone",(function(){t.trigger("partialdone")})),o.on("reset",(function(){t.trigger("reset")})),o.on("endedtimeline",(function(){t.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(t,e){var i,n=8,r=8;for(i=0;i<t;i++)0!==r&&(r=(n+e.readExpGolomb()+256)%256),n=0===r?n:r},r=function(t){for(var e,i,n=t.byteLength,r=[],a=1;a<n-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var s=0;for(a=0;a<e;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=t[s];return i},a=function(t){var e,i,n,r,a,o,l,d,u,c,h,p,g=0,m=0,f=0,y=0,v=[1,1];if(i=(e=new A(t)).readUnsignedByte(),r=e.readUnsignedByte(),n=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),b[i]&&(3===(a=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)e.readBoolean()&&s(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(o=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===o)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),l=e.readUnsignedExpGolomb(),p=0;p<l;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),d=e.readUnsignedExpGolomb(),u=e.readUnsignedExpGolomb(),0===(c=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(g=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),f=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:16*(d+1)-2*g-2*m,height:(2-c)*(u+1)*16-2*f-2*y,sarRatio:v}}},y.prototype=new c;var w,S,_,E,L,C,I,k,M,N,D,R,x,U,P,O,V,j,z,B,F,G,H,W,Y,Q,Z,X,q,J,K,$,tt,et,it,nt,rt,at,st,ot,lt={H264Stream:y,NalByteStream:v},dt={Adts:T,h264:lt},ut=Math.pow(2,32),ct={getUint64:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getBigUint64?(e=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(e):e:i.getUint32(0)*ut+i.getUint32(4)},MAX_UINT32:ut},ht=ct.MAX_UINT32;(function(){var t;if(G={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in G)G.hasOwnProperty(t)&&(G[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);H=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Y=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),W=new Uint8Array([0,0,0,1]),Q=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Z=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),X={video:Q,audio:Z},K=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),J=new Uint8Array([0,0,0,0,0,0,0,0]),$=new Uint8Array([0,0,0,0,0,0,0,0]),tt=$,et=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),it=$,q=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),w=function(t){var e,i,n=[],r=0;for(e=1;e<arguments.length;e++)n.push(arguments[e]);for(e=n.length;e--;)r+=n[e].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),e=0,r=8;e<n.length;e++)i.set(n[e],r),r+=n[e].byteLength;return i},S=function(){return w(G.dinf,w(G.dref,K))},_=function(t){return w(G.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},P=function(t){return w(G.hdlr,X[t])},U=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),w(G.mdhd,e)},x=function(t){return w(G.mdia,U(t),P(t.type),C(t))},L=function(t){return w(G.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},C=function(t){return w(G.minf,"video"===t.type?w(G.vmhd,q):w(G.smhd,J),S(),V(t))},I=function(t,e){for(var i=[],n=e.length;n--;)i[n]=z(e[n]);return w.apply(null,[G.moof,L(t)].concat(i))},k=function(t){for(var e=t.length,i=[];e--;)i[e]=D(t[e]);return w.apply(null,[G.moov,N(4294967295)].concat(i).concat(M(t)))},M=function(t){for(var e=t.length,i=[];e--;)i[e]=B(t[e]);return w.apply(null,[G.mvex].concat(i))},N=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return w(G.mvhd,e)},O=function(t){var e,i,n=t.samples||[],r=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)e=n[i].flags,r[i+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return w(G.sdtp,r)},V=function(t){return w(G.stbl,j(t),w(G.stts,it),w(G.stsc,tt),w(G.stsz,et),w(G.stco,$))},j=function(t){return w(G.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?st(t):ot(t))},st=function(t){var e,i,n=t.sps||[],r=t.pps||[],a=[],s=[];for(e=0;e<n.length;e++)a.push((65280&n[e].byteLength)>>>8),a.push(255&n[e].byteLength),a=a.concat(Array.prototype.slice.call(n[e]));for(e=0;e<r.length;e++)s.push((65280&r[e].byteLength)>>>8),s.push(255&r[e].byteLength),s=s.concat(Array.prototype.slice.call(r[e]));if(i=[G.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),w(G.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length],a,[r.length],s))),w(G.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var o=t.sarRatio[0],l=t.sarRatio[1];i.push(w(G.pasp,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return w.apply(null,i)},ot=function(t){return w(G.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),_(t))},R=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return w(G.tkhd,e)},z=function(t){var e,i,n,r,a,s,o;return e=w(G.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/ht),o=Math.floor(t.baseMediaDecodeTime%ht),i=w(G.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),a=92,"audio"===t.type?(n=F(t,a),w(G.traf,e,i,n)):(r=O(t),n=F(t,r.length+a),w(G.traf,e,i,n,r))},D=function(t){return t.duration=t.duration||4294967295,w(G.trak,R(t),x(t))},B=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),w(G.trex,e)},at=function(t,e){var i=0,n=0,r=0,a=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(n=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},rt=function(t,e){var i,n,r,a,s,o;for(e+=20+16*(a=t.samples||[]).length,r=at(a,e),(n=new Uint8Array(r.length+16*a.length)).set(r),i=r.length,o=0;o<a.length;o++)s=a[o],n[i++]=(4278190080&s.duration)>>>24,n[i++]=(16711680&s.duration)>>>16,n[i++]=(65280&s.duration)>>>8,n[i++]=255&s.duration,n[i++]=(4278190080&s.size)>>>24,n[i++]=(16711680&s.size)>>>16,n[i++]=(65280&s.size)>>>8,n[i++]=255&s.size,n[i++]=s.flags.isLeading<<2|s.flags.dependsOn,n[i++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,n[i++]=61440&s.flags.degradationPriority,n[i++]=15&s.flags.degradationPriority,n[i++]=(4278190080&s.compositionTimeOffset)>>>24,n[i++]=(16711680&s.compositionTimeOffset)>>>16,n[i++]=(65280&s.compositionTimeOffset)>>>8,n[i++]=255&s.compositionTimeOffset;return w(G.trun,n)},nt=function(t,e){var i,n,r,a,s,o;for(e+=20+8*(a=t.samples||[]).length,r=at(a,e),(i=new Uint8Array(r.length+8*a.length)).set(r),n=r.length,o=0;o<a.length;o++)s=a[o],i[n++]=(4278190080&s.duration)>>>24,i[n++]=(16711680&s.duration)>>>16,i[n++]=(65280&s.duration)>>>8,i[n++]=255&s.duration,i[n++]=(4278190080&s.size)>>>24,i[n++]=(16711680&s.size)>>>16,i[n++]=(65280&s.size)>>>8,i[n++]=255&s.size;return w(G.trun,i)},F=function(t,e){return"audio"===t.type?nt(t,e):rt(t,e)};var pt,gt,mt,ft,yt,vt,bt={ftyp:E=function(){return w(G.ftyp,H,W,H,Y)},mdat:function(t){return w(G.mdat,t)},moof:I,moov:k,initSegment:function(t){var e,i=E(),n=k(t);return(e=new Uint8Array(i.byteLength+n.byteLength)).set(i),e.set(n,i.byteLength),e}},Tt={toUnsigned:function(t){return t>>>0},toHexString:function(t){return("00"+t.toString(16)).slice(-2)}},At=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])},wt=Tt.toUnsigned,St=function t(e,i){var n,r,a,s,o,l=[];if(!i.length)return null;for(n=0;n<e.byteLength;)r=wt(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),a=At(e.subarray(n+4,n+8)),s=r>1?n+r:e.byteLength,a===i[0]&&(1===i.length?l.push(e.subarray(n+8,s)):(o=t(e.subarray(n+8,s),i.slice(1))).length&&(l=l.concat(o))),n=s;return l},_t=St,Et=function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],s=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],d=65536&n.flags[0],u=131072&n.flags[0];return e=8,r&&(e+=4,n.baseDataOffset=i.getUint32(12),e+=4),a&&(n.sampleDescriptionIndex=i.getUint32(e),e+=4),s&&(n.defaultSampleDuration=i.getUint32(e),e+=4),o&&(n.defaultSampleSize=i.getUint32(e),e+=4),l&&(n.defaultSampleFlags=i.getUint32(e)),d&&(n.durationIsEmpty=!0),!r&&u&&(n.baseDataOffsetIsMoof=!0),n},Lt=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},Ct=function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&i.flags[2],a=4&i.flags[2],s=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],d=8&i.flags[1],u=n.getUint32(4),c=8;for(r&&(i.dataOffset=n.getInt32(c),c+=4),a&&u&&(e={flags:Lt(t.subarray(c,c+4))},c+=4,s&&(e.duration=n.getUint32(c),c+=4),o&&(e.size=n.getUint32(c),c+=4),d&&(1===i.version?e.compositionTimeOffset=n.getInt32(c):e.compositionTimeOffset=n.getUint32(c),c+=4),i.samples.push(e),u--);u--;)e={},s&&(e.duration=n.getUint32(c),c+=4),o&&(e.size=n.getUint32(c),c+=4),l&&(e.flags=Lt(t.subarray(c,c+4)),c+=4),d&&(1===i.version?e.compositionTimeOffset=n.getInt32(c):e.compositionTimeOffset=n.getUint32(c),c+=4),i.samples.push(e);return i},It=Tt.toUnsigned,kt=ct.getUint64,Mt=function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4))};return 1===e.version?e.baseMediaDecodeTime=kt(t.subarray(4)):e.baseMediaDecodeTime=It(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),e},Nt=Tt.toUnsigned,Dt=Tt.toHexString,Rt=ct.getUint64;pt=function(t){var e={};return _t(t,["moov","trak"]).reduce((function(t,e){var i,n,r,a,s;return(i=_t(e,["tkhd"])[0])?(n=i[0],a=Nt(i[r=0===n?12:20]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),(s=_t(e,["mdia","mdhd"])[0])?(r=0===(n=s[0])?12:20,t[a]=Nt(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),t):null):null}),e)},gt=function(t,e){var n=_t(e,["moof","traf"]).reduce((function(e,n){var r,a,s=_t(n,["tfhd"])[0],o=Nt(s[4]<<24|s[5]<<16|s[6]<<8|s[7]),l=t[o]||9e4,d=_t(n,["tfdt"])[0],u=new DataView(d.buffer,d.byteOffset,d.byteLength);return"bigint"==typeof(r=1===d[0]?Rt(d.subarray(4,12)):u.getUint32(4))?a=r/i.default.BigInt(l):"number"!=typeof r||isNaN(r)||(a=r/l),a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),a<e&&(e=a),e}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},mt=function(t,e){var n,r=_t(e,["moof","traf"]),a=0,s=0;if(r&&r.length){var o=_t(r[0],["tfhd"])[0],l=_t(r[0],["trun"])[0],d=_t(r[0],["tfdt"])[0];if(o&&(n=Et(o).trackId),d&&(a=Mt(d).baseMediaDecodeTime),l){var u=Ct(l);u.samples&&u.samples.length&&(s=u.samples[0].compositionTimeOffset||0)}}var c=t[n]||9e4;"bigint"==typeof a&&(s=i.default.BigInt(s),c=i.default.BigInt(c));var h=(a+s)/c;return"bigint"==typeof h&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),h},ft=function(t){var e=_t(t,["moov","trak"]),i=[];return e.forEach((function(t){var e=_t(t,["mdia","hdlr"]),n=_t(t,["tkhd"]);e.forEach((function(t,e){var r,a,s=At(t.subarray(8,12)),o=n[e];"vide"===s&&(a=0===(r=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0)?r.getUint32(12):r.getUint32(20),i.push(a))}))})),i},vt=function(t){var e=0===t[0]?12:20;return Nt(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])},yt=function(t){var e=_t(t,["moov","trak"]),i=[];return e.forEach((function(t){var e,n,r={},a=_t(t,["tkhd"])[0];a&&(n=(e=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===n?e.getUint32(12):e.getUint32(20));var s=_t(t,["mdia","hdlr"])[0];if(s){var o=At(s.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=_t(t,["mdia","minf","stbl","stsd"])[0];if(l){var d=l.subarray(8);r.codec=At(d.subarray(4,8));var u,c=_t(d,[r.codec])[0];c&&(/^[asm]vc[1-9]$/i.test(r.codec)?(u=c.subarray(78),"avcC"===At(u.subarray(4,8))&&u.length>11?(r.codec+=".",r.codec+=Dt(u[9]),r.codec+=Dt(u[10]),r.codec+=Dt(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=c.subarray(28),"esds"===At(u.subarray(4,8))&&u.length>20&&0!==u[19]?(r.codec+="."+Dt(u[19]),r.codec+="."+Dt(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var h=_t(t,["mdia","mdhd"])[0];h&&(r.timescale=vt(h)),i.push(r)})),i};var xt,Ut={findBox:_t,parseType:At,timescale:pt,startTime:gt,compositionStartTime:mt,videoTrackIds:ft,tracks:yt,getTimescaleFromMediaHeader:vt},Pt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ot=function(t,e){var i=Pt();return i.dataOffset=e,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},Vt={groupNalsIntoFrames:function(t){var e,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,n.byteLength=0,e=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(i=t[e]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r},groupFramesIntoGops:function(t){var e,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(i=t[e]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},extendFirstKeyFrame:function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},generateSampleTable:function(t,e){var i,n,r,a,s,o=e||0,l=[];for(i=0;i<t.length;i++)for(a=t[i],n=0;n<a.length;n++)s=a[n],o+=(r=Ot(s,o)).size,l.push(r);return l},concatenateNalData:function(t){var e,i,n,r,a,s,o=0,l=t.byteLength,d=t.nalCount,u=new Uint8Array(l+4*d),c=new DataView(u.buffer);for(e=0;e<t.length;e++)for(r=t[e],i=0;i<r.length;i++)for(a=r[i],n=0;n<a.length;n++)s=a[n],c.setUint32(o,s.data.byteLength),o+=4,u.set(s.data,o),o+=s.data.byteLength;return u},generateSampleTableForFrame:function(t,e){var i,n=[];return i=Ot(t,e||0),n.push(i),n},concatenateNalDataForFrame:function(t){var e,i,n=0,r=t.byteLength,a=t.length,s=new Uint8Array(r+4*a),o=new DataView(s.buffer);for(e=0;e<t.length;e++)i=t[e],o.setUint32(n,i.data.byteLength),n+=4,s.set(i.data,n),n+=i.data.byteLength;return s}},jt=[33,16,5,32,164,27],zt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Bt=function(t){for(var e=[];t--;)e.push(0);return e},Ft=function(t){return Object.keys(t).reduce((function(e,i){return e[i]=new Uint8Array(t[i].reduce((function(t,e){return t.concat(e)}),[])),e}),{})},Gt=function(){if(!xt){var t={96e3:[jt,[227,64],Bt(154),[56]],88200:[jt,[231],Bt(170),[56]],64e3:[jt,[248,192],Bt(240),[56]],48e3:[jt,[255,192],Bt(268),[55,148,128],Bt(54),[112]],44100:[jt,[255,192],Bt(268),[55,163,128],Bt(84),[112]],32e3:[jt,[255,192],Bt(268),[55,234],Bt(226),[112]],24e3:[jt,[255,192],Bt(268),[55,255,128],Bt(268),[111,112],Bt(126),[224]],16e3:[jt,[255,192],Bt(268),[55,255,128],Bt(268),[111,255],Bt(269),[223,108],Bt(195),[1,192]],12e3:[zt,Bt(268),[3,127,248],Bt(268),[6,255,240],Bt(268),[13,255,224],Bt(268),[27,253,128],Bt(259),[56]],11025:[zt,Bt(268),[3,127,248],Bt(268),[6,255,240],Bt(268),[13,255,224],Bt(268),[27,255,192],Bt(268),[55,175,128],Bt(108),[112]],8e3:[zt,Bt(268),[3,121,16],Bt(47),[7]]};xt=Ft(t)}return xt},Ht=function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].data.byteLength;return i},Wt={prefixWithSilence:function(t,e,i,n){var r,a,s,o,l=0,d=0,u=0,c=0;if(e.length&&(r=g.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),l=Math.ceil(g.ONE_SECOND_IN_TS/(t.samplerate/1024)),i&&n&&(d=r-Math.max(i,n),c=(u=Math.floor(d/l))*l),!(u<1||c>g.ONE_SECOND_IN_TS/2))){for((a=Gt()[t.samplerate])||(a=e[0].data),s=0;s<u;s++)o=e[0],e.splice(0,0,{data:a,dts:o.dts-l,pts:o.pts-l});return t.baseMediaDecodeTime-=Math.floor(g.videoTsToAudioTs(c,t.samplerate)),c}},trimAdtsFramesByEarliestDts:function(t,e,i){return e.minSegmentDts>=i?t:(e.minSegmentDts=1/0,t.filter((function(t){return t.dts>=i&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})))},generateSampleTable:function(t){var e,i,n=[];for(e=0;e<t.length;e++)i=t[e],n.push({size:i.data.byteLength,duration:1024});return n},concatenateFrameData:function(t){var e,i,n=0,r=new Uint8Array(Ht(t));for(e=0;e<t.length;e++)i=t[e],r.set(i.data,n),n+=i.data.byteLength;return r}},Yt=g.ONE_SECOND_IN_TS,Qt={clearDtsInfo:function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(t,e){var i,n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/Yt,i=Math.floor(i)),i},collectDtsInfo:function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))}},Zt=4,Xt=128,qt={parseSei:function(t){for(var e=0,i={payloadType:-1,payloadSize:0},n=0,r=0;e<t.byteLength&&t[e]!==Xt;){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!i.payload&&n===Zt){if("GA94"===String.fromCharCode(t[e+3],t[e+4],t[e+5],t[e+6])){i.payloadType=n,i.payloadSize=r,i.payload=t.subarray(e,e+r);break}i.payload=void 0}e+=r,n=0,r=0}return i},parseUserData:function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},parseCaptionPackets:function(t,e){var i,n,r,a,s=[];if(!(64&e[0]))return s;for(n=31&e[0],i=0;i<n;i++)a={type:3&e[2+(r=3*i)],pts:t},4&e[r+2]&&(a.ccData=e[r+3]<<8|e[r+4],s.push(a));return s},discardEmulationPreventionBytes:function(t){for(var e,i,n=t.byteLength,r=[],a=1;a<n-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;e=n-r.length,i=new Uint8Array(e);var s=0;for(a=0;a<e;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=t[s];return i},USER_DATA_REGISTERED_ITU_T_T35:Zt},Jt=function t(e){e=e||{},t.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new de(0,0),new de(0,1),new de(1,0),new de(1,1)],this.parse708captions_&&(this.cc708Stream_=new ne({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Jt.prototype=new c,Jt.prototype.push=function(t){var e,i,n;if("sei_rbsp"===t.nalUnitType&&(e=qt.parseSei(t.escapedRBSP)).payload&&e.payloadType===qt.USER_DATA_REGISTERED_ITU_T_T35&&(i=qt.parseUserData(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=qt.parseCaptionPackets(t.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},Jt.prototype.flushCCStreams=function(t){this.ccStreams_.forEach((function(e){return"flush"===t?e.flush():e.partialFlush()}),this)},Jt.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach((function(t,e){t.presortIndex=e})),this.captionPackets_.sort((function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts})),this.captionPackets_.forEach((function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)}),this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},Jt.prototype.flush=function(){return this.flushStream("flush")},Jt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Jt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(t){t.reset()}))},Jt.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},Jt.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},Jt.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},Jt.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)},Jt.prototype.dispatchCea708Packet=function(t){this.parse708captions_&&this.cc708Stream_.push(t)};var Kt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},$t=function(t){var e=Kt[t]||t;return 4096&t&&t===e?"":String.fromCharCode(e)},te=function(t){return 32<=t&&t<=127||160<=t&&t<=255},ee=function(t){this.windowNum=t,this.reset()};ee.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ee.prototype.getText=function(){return this.rows.join("\n")},ee.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ee.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ee.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ee.prototype.addText=function(t){this.rows[this.rowIdx]+=t},ee.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}};var ie=function(t,e,i){this.serviceNum=t,this.text="",this.currentWindow=new ee(-1),this.windows=[],this.stream=i,"string"==typeof e&&this.createTextDecoder(e)};ie.prototype.init=function(t,e){this.startPts=t;for(var i=0;i<8;i++)this.windows[i]=new ee(i),"function"==typeof e&&(this.windows[i].beforeRowOverflow=e)},ie.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]},ie.prototype.createTextDecoder=function(t){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t)}catch(e){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t+" encoding. "+e})}};var ne=function t(e){e=e||{},t.prototype.init.call(this);var i,n=this,r=e.captionServices||{},a={};Object.keys(r).forEach((function(t){i=r[t],/^SERVICE/.test(t)&&(a[t]=i.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(t){3===t.type?(n.new708Packet(),n.add708Bytes(t)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(t))}};ne.prototype=new c,ne.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ne.prototype.add708Bytes=function(t){var e=t.ccData,i=e>>>8,n=255&e;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},ne.prototype.push708Packet=function(){var t=this.current708Packet,e=t.data,i=null,n=null,r=0,a=e[r++];for(t.seq=a>>6,t.sizeCode=63&a;r<e.length;r++)n=31&(a=e[r++]),7==(i=a>>5)&&n>0&&(i=a=e[r++]),this.pushServiceBlock(i,r,n),n>0&&(r+=n-1)},ne.prototype.pushServiceBlock=function(t,e,i){var n,r=e,a=this.current708Packet.data,s=this.services[t];for(s||(s=this.initService(t,r));r<e+i&&r<a.length;r++)n=a[r],te(n)?r=this.handleText(r,s):24===n?r=this.multiByteCharacter(r,s):16===n?r=this.extendedCommands(r,s):128<=n&&n<=135?r=this.setCurrentWindow(r,s):152<=n&&n<=159?r=this.defineWindow(r,s):136===n?r=this.clearWindows(r,s):140===n?r=this.deleteWindows(r,s):137===n?r=this.displayWindows(r,s):138===n?r=this.hideWindows(r,s):139===n?r=this.toggleWindows(r,s):151===n?r=this.setWindowAttributes(r,s):144===n?r=this.setPenAttributes(r,s):145===n?r=this.setPenColor(r,s):146===n?r=this.setPenLocation(r,s):143===n?s=this.reset(r,s):8===n?s.currentWindow.backspace():12===n?s.currentWindow.clearText():13===n?s.currentWindow.pendingNewLine=!0:14===n?s.currentWindow.clearText():141===n&&r++},ne.prototype.extendedCommands=function(t,e){var i=this.current708Packet.data[++t];return te(i)&&(t=this.handleText(t,e,{isExtended:!0})),t},ne.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},ne.prototype.initService=function(t,e){var i,n,r=this;return(i="SERVICE"+t)in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[t]=new ie(t,n,r),this.services[t].init(this.getPts(e),(function(e){r.flushDisplayed(e,r.services[t])})),this.services[t]},ne.prototype.handleText=function(t,e,i){var n,r,a=i&&i.isExtended,s=i&&i.isMultiByte,o=this.current708Packet.data,l=a?4096:0,d=o[t],u=o[t+1],c=e.currentWindow;return e.textDecoder_&&!a?(s?(r=[d,u],t++):r=[d],n=e.textDecoder_.decode(new Uint8Array(r))):n=$t(l|d),c.pendingNewLine&&!c.isEmpty()&&c.newLine(this.getPts(t)),c.pendingNewLine=!1,c.addText(n),t},ne.prototype.multiByteCharacter=function(t,e){var i=this.current708Packet.data,n=i[t+1],r=i[t+2];return te(n)&&te(r)&&(t=this.handleText(++t,e,{isMultiByte:!0})),t},ne.prototype.setCurrentWindow=function(t,e){var i=7&this.current708Packet.data[t];return e.setCurrentWindow(i),t},ne.prototype.defineWindow=function(t,e){var i=this.current708Packet.data,n=i[t],r=7&n;e.setCurrentWindow(r);var a=e.currentWindow;return n=i[++t],a.visible=(32&n)>>5,a.rowLock=(16&n)>>4,a.columnLock=(8&n)>>3,a.priority=7&n,n=i[++t],a.relativePositioning=(128&n)>>7,a.anchorVertical=127&n,n=i[++t],a.anchorHorizontal=n,n=i[++t],a.anchorPoint=(240&n)>>4,a.rowCount=15&n,n=i[++t],a.columnCount=63&n,n=i[++t],a.windowStyle=(56&n)>>3,a.penStyle=7&n,a.virtualRowCount=a.rowCount+1,t},ne.prototype.setWindowAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.winAttr;return n=i[++t],r.fillOpacity=(192&n)>>6,r.fillRed=(48&n)>>4,r.fillGreen=(12&n)>>2,r.fillBlue=3&n,n=i[++t],r.borderType=(192&n)>>6,r.borderRed=(48&n)>>4,r.borderGreen=(12&n)>>2,r.borderBlue=3&n,n=i[++t],r.borderType+=(128&n)>>5,r.wordWrap=(64&n)>>6,r.printDirection=(48&n)>>4,r.scrollDirection=(12&n)>>2,r.justify=3&n,n=i[++t],r.effectSpeed=(240&n)>>4,r.effectDirection=(12&n)>>2,r.displayEffect=3&n,t},ne.prototype.flushDisplayed=function(t,e){for(var i=[],n=0;n<8;n++)e.windows[n].visible&&!e.windows[n].isEmpty()&&i.push(e.windows[n].getText());e.endPts=t,e.text=i.join("\n\n"),this.pushCaption(e),e.startPts=t},ne.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},ne.prototype.displayWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=1);return t},ne.prototype.hideWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible=0);return t},ne.prototype.toggleWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&(e.windows[r].visible^=1);return t},ne.prototype.clearWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].clearText();return t},ne.prototype.deleteWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var r=0;r<8;r++)i&1<<r&&e.windows[r].reset();return t},ne.prototype.setPenAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penAttr;return n=i[++t],r.textTag=(240&n)>>4,r.offset=(12&n)>>2,r.penSize=3&n,n=i[++t],r.italics=(128&n)>>7,r.underline=(64&n)>>6,r.edgeType=(56&n)>>3,r.fontStyle=7&n,t},ne.prototype.setPenColor=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penColor;return n=i[++t],r.fgOpacity=(192&n)>>6,r.fgRed=(48&n)>>4,r.fgGreen=(12&n)>>2,r.fgBlue=3&n,n=i[++t],r.bgOpacity=(192&n)>>6,r.bgRed=(48&n)>>4,r.bgGreen=(12&n)>>2,r.bgBlue=3&n,n=i[++t],r.edgeRed=(48&n)>>4,r.edgeGreen=(12&n)>>2,r.edgeBlue=3&n,t},ne.prototype.setPenLocation=function(t,e){var i=this.current708Packet.data,n=i[t],r=e.currentWindow.penLoc;return e.currentWindow.pendingNewLine=!0,n=i[++t],r.row=15&n,n=i[++t],r.column=63&n,t},ne.prototype.reset=function(t,e){var i=this.getPts(t);return this.flushDisplayed(i,e),this.initService(e.serviceNum,t)};var re={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ae=function(t){return null===t?"":(t=re[t]||t,String.fromCharCode(t))},se=14,oe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],le=function(){for(var t=[],e=se+1;e--;)t.push("");return t},de=function t(e,i){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,r,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=le();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=le();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=le()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(n,r))a=ae((n=(3&n)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ae((n=(3&n)<<8)|r),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&r)&&this.addFormatting(t.pts,["i"]),1==(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var s=oe.indexOf(7968&e);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(t.pts,s)),s!==this.row_&&(this.clearFormatting(t.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=ae(n),a+=ae(r),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};de.prototype=new c,de.prototype.flushDisplayed=function(t){var e=this.displayed_.map((function(t,e){try{return t.trim()}catch(t){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},de.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=le(),this.nonDisplayed_=le(),this.lastControlCode_=null,this.column_=0,this.row_=se,this.rollUpRows_=2,this.formatting_=[]},de.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},de.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},de.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},de.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},de.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},de.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},de.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},de.prototype.isNormalChar=function(t){return t>=32&&t<=127},de.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=se,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=le(),this.displayed_=le()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},de.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce((function(t,e){return t+"<"+e+">"}),"");this[this.mode_](t,i)},de.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce((function(t,e){return t+"</"+e+">"}),"");this.formatting_=[],this[this.mode_](t,e)}},de.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},de.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},de.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<se+1;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},de.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i};var ue={CaptionStream:Jt,Cea608Stream:de,Cea708Stream:ne},ce={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},he=8589934592,pe=4294967296,ge="shared",me=function(t,e){var i=1;for(t>e&&(i=-1);Math.abs(e-t)>pe;)t+=i*he;return t},fe=function t(e){var i,n;t.prototype.init.call(this),this.type_=e||ge,this.push=function(t){this.type_!==ge&&t.type!==this.type_||(void 0===n&&(n=t.dts),t.dts=me(t.dts,n),t.pts=me(t.pts,n),i=t.dts,this.trigger("data",t))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};fe.prototype=new c;var ye,ve={TimestampRolloverStream:fe,handleRollover:me},be=function(t,e,i){var n,r="";for(n=e;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r},Te=function(t,e,i){return decodeURIComponent(be(t,e,i))},Ae=function(t,e,i){return unescape(be(t,e,i))},we=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},Se={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Te(t.data,1,e),t.value=Te(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Te(t.data,1,e),t.url=Te(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=Ae(t.data,0,e);break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(ye=function(t){var e,i={descriptor:t&&t.descriptor},n=0,r=[],a=0;if(ye.prototype.init.call(this),this.dispatchType=ce.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(e=0;e<i.descriptor.length;e++)this.dispatchType+=("00"+i.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,s,o,l;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(t),a+=t.data.byteLength,1===r.length&&(n=we(t.data.subarray(6,10)),n+=10),!(a<n)){for(e={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<n;)e.data.set(r[0].data.subarray(0,n-l),l),l+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();i=10,64&e.data[5]&&(i+=4,i+=we(e.data.subarray(10,14)),n-=we(e.data.subarray(16,20)));do{if((s=we(e.data.subarray(i+4,i+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((o={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+s+10)}).key=o.id,Se[o.id]&&(Se[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)){var d=o.data,u=(1&d[3])<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;u*=4,u+=3&d[7],o.timeStamp=u,void 0===e.pts&&void 0===e.dts&&(e.pts=o.timeStamp,e.dts=o.timeStamp),this.trigger("timestamp",o)}e.frames.push(o),i+=10,i+=s}while(i<n);this.trigger("data",e)}}}).prototype=new c;var _e,Ee,Le,Ce=ye,Ie=ve.TimestampRolloverStream,ke=188,Me=71;(_e=function(){var t=new Uint8Array(ke),e=0;_e.prototype.init.call(this),this.push=function(i){var n,r=0,a=ke;for(e?((n=new Uint8Array(i.byteLength+e)).set(t.subarray(0,e)),n.set(i,e),e=0):n=i;a<n.byteLength;)n[r]!==Me||n[a]!==Me?(r++,a++):(this.trigger("data",n.subarray(r,a)),r+=ke,a+=ke);r<n.byteLength&&(t.set(n.subarray(r),0),e=n.byteLength-r)},this.flush=function(){e===ke&&t[0]===Me&&(this.trigger("data",t),e=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){e=0,this.trigger("reset")}}).prototype=new c,Ee=function(){var t,e,i,n;Ee.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,n){var r=0;n.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===n.type?e(t.subarray(r),n):i(t.subarray(r),n)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],n.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=n.pmtPid},i=function(t,e){var i,r;if(1&t[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<i;){var a=t[r],s=(31&t[r+1])<<8|t[r+2];a===ce.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=s:a===ce.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=s:a===ce.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=a),r+=5+((15&t[r+3])<<8|t[r+4])}e.programMapTable=n.programMapTable}},this.push=function(e){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&e[1]),i.pid=31&e[1],i.pid<<=8,i.pid|=e[2],(48&e[3])>>>4>1&&(n+=e[n]+1),0===i.pid)i.type="pat",t(e.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(e.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,i]):this.processPes_(e,n,i)},this.processPes_=function(t,e,i){i.pid===this.programMapTable.video?i.streamType=ce.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=ce.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}},Ee.prototype=new c,Ee.STREAM_TYPES={h264:27,adts:15},Le=function(){var t,e=this,i=!1,n={data:[],size:0},r={data:[],size:0},a={data:[],size:0},s=function(t,e){var i,n=t[0]<<16|t[1]<<8|t[2];e.data=new Uint8Array,1===n&&(e.packetLength=6+(t[4]<<8|t[5]),e.dataAlignmentIndicator=0!=(4&t[6]),192&(i=t[7])&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&i&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8]))},o=function(t,i,n){var r,a=new Uint8Array(t.size),o={type:i},l=0,d=0,u=!1;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,l=0;l<t.data.length;l++)r=t.data[l],a.set(r.data,d),d+=r.data.byteLength;s(a,o),u="video"===i||o.packetLength<=t.size,(n||u)&&(t.size=0,t.data.length=0),u&&e.trigger("data",o)}};Le.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var t,e;switch(s.streamType){case ce.H264_STREAM_TYPE:t=n,e="video";break;case ce.ADTS_STREAM_TYPE:t=r,e="audio";break;case ce.METADATA_STREAM_TYPE:t=a,e="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&o(t,e,!0),t.data.push(s),t.size+=s.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(t=s.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i=!0,e.trigger("data",n)}})[s.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(n,"video"),o(r,"audio"),o(a,"timed-metadata")},this.flush=function(){if(!i&&t){var n={type:"metadata",tracks:[]};null!==t.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),e.trigger("data",n)}i=!1,this.flushStreams_(),this.trigger("done")}},Le.prototype=new c;var Ne={PAT_PID:0,MP2T_PACKET_LENGTH:ke,TransportPacketStream:_e,TransportParseStream:Ee,ElementaryStream:Le,TimestampRolloverStream:Ie,CaptionStream:ue.CaptionStream,Cea608Stream:ue.Cea608Stream,Cea708Stream:ue.Cea708Stream,MetadataStream:Ce};for(var De in ce)ce.hasOwnProperty(De)&&(Ne[De]=ce[De]);var Re,xe=Ne,Ue=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Pe=function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return i=i>=0?i:0,(16&t[e+5])>>4?i+20:i+10},Oe=function t(e,i){return e.length-i<10||e[i]!=="I".charCodeAt(0)||e[i+1]!=="D".charCodeAt(0)||e[i+2]!=="3".charCodeAt(0)?i:t(e,i+=Pe(e,i))},Ve=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},je=function(t,e,i){var n,r="";for(n=e;n<i;n++)r+="%"+("00"+t[n].toString(16)).slice(-2);return r},ze=function(t,e,i){return unescape(je(t,e,i))},Be={isLikelyAacData:function(t){var e=Oe(t,0);return t.length>=e+2&&255==(255&t[e])&&240==(240&t[e+1])&&16==(22&t[e+1])},parseId3TagSize:Pe,parseAdtsSize:function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return Ue[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,i,n;e=10,64&t[5]&&(e+=4,e+=Ve(t.subarray(10,14)));do{if((i=Ve(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){n=t.subarray(e+10,e+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"===ze(n,0,r)){var a=n.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}break}}e+=10,e+=i}while(e<t.byteLength);return null}};(Re=function(){var t=new Uint8Array,e=0;Re.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.push=function(i){var n,r,a,s,o=0,l=0;for(t.length?(s=t.length,(t=new Uint8Array(i.byteLength+s)).set(t.subarray(0,s)),t.set(i,s)):t=i;t.length-l>=3;)if(t[l]!=="I".charCodeAt(0)||t[l+1]!=="D".charCodeAt(0)||t[l+2]!=="3".charCodeAt(0))if(255!=(255&t[l])||240!=(240&t[l+1]))l++;else{if(t.length-l<7)break;if(l+(o=Be.parseAdtsSize(t,l))>t.length)break;a={type:"audio",data:t.subarray(l,l+o),pts:e,dts:e},this.trigger("data",a),l+=o}else{if(t.length-l<10)break;if(l+(o=Be.parseId3TagSize(t,l))>t.length)break;r={type:"timed-metadata",data:t.subarray(l,l+o)},this.trigger("data",r),l+=o}n=t.length-l,t=n>0?t.subarray(l):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new c;var Fe,Ge,He,We,Ye=Re,Qe=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ze=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Xe=lt.H264Stream,qe=Be.isLikelyAacData,Je=g.ONE_SECOND_IN_TS,Ke=function(t,e){e.stream=t,this.trigger("log",e)},$e=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++){var r=i[n];"headOfPipeline"!==r&&e[r].on&&e[r].on("log",Ke.bind(t,r))}},ti=function(t,e){var i;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},ei=function(t,e,i,n,r,a){return{start:{dts:t,pts:t+(i-e)},end:{dts:t+(n-e),pts:t+(r-i)},prependedContentDuration:a,baseMediaDecodeTime:t}};Ge=function(t,e){var i,n=[],r=0,a=0,s=1/0;i=(e=e||{}).firstSequenceNumber||0,Ge.prototype.init.call(this),this.push=function(e){Qt.collectDtsInfo(t,e),t&&Qe.forEach((function(i){t[i]=e[i]})),n.push(e)},this.setEarliestDts=function(t){r=t},this.setVideoBaseMediaDecodeTime=function(t){s=t},this.setAudioAppendStart=function(t){a=t},this.flush=function(){var o,l,d,u,c,h,p;0!==n.length?(o=Wt.trimAdtsFramesByEarliestDts(n,t,r),t.baseMediaDecodeTime=Qt.calculateTrackBaseMediaDecodeTime(t,e.keepOriginalTimestamps),p=Wt.prefixWithSilence(t,o,a,s),t.samples=Wt.generateSampleTable(o),d=bt.mdat(Wt.concatenateFrameData(o)),n=[],l=bt.moof(i,[t]),u=new Uint8Array(l.byteLength+d.byteLength),i++,u.set(l),u.set(d,l.byteLength),Qt.clearDtsInfo(t),c=Math.ceil(1024*Je/t.samplerate),o.length&&(h=o.length*c,this.trigger("segmentTimingInfo",ei(g.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),o[0].dts,o[0].pts,o[0].dts+h,o[0].pts+h,p||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+h})),this.trigger("data",{track:t,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Qt.clearDtsInfo(t),n=[],this.trigger("reset")}},Ge.prototype=new c,Fe=function(t,e){var i,n,r,a=[],s=[];i=(e=e||{}).firstSequenceNumber||0,Fe.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){Qt.collectDtsInfo(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],Ze.forEach((function(e){t[e]=n[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),a.push(e)},this.flush=function(){for(var n,r,o,l,d,u,c,h,p=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=Vt.groupNalsIntoFrames(a),(o=Vt.groupFramesIntoGops(n))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],t))?(p=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=Vt.extendFirstKeyFrame(o)),s.length){var g;if(!(g=e.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Qt.clearDtsInfo(t),o=g}Qt.collectDtsInfo(t,o),t.samples=Vt.generateSampleTable(o),d=bt.mdat(Vt.concatenateNalData(o)),t.baseMediaDecodeTime=Qt.calculateTrackBaseMediaDecodeTime(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}}))),c=o[0],h=o[o.length-1],this.trigger("segmentTimingInfo",ei(t.baseMediaDecodeTime,c.dts,c.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),l=bt.moof(i,[t]),u=new Uint8Array(l.byteLength+d.byteLength),i++,u.set(l),u.set(d,l.byteLength),this.trigger("data",{track:t,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){Qt.clearDtsInfo(t),n=void 0,r=void 0},this.getGopForFusion_=function(e){var i,n,r,a,s,o=45e3,l=1e4,d=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,t.pps&&ti(t.pps[0],a.pps[0])&&t.sps&&ti(t.sps[0],a.sps[0])&&(r.dts<t.timelineStartInfo.dts||(i=e.dts-r.dts-r.duration)>=-l&&i<=o&&(!n||d>i)&&(n=a,d=i));return n?n.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,r,a,o,l,d;for(a=t.byteLength,o=t.nalCount,l=t.duration,e=i=0;e<s.length&&i<t.length&&(n=s[e],r=t[i],n.pts!==r.pts);)r.pts>n.pts?e++:(i++,a-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===i?t:i===t.length?null:((d=t.slice(i)).byteLength=a,d.duration=l,d.nalCount=o,d.pts=d[0].pts,d.dts=d[0].dts,d)},this.alignGopsAtEnd_=function(t){var e,i,n,r,a,o,l;for(e=s.length-1,i=t.length-1,a=null,o=!1;e>=0&&i>=0;){if(n=s[e],r=t[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?e--:(e===s.length-1&&(a=i),i--)}if(!o&&null===a)return null;if(0===(l=o?i:a))return t;var d=t.slice(l),u=d.reduce((function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t}),{byteLength:0,duration:0,nalCount:0});return d.byteLength=u.byteLength,d.duration=u.duration,d.nalCount=u.nalCount,d.pts=d[0].pts,d.dts=d[0].dts,d},this.alignGopsWith=function(t){s=t}},Fe.prototype=new c,We=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,We.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}},We.prototype=new c,We.prototype.flush=function(t){var e,i,n,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Ze.forEach((function(t){s.info[t]=this.videoTrack[t]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Qe.forEach((function(t){s.info[t]=this.audioTrack[t]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=bt.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=g.metadataTsToSeconds(e.startPts,o,this.keepOriginalTimestamps),e.endTime=g.metadataTsToSeconds(e.endPts,o,this.keepOriginalTimestamps),s.captionStreams[e.stream]=!0,s.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=g.metadataTsToSeconds(i.pts,o,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)e=s.captions[r],this.trigger("caption",e);for(r=0;r<s.metadata.length;r++)i=s.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},We.prototype.setRemux=function(t){this.remuxTracks=t},(He=function(t){var e,i,n=this,r=!0;He.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new xe.MetadataStream,r.aacStream=new Ye,r.audioTimestampRolloverStream=new xe.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new xe.TimestampRolloverStream("timed-metadata"),r.adtsStream=new T,r.coalesceStream=new We(t,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(t){r.aacStream.setTimestamp(t.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Ge(i,t),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),$e(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new xe.MetadataStream,r.packetStream=new xe.TransportPacketStream,r.parseStream=new xe.TransportParseStream,r.elementaryStream=new xe.ElementaryStream,r.timestampRolloverStream=new xe.TimestampRolloverStream,r.adtsStream=new T,r.h264Stream=new Xe,r.captionStream=new xe.CaptionStream(t),r.coalesceStream=new We(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)e||"video"!==a.tracks[s].type?i||"audio"!==a.tracks[s].type||((i=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(e=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;e&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new Fe(e,t),r.videoSegmentStream.on("log",n.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(e){i&&!t.keepOriginalTimestamps&&(i.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts-n.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(t){i&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)})),r.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),i&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Ge(i,t),r.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(t){t.dispatchType=r.metadataStream.dispatchType,n.trigger("id3Frame",t)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),$e(this,r)},this.setBaseMediaDecodeTime=function(n){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,Qt.clearDtsInfo(i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,Qt.clearDtsInfo(e),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(e){var i=this.transmuxPipeline_;t.remux=e,i&&i.coalesceStream&&i.coalesceStream.setRemux(e)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.getLogTrigger_=function(t){var e=this;return function(i){i.stream=t,e.trigger("log",i)}},this.push=function(t){if(r){var e=qe(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new c;var ii,ni={Transmuxer:He,VideoSegmentStream:Fe,AudioSegmentStream:Ge,AUDIO_PROPERTIES:Qe,VIDEO_PROPERTIES:Ze,generateSegmentTimingInfo:ei},ri=qt.discardEmulationPreventionBytes,ai=ue.CaptionStream,si=function(t,e){for(var i=t,n=0;n<e.length;n++){var r=e[n];if(i<r.size)return r;i-=r.size}return null},oi=function(t,e,i){var n,r,a,s,o=new DataView(t.buffer,t.byteOffset,t.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<t.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&t[r]){case 6:var d=t.subarray(r+1,r+1+a),u=si(r,e);if(n={nalUnitType:"sei_rbsp",size:a,data:d,escapedRBSP:ri(d),trackId:i},u)n.pts=u.pts,n.dts=u.dts,s=u;else{if(!s){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+i+". See mux.js#223."});break}n.pts=s.pts,n.dts=s.dts}l.seiNals.push(n)}return l},li=function(t,e,n){var r=e,a=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,l=[];return t.forEach((function(t){var e=Ct(t).samples;e.forEach((function(t){void 0===t.duration&&(t.duration=a),void 0===t.size&&(t.size=s),t.trackId=o,t.dts=r,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),"bigint"==typeof r?(t.pts=r+i.default.BigInt(t.compositionTimeOffset),r+=i.default.BigInt(t.duration)):(t.pts=r+t.compositionTimeOffset,r+=t.duration)})),l=l.concat(e)})),l},di=function(t,e){var i=_t(t,["moof","traf"]),n=_t(t,["mdat"]),r={},a=[];return n.forEach((function(t,e){var n=i[e];a.push({mdat:t,traf:n})})),a.forEach((function(t){var i,n,a=t.mdat,s=t.traf,o=_t(s,["tfhd"]),l=Et(o[0]),d=l.trackId,u=_t(s,["tfdt"]),c=u.length>0?Mt(u[0]).baseMediaDecodeTime:0,h=_t(s,["trun"]);e===d&&h.length>0&&(i=li(h,c,l),n=oi(a,i,d),r[d]||(r[d]={seiNals:[],logs:[]}),r[d].seiNals=r[d].seiNals.concat(n.seiNals),r[d].logs=r[d].logs.concat(n.logs))})),r},ui=function(t,e,i){if(null===e)return null;var n=di(t,e)[e]||{};return{seiNals:n.seiNals,logs:n.logs,timescale:i}},ci=function(){var t,e,i,n,r,a,s=!1;this.isInitialized=function(){return s},this.init=function(e){t=new ai,s=!0,a=!!e&&e.isPartial,t.on("data",(function(t){t.startTime=t.startPts/n,t.endTime=t.endPts/n,r.captions.push(t),r.captionStreams[t.stream]=!0})),t.on("log",(function(t){r.logs.push(t)}))},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length||i===t[0]&&n===e[i])},this.parse=function(t,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))i=a[0],n=s[i];else if(null===i||!n)return e.push(t),null;for(;e.length>0;){var l=e.shift();this.parse(l,a,s)}return(o=ui(t,i,n))&&o.logs&&(r.logs=r.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach((function(e){t.push(e)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],i=null,n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},hi=ci,pi={generator:bt,probe:Ut,Transmuxer:ni.Transmuxer,AudioSegmentStream:ni.AudioSegmentStream,VideoSegmentStream:ni.VideoSegmentStream,CaptionParser:hi};ii=function(t,e){var i,n=0,r=16384,a=function(t,e){var i,n=t.position+e;n<t.bytes.byteLength||((i=new Uint8Array(2*n)).set(t.bytes.subarray(0,t.position),0),t.bytes=i,t.view=new DataView(t.bytes.buffer))},s=ii.widthBytes||new Uint8Array("width".length),o=ii.heightBytes||new Uint8Array("height".length),l=ii.videocodecidBytes||new Uint8Array("videocodecid".length);if(!ii.widthBytes){for(i=0;i<"width".length;i++)s[i]="width".charCodeAt(i);for(i=0;i<"height".length;i++)o[i]="height".charCodeAt(i);for(i=0;i<"videocodecid".length;i++)l[i]="videocodecid".charCodeAt(i);ii.widthBytes=s,ii.heightBytes=o,ii.videocodecidBytes=l}switch(this.keyFrame=!1,t){case ii.VIDEO_TAG:this.length=16,r*=6;break;case ii.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case ii.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(r),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=e,this.pts=0,this.dts=0,this.writeBytes=function(t,e,i){var n,r=e||0;n=r+(i=i||t.byteLength),a(this,i),this.bytes.set(t.subarray(r,n),this.position),this.position+=i,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){a(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){a(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===n?0:this.length-(n+4)},this.startNalUnit=function(){if(n>0)throw new Error("Attempted to create new NAL wihout closing the old one");n=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,i;this.length===n+4?this.length-=4:n>0&&(e=n+4,i=this.length-e,this.position=n,this.view.setUint32(this.position,i),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+i))),n=0},this.writeMetaDataDouble=function(t,e){var i;if(a(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(s,this.position),this.position+=5;else if("height"===t)this.bytes.set(o,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(l,this.position),this.position+=12;else for(i=0;i<t.length;i++)this.bytes[this.position]=t.charCodeAt(i),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++n},this.writeMetaDataBoolean=function(t,e){var i;for(a(this,2),this.view.setUint16(this.position,t.length),this.position+=2,i=0;i<t.length;i++)a(this,1),this.bytes[this.position]=t.charCodeAt(i),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++n},this.finalize=function(){var t,i;switch(this.bytes[0]){case ii.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||e?16:32),this.bytes[12]=e?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case ii.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=e?0:1;break;case ii.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,n),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return i=this.length-11,this.bytes[1]=(16711680&i)>>>16,this.bytes[2]=(65280&i)>>>8,this.bytes[3]=(255&i)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=ii.frameTime(this.bytes),this}},ii.AUDIO_TAG=8,ii.VIDEO_TAG=9,ii.METADATA_TAG=18,ii.isAudioFrame=function(t){return ii.AUDIO_TAG===t[0]},ii.isVideoFrame=function(t){return ii.VIDEO_TAG===t[0]},ii.isMetaData=function(t){return ii.METADATA_TAG===t[0]},ii.isKeyFrame=function(t){return ii.isVideoFrame(t)?23===t[11]:!!ii.isAudioFrame(t)||!!ii.isMetaData(t)},ii.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,e|=t[6]<<0,e|=t[7]<<24};var gi=ii,mi=function t(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,t.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):("video"===t.track.type&&(this.videoTrack=t.track,this.videoTags=t.tags,this.pendingTracks++),void("audio"===t.track.type&&(this.audioTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}};mi.prototype=new c,mi.prototype.flush=function(t){var e,i,n,r,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,n=0;n<this.pendingCaptions.length;n++)(i=this.pendingCaptions[n]).startTime=i.startPts-r,i.startTime/=9e4,i.endTime=i.endPts-r,i.endTime/=9e4,a.captionStreams[i.stream]=!0,a.captions.push(i);for(n=0;n<this.pendingMetadata.length;n++)(e=this.pendingMetadata[n]).cueTime=e.pts-r,e.cueTime/=9e4,a.metadata.push(e);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}};var fi,yi,vi,bi,Ti,Ai,wi=mi,Si=function(){var t=this;this.list=[],this.push=function(t){this.list.push({bytes:t.bytes,dts:t.dts,pts:t.pts,keyFrame:t.keyFrame,metaDataTag:t.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return t.list.length}})},_i=lt.H264Stream;bi=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts?t.timelineStartInfo.pts=e.pts:t.timelineStartInfo.pts=Math.min(t.timelineStartInfo.pts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts?t.timelineStartInfo.dts=e.dts:t.timelineStartInfo.dts=Math.min(t.timelineStartInfo.dts,e.dts))},Ti=function(t,e){var i=new gi(gi.METADATA_TAG);return i.dts=e,i.pts=e,i.writeMetaDataDouble("videocodecid",7),i.writeMetaDataDouble("width",t.width),i.writeMetaDataDouble("height",t.height),i},Ai=function(t,e){var i,n=new gi(gi.VIDEO_TAG,!0);for(n.dts=e,n.pts=e,n.writeByte(1),n.writeByte(t.profileIdc),n.writeByte(t.profileCompatibility),n.writeByte(t.levelIdc),n.writeByte(255),n.writeByte(225),n.writeShort(t.sps[0].length),n.writeBytes(t.sps[0]),n.writeByte(t.pps.length),i=0;i<t.pps.length;++i)n.writeShort(t.pps[i].length),n.writeBytes(t.pps[i]);return n},(vi=function(t){var e,i=[],n=[];vi.prototype.init.call(this),this.push=function(e){bi(t,e),t&&(t.audioobjecttype=e.audioobjecttype,t.channelcount=e.channelcount,t.samplerate=e.samplerate,t.samplingfrequencyindex=e.samplingfrequencyindex,t.samplesize=e.samplesize,t.extraData=t.audioobjecttype<<11|t.samplingfrequencyindex<<7|t.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),i.push(e)},this.flush=function(){var r,a,s,o=new Si;if(0!==i.length){for(s=-1/0;i.length;)r=i.shift(),n.length&&r.pts>=n[0]&&(s=n.shift(),this.writeMetaDataTags(o,s)),(t.extraData!==e||r.pts-s>=1e3)&&(this.writeMetaDataTags(o,r.pts),e=t.extraData,s=r.pts),(a=new gi(gi.AUDIO_TAG)).pts=r.pts,a.dts=r.dts,a.writeBytes(r.data),o.push(a.finalize());n.length=0,e=null,this.trigger("data",{track:t,tags:o.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,i){var n;(n=new gi(gi.METADATA_TAG)).pts=i,n.dts=i,n.writeMetaDataDouble("audiocodecid",10),n.writeMetaDataBoolean("stereo",2===t.channelcount),n.writeMetaDataDouble("audiosamplerate",t.samplerate),n.writeMetaDataDouble("audiosamplesize",16),e.push(n.finalize()),(n=new gi(gi.AUDIO_TAG,!0)).pts=i,n.dts=i,n.view.setUint16(n.position,t.extraData),n.position+=2,n.length=Math.max(n.length,n.position),e.push(n.finalize())},this.onVideoKeyFrame=function(t){n.push(t)}}).prototype=new c,(yi=function(t){var e,i,n=[];yi.prototype.init.call(this),this.finishFrame=function(n,r){if(r){if(e&&t&&t.newMetadata&&(r.keyFrame||0===n.length)){var a=Ti(e,r.dts).finalize(),s=Ai(t,r.dts).finalize();a.metaDataTag=s.metaDataTag=!0,n.push(a),n.push(s),t.newMetadata=!1,this.trigger("keyframe",r.dts)}r.endNalUnit(),n.push(r.finalize()),i=null}},this.push=function(e){bi(t,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),n.push(e)},this.flush=function(){for(var r,a=new Si;n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0!==n.length){for(;n.length;)"seq_parameter_set_rbsp"===(r=n.shift()).nalUnitType?(t.newMetadata=!0,e=r.config,t.width=e.width,t.height=e.height,t.sps=[r.data],t.profileIdc=e.profileIdc,t.levelIdc=e.levelIdc,t.profileCompatibility=e.profileCompatibility,i.endNalUnit()):"pic_parameter_set_rbsp"===r.nalUnitType?(t.newMetadata=!0,t.pps=[r.data],i.endNalUnit()):"access_unit_delimiter_rbsp"===r.nalUnitType?(i&&this.finishFrame(a,i),(i=new gi(gi.VIDEO_TAG)).pts=r.pts,i.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(i.keyFrame=!0),i.endNalUnit()),i.startNalUnit(),i.writeBytes(r.data);i&&this.finishFrame(a,i),this.trigger("data",{track:t,tags:a.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new c,fi=function(t){var e,i,n,r,a,s,o,l,d,u,c,h,p=this;fi.prototype.init.call(this),t=t||{},this.metadataStream=new xe.MetadataStream,t.metadataStream=this.metadataStream,e=new xe.TransportPacketStream,i=new xe.TransportParseStream,n=new xe.ElementaryStream,r=new xe.TimestampRolloverStream("video"),a=new xe.TimestampRolloverStream("audio"),s=new xe.TimestampRolloverStream("timed-metadata"),o=new T,l=new _i,h=new wi(t),e.pipe(i).pipe(n),n.pipe(r).pipe(l),n.pipe(a).pipe(o),n.pipe(s).pipe(this.metadataStream).pipe(h),c=new xe.CaptionStream(t),l.pipe(c).pipe(h),n.on("data",(function(t){var e,i,n;if("metadata"===t.type){for(e=t.tracks.length;e--;)"video"===t.tracks[e].type?i=t.tracks[e]:"audio"===t.tracks[e].type&&(n=t.tracks[e]);i&&!d&&(h.numberOfTracks++,d=new yi(i),l.pipe(d).pipe(h)),n&&!u&&(h.numberOfTracks++,u=new vi(n),o.pipe(u).pipe(h),d&&d.on("keyframe",u.onVideoKeyFrame))}})),this.push=function(t){e.push(t)},this.flush=function(){e.flush()},this.resetCaptions=function(){c.reset()},h.on("data",(function(t){p.trigger("data",t)})),h.on("done",(function(){p.trigger("done")}))},fi.prototype=new c;var Ei=function(t,e,i){var n,r,a,s=new Uint8Array(9),o=new DataView(s.buffer);return t=t||0,e=void 0===e||e,i=void 0===i||i,o.setUint8(0,70),o.setUint8(1,76),o.setUint8(2,86),o.setUint8(3,1),o.setUint8(4,(e?4:0)|(i?1:0)),o.setUint32(5,s.byteLength),t<=0?((r=new Uint8Array(s.byteLength+4)).set(s),r.set([0,0,0,0],s.byteLength),r):((n=new gi(gi.METADATA_TAG)).pts=n.dts=0,n.writeMetaDataDouble("duration",t),a=n.finalize().length,(r=new Uint8Array(s.byteLength+a)).set(s),r.set(o.byteLength,a),r)},Li={tag:gi,Transmuxer:fi,getFlvHeader:Ei},Ci=xe,Ii=g.ONE_SECOND_IN_TS,ki=function t(e,i){var n=[],r=0,a=0,s=0,o=1/0,l=null,d=null;i=i||{},t.prototype.init.call(this),this.push=function(t){Qt.collectDtsInfo(e,t),e&&Qe.forEach((function(i){e[i]=t[i]})),n.push(t)},this.setEarliestDts=function(t){a=t},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){s=t},this.processFrames_=function(){var t,u,c,h,p;0!==n.length&&0!==(t=Wt.trimAdtsFramesByEarliestDts(n,e,a)).length&&(e.baseMediaDecodeTime=Qt.calculateTrackBaseMediaDecodeTime(e,i.keepOriginalTimestamps),Wt.prefixWithSilence(e,t,s,o),e.samples=Wt.generateSampleTable(t),c=bt.mdat(Wt.concatenateFrameData(t)),n=[],u=bt.moof(r,[e]),r++,e.initSegment=bt.initSegment([e]),(h=new Uint8Array(u.byteLength+c.byteLength)).set(u),h.set(c,u.byteLength),Qt.clearDtsInfo(e),null===l&&(d=l=t[0].pts),d+=t.length*(1024*Ii/e.samplerate),p={start:l},this.trigger("timingInfo",p),this.trigger("data",{track:e,boxes:h}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:l,end:d}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){Qt.clearDtsInfo(e),l=null,d=null},this.reset=function(){this.resetTiming_(),n=[],this.trigger("reset")}};ki.prototype=new c;var Mi=ki,Ni=function t(e,i){var n,r,a,s=0,o=[],l=[],d=null,u=null,c=!0;i=i||{},t.prototype.init.call(this),this.push=function(t){Qt.collectDtsInfo(e,t),void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],Ze.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),o.push(t)},this.processNals_=function(t){var n;for(o=l.concat(o);o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0!==o.length){var r=Vt.groupNalsIntoFrames(o);if(r.length)if(l=r[r.length-1],t&&(r.pop(),r.duration-=l.duration,r.nalCount-=l.length,r.byteLength-=l.byteLength),r.length){if(this.trigger("timelineStartInfo",e.timelineStartInfo),c){if(!(a=Vt.groupFramesIntoGops(r))[0][0].keyFrame){if(!(a=Vt.extendFirstKeyFrame(a))[0][0].keyFrame)return o=[].concat.apply([],r).concat(l),void(l=[]);(r=[].concat.apply([],a)).duration=a.duration}c=!1}for(null===d&&(d=r[0].pts,u=d),u+=r.duration,this.trigger("timingInfo",{start:d,end:u}),n=0;n<r.length;n++){var h=r[n];e.samples=Vt.generateSampleTableForFrame(h);var p=bt.mdat(Vt.concatenateNalDataForFrame(h));Qt.clearDtsInfo(e),Qt.collectDtsInfo(e,h),e.baseMediaDecodeTime=Qt.calculateTrackBaseMediaDecodeTime(e,i.keepOriginalTimestamps);var g=bt.moof(s,[e]);s++,e.initSegment=bt.initSegment([e]);var m=new Uint8Array(g.byteLength+p.byteLength);m.set(g),m.set(p,g.byteLength),this.trigger("data",{track:e,boxes:m,sequence:s,videoFrameDts:h.dts,videoFramePts:h.pts})}o=[]}else o=[]}},this.resetTimingAndConfig_=function(){n=void 0,r=void 0,d=null,u=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),l=[],o=[],c=!0,this.trigger("reset")}};Ni.prototype=new c;var Di=Ni,Ri=Be.isLikelyAacData,xi=function(t){return t.prototype=new c,t.prototype.init.call(t),t},Ui=function(t){var e={type:"ts",tracks:{audio:null,video:null},packet:new xe.TransportPacketStream,parse:new xe.TransportParseStream,elementary:new xe.ElementaryStream,timestampRollover:new xe.TimestampRolloverStream,adts:new dt.Adts,h264:new dt.h264.H264Stream,captionStream:new xe.CaptionStream(t),metadataStream:new xe.MetadataStream};return e.headOfPipeline=e.packet,e.packet.pipe(e.parse).pipe(e.elementary).pipe(e.timestampRollover),e.timestampRollover.pipe(e.h264),e.h264.pipe(e.captionStream),e.timestampRollover.pipe(e.metadataStream),e.timestampRollover.pipe(e.adts),e.elementary.on("data",(function(i){if("metadata"===i.type){for(var n=0;n<i.tracks.length;n++)e.tracks[i.tracks[n].type]||(e.tracks[i.tracks[n].type]=i.tracks[n],e.tracks[i.tracks[n].type].timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime);e.tracks.video&&!e.videoSegmentStream&&(e.videoSegmentStream=new Di(e.tracks.video,t),e.videoSegmentStream.on("timelineStartInfo",(function(i){e.tracks.audio&&!t.keepOriginalTimestamps&&e.audioSegmentStream.setEarliestDts(i.dts-t.baseMediaDecodeTime)})),e.videoSegmentStream.on("timingInfo",e.trigger.bind(e,"videoTimingInfo")),e.videoSegmentStream.on("data",(function(t){e.trigger("data",{type:"video",data:t})})),e.videoSegmentStream.on("done",e.trigger.bind(e,"done")),e.videoSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.videoSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.h264.pipe(e.videoSegmentStream)),e.tracks.audio&&!e.audioSegmentStream&&(e.audioSegmentStream=new Mi(e.tracks.audio,t),e.audioSegmentStream.on("data",(function(t){e.trigger("data",{type:"audio",data:t})})),e.audioSegmentStream.on("done",e.trigger.bind(e,"done")),e.audioSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.audioSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),e.adts.pipe(e.audioSegmentStream)),e.trigger("trackinfo",{hasAudio:!!e.tracks.audio,hasVideo:!!e.tracks.video})}})),e.captionStream.on("data",(function(i){var n;n=e.tracks.video&&e.tracks.video.timelineStartInfo.pts||0,i.startTime=g.metadataTsToSeconds(i.startPts,n,t.keepOriginalTimestamps),i.endTime=g.metadataTsToSeconds(i.endPts,n,t.keepOriginalTimestamps),e.trigger("caption",i)})),(e=xi(e)).metadataStream.on("data",e.trigger.bind(e,"id3Frame")),e},Pi=function(t){var e={type:"aac",tracks:{audio:null},metadataStream:new xe.MetadataStream,aacStream:new Ye,audioRollover:new xe.TimestampRolloverStream("audio"),timedMetadataRollover:new xe.TimestampRolloverStream("timed-metadata"),adtsStream:new T(!0)};return e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioRollover).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataRollover).pipe(e.metadataStream),e.metadataStream.on("timestamp",(function(t){e.aacStream.setTimestamp(t.timeStamp)})),e.aacStream.on("data",(function(i){"timed-metadata"!==i.type&&"audio"!==i.type||e.audioSegmentStream||(e.tracks.audio=e.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:"adts",type:"audio"},e.audioSegmentStream=new Mi(e.tracks.audio,t),e.audioSegmentStream.on("data",(function(t){e.trigger("data",{type:"audio",data:t})})),e.audioSegmentStream.on("partialdone",e.trigger.bind(e,"partialdone")),e.audioSegmentStream.on("done",e.trigger.bind(e,"done")),e.audioSegmentStream.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),e.audioSegmentStream.on("timingInfo",e.trigger.bind(e,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream),e.trigger("trackinfo",{hasAudio:!!e.tracks.audio,hasVideo:!!e.tracks.video}))})),(e=xi(e)).metadataStream.on("data",e.trigger.bind(e,"id3Frame")),e},Oi=function(t,e){t.on("data",e.trigger.bind(e,"data")),t.on("done",e.trigger.bind(e,"done")),t.on("partialdone",e.trigger.bind(e,"partialdone")),t.on("endedtimeline",e.trigger.bind(e,"endedtimeline")),t.on("audioTimingInfo",e.trigger.bind(e,"audioTimingInfo")),t.on("videoTimingInfo",e.trigger.bind(e,"videoTimingInfo")),t.on("trackinfo",e.trigger.bind(e,"trackinfo")),t.on("id3Frame",(function(i){i.dispatchType=t.metadataStream.dispatchType,i.cueTime=g.videoTsToSeconds(i.pts),e.trigger("id3Frame",i)})),t.on("caption",(function(t){e.trigger("caption",t)}))},Vi=function t(e){var i=null,n=!0;e=e||{},t.prototype.init.call(this),e.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.push=function(t){if(n){var r=Ri(t);!r||i&&"aac"===i.type?r||i&&"ts"===i.type||(i=Ui(e),Oi(i,this)):(i=Pi(e),Oi(i,this)),n=!1}i.headOfPipeline.push(t)},this.flush=function(){i&&(n=!0,i.headOfPipeline.flush())},this.partialFlush=function(){i&&i.headOfPipeline.partialFlush()},this.endTimeline=function(){i&&i.headOfPipeline.endTimeline()},this.reset=function(){i&&i.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(t){e.keepOriginalTimestamps||(e.baseMediaDecodeTime=t),i&&(i.tracks.audio&&(i.tracks.audio.timelineStartInfo.dts=void 0,i.tracks.audio.timelineStartInfo.pts=void 0,Qt.clearDtsInfo(i.tracks.audio),i.audioRollover&&i.audioRollover.discontinuity()),i.tracks.video&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),i.tracks.video.timelineStartInfo.dts=void 0,i.tracks.video.timelineStartInfo.pts=void 0,Qt.clearDtsInfo(i.tracks.video)),i.timestampRollover&&i.timestampRollover.discontinuity())},this.setRemux=function(t){e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.setAudioAppendStart=function(t){i&&i.tracks.audio&&i.audioSegmentStream&&i.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){}};Vi.prototype=new c;var ji,zi,Bi={Transmuxer:Vi},Fi=ct.getUint64,Gi=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;0===i.version?(i.earliestPresentationTime=e.getUint32(n),i.firstOffset=e.getUint32(n+4),n+=8):(i.earliestPresentationTime=Fi(t.subarray(n)),i.firstOffset=Fi(t.subarray(n+8)),n+=16),n+=2;var r=e.getUint16(n);for(n+=2;r>0;n+=12,r--)i.references.push({referenceType:(128&t[n])>>>7,referencedSize:2147483647&e.getUint32(n),subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(128&t[n+8]),sapType:(112&t[n+8])>>>4,sapDeltaTime:268435455&e.getUint32(n+8)});return i},Hi=ct.getUint64,Wi=function(t){return new Date(1e3*t-20828448e5)},Yi=function(t){var e,i,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=[];for(e=0;e+4<t.length;e+=i)if(i=n.getUint32(e),e+=4,i<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[e]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+t[e]&31)}return r},Qi={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:ji(t.subarray(78,t.byteLength))}},avcC:function(t){var e,i,n,r,a=new DataView(t.buffer,t.byteOffset,t.byteLength),s={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},o=31&t[5];for(n=6,r=0;r<o;r++)i=a.getUint16(n),n+=2,s.sps.push(new Uint8Array(t.subarray(n,n+i))),n+=i;for(e=t[n],n++,r=0;r<e;r++)i=a.getUint16(n),n+=2,s.pps.push(new Uint8Array(t.subarray(n,n+i))),n+=i;return s},btrt:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},edts:function(t){return{boxes:ji(t)}},elst:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),edits:[]},r=i.getUint32(4);for(e=8;r;r--)0===n.version?(n.edits.push({segmentDuration:i.getUint32(e),mediaTime:i.getInt32(e+4),mediaRate:i.getUint16(e+8)+i.getUint16(e+10)/65536}),e+=12):(n.edits.push({segmentDuration:Hi(t.subarray(e)),mediaTime:Hi(t.subarray(e+8)),mediaRate:i.getUint16(e+16)+i.getUint16(e+18)/65536}),e+=20);return n},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={majorBrand:At(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},n=8;n<t.byteLength;)i.compatibleBrands.push(At(t.subarray(n,n+4))),n+=4;return i},dinf:function(t){return{boxes:ji(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:ji(t.subarray(8))}},hdlr:function(t){var e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:At(t.subarray(8,12)),name:""},i=8;for(i=24;i<t.byteLength;i++){if(0===t[i]){i++;break}e.name+=String.fromCharCode(t[i])}return e.name=decodeURIComponent(escape(e.name)),e},mdat:function(t){return{byteLength:t.byteLength,nals:Yi(t)}},mdhd:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===r.version?(n+=4,r.creationTime=Wi(i.getUint32(n)),n+=8,r.modificationTime=Wi(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=8,r.duration=i.getUint32(n)):(r.creationTime=Wi(i.getUint32(n)),n+=4,r.modificationTime=Wi(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=4,r.duration=i.getUint32(n)),n+=4,e=i.getUint16(n),r.language+=String.fromCharCode(96+(e>>10)),r.language+=String.fromCharCode(96+((992&e)>>5)),r.language+=String.fromCharCode(96+(31&e)),r},mdia:function(t){return{boxes:ji(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:ji(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return t.byteLength>28&&(i.streamDescriptor=ji(t.subarray(28))[0]),i},moof:function(t){return{boxes:ji(t)}},moov:function(t){return{boxes:ji(t)}},mvex:function(t){return{boxes:ji(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,n={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=Wi(e.getUint32(i)),i+=8,n.modificationTime=Wi(e.getUint32(i)),i+=4,n.timescale=e.getUint32(i),i+=8,n.duration=e.getUint32(i)):(n.creationTime=Wi(e.getUint32(i)),i+=4,n.modificationTime=Wi(e.getUint32(i)),i+=4,n.timescale=e.getUint32(i),i+=4,n.duration=e.getUint32(i)),i+=4,n.rate=e.getUint16(i)+e.getUint16(i+2)/16,i+=4,n.volume=e.getUint8(i)+e.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(t.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=e.getUint32(i),n},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){var e,i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(e=4;e<t.byteLength;e++)i.samples.push({dependsOn:(48&t[e])>>4,isDependedOn:(12&t[e])>>2,hasRedundancy:3&t[e]});return i},sidx:Gi,smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:ji(t)}},ctts:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),compositionOffsets:[]},r=i.getUint32(4);for(e=8;r;e+=8,r--)n.compositionOffsets.push({sampleCount:i.getUint32(e),sampleOffset:i[0===n.version?"getUint32":"getInt32"](e+4)});return n},stss:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),syncSamples:[]},r=i.getUint32(4);for(e=8;r;e+=4,r--)n.syncSamples.push(i.getUint32(e));return n},stco:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},r=i.getUint32(4);for(e=8;r;e+=4,r--)n.chunkOffsets.push(i.getUint32(e));return n},stsc:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n=i.getUint32(4),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(e=8;n;e+=12,n--)r.sampleToChunks.push({firstChunk:i.getUint32(e),samplesPerChunk:i.getUint32(e+4),sampleDescriptionIndex:i.getUint32(e+8)});return r},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:ji(t.subarray(8))}},stsz:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(e=12;e<t.byteLength;e+=4)n.entries.push(i.getUint32(e));return n},stts:function(t){var e,i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},r=i.getUint32(4);for(e=8;r;e+=8,r--)n.timeToSamples.push({sampleCount:i.getUint32(e),sampleDelta:i.getUint32(e+4)});return n},styp:function(t){return Qi.ftyp(t)},tfdt:Mt,tfhd:Et,tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i=4,n={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=Wi(e.getUint32(i)),i+=8,n.modificationTime=Wi(e.getUint32(i)),i+=4,n.trackId=e.getUint32(i),i+=4,i+=8,n.duration=e.getUint32(i)):(n.creationTime=Wi(e.getUint32(i)),i+=4,n.modificationTime=Wi(e.getUint32(i)),i+=4,n.trackId=e.getUint32(i),i+=4,i+=4,n.duration=e.getUint32(i)),i+=4,i+=8,n.layer=e.getUint16(i),i+=2,n.alternateGroup=e.getUint16(i),i+=2,n.volume=e.getUint8(i)+e.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(t.subarray(i,i+36)),i+=36,n.width=e.getUint16(i)+e.getUint16(i+2)/65536,i+=4,n.height=e.getUint16(i)+e.getUint16(i+2)/65536,n},traf:function(t){return{boxes:ji(t)}},trak:function(t){return{boxes:ji(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:Ct,"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}};ji=function(t){for(var e,i,n,r,a,s=0,o=[],l=new ArrayBuffer(t.length),d=new Uint8Array(l),u=0;u<t.length;++u)d[u]=t[u];for(e=new DataView(l);s<t.byteLength;)i=e.getUint32(s),n=At(t.subarray(s+4,s+8)),r=i>1?s+i:t.byteLength,(a=(Qi[n]||function(t){return{data:t}})(t.subarray(s+8,r))).size=i,a.type=n,o.push(a),s=r;return o},zi=function(t,e){var i;return e=e||0,i=new Array(2*e+1).join(" "),t.map((function(t,n){return i+t.type+"\n"+Object.keys(t).filter((function(t){return"type"!==t&&"boxes"!==t})).map((function(e){var n=i+"  "+e+": ",r=t[e];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map((function(t){return" "+("00"+t.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?n+"<"+a.join("").slice(1)+">":n+"<\n"+a.map((function(t){return i+"  "+t})).join("\n")+"\n"+i+"  >":n+"<>"}return n+JSON.stringify(r,null,2).split("\n").map((function(t,e){return 0===e?t:i+"  "+t})).join("\n")})).join("\n")+(t.boxes?"\n"+zi(t.boxes,e+1):"")})).join("\n")};var Zi={inspect:ji,textify:zi,parseType:At,findBox:_t,parseTraf:Qi.traf,parseTfdt:Qi.tfdt,parseHdlr:Qi.hdlr,parseTfhd:Qi.tfhd,parseTrun:Qi.trun,parseSidx:Qi.sidx},Xi={8:"audio",9:"video",18:"metadata"},qi=function(t){return"0x"+("00"+t.toString(16)).slice(-2).toUpperCase()},Ji=function(t){for(var e,i=[];t.byteLength>0;)e=0,i.push(qi(t[e++])),t=t.subarray(e);return i.join(" ")},Ki=function(t,e){var i=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],n=t[1]&parseInt("01111111",2)<<16|t[2]<<8|t[3];return(e=e||{}).avcPacketType=i[t[0]],e.CompositionTime=t[1]&parseInt("10000000",2)?-n:n,1===t[0]?e.nalUnitTypeRaw=Ji(t.subarray(4,100)):e.data=Ji(t.subarray(4)),e},$i=function(t,e){var i=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],n=t[0]&parseInt("00001111",2);return(e=e||{}).frameType=i[(t[0]&parseInt("11110000",2))>>>4],e.codecID=n,7===n?Ki(t.subarray(1),e):e},tn=function(t,e){var i=["AAC Sequence Header","AAC Raw"];return(e=e||{}).aacPacketType=i[t[0]],e.data=Ji(t.subarray(1)),e},en=function(t,e){var i=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],n=["5.5-kHz","11-kHz","22-kHz","44-kHz"],r=(t[0]&parseInt("11110000",2))>>>4;return(e=e||{}).soundFormat=i[r],e.soundRate=n[(t[0]&parseInt("00001100",2))>>>2],e.soundSize=(t[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",e.soundType=t[0]&parseInt("00000001",2)?"Stereo":"Mono",10===r?tn(t.subarray(1),e):e},nn=function(t){return{tagType:Xi[t[0]],dataSize:t[1]<<16|t[2]<<8|t[3],timestamp:t[7]<<24|t[4]<<16|t[5]<<8|t[6],streamID:t[8]<<16|t[9]<<8|t[10]}},rn=function(t){var e=nn(t);switch(t[0]){case 8:en(t.subarray(11),e);break;case 9:$i(t.subarray(11),e)}return e},an=function(t){var e,i,n=9,r=[];for(n+=4;n<t.byteLength;)e=t[n+1]<<16,e|=t[n+2]<<8,e|=t[n+3],e+=11,i=t.subarray(n,n+e),r.push(rn(i)),n+=e+4;return r},sn={inspectTag:rn,inspect:an,textify:function(t){return JSON.stringify(t,null,2)}},on=function(t){var e=31&t[1];return e<<=8,e|=t[2]},ln=function(t){return!!(64&t[1])},dn=function(t){var e=0;return(48&t[3])>>>4>1&&(e+=t[4]+1),e},un=function(t,e){switch(e[on(t)]){case ce.H264_STREAM_TYPE:return"video";case ce.ADTS_STREAM_TYPE:return"audio";case ce.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},cn=function(t){if(!ln(t))return null;var e=4+dn(t);if(e>=t.byteLength)return null;var i,n=null;return 192&(i=t[e+7])&&((n={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,n.pts*=4,n.pts+=(6&t[e+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,n.dts*=4,n.dts+=(6&t[e+18])>>>1)),n},hn=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},pn={parseType:function(t,e){var i=on(t);return 0===i?"pat":i===e?"pmt":e?"pes":null},parsePat:function(t){var e=ln(t),i=4+dn(t);return e&&(i+=t[i]+1),(31&t[i+10])<<8|t[i+11]},parsePmt:function(t){var e={},i=ln(t),n=4+dn(t);if(i&&(n+=t[n]+1),1&t[n+5]){var r;r=3+((15&t[n+1])<<8|t[n+2])-4;for(var a=12+((15&t[n+10])<<8|t[n+11]);a<r;){var s=n+a;e[(31&t[s+1])<<8|t[s+2]]=t[s],a+=5+((15&t[s+3])<<8|t[s+4])}return e}},parsePayloadUnitStartIndicator:ln,parsePesType:un,parsePesTime:cn,videoPacketContainsKeyFrame:function(t){for(var e=4+dn(t),i=t.subarray(e),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===hn(31&i[r+3])&&(a=!0);do{n++}while(1!==i[n]&&n<i.length);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===hn(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===hn(31&i[r+3])&&(a=!0),a}},gn=ve.handleRollover,mn={};mn.ts=pn,mn.aac=Be;var fn=g.ONE_SECOND_IN_TS,yn=188,vn=71,bn=function(t,e){for(var i,n=0,r=yn;r<t.byteLength;)if(t[n]!==vn||t[r]!==vn)n++,r++;else{switch(i=t.subarray(n,r),mn.ts.parseType(i,e.pid)){case"pat":e.pid=mn.ts.parsePat(i);break;case"pmt":var a=mn.ts.parsePmt(i);e.table=e.table||{},Object.keys(a).forEach((function(t){e.table[t]=a[t]}))}n+=yn,r+=yn}},Tn=function(t,e,i){for(var n,r,a,s,o=0,l=yn,d=!1;l<=t.byteLength;)if(t[o]!==vn||t[l]!==vn&&l!==t.byteLength)o++,l++;else{if(n=t.subarray(o,l),"pes"===mn.ts.parseType(n,e.pid)&&(r=mn.ts.parsePesType(n,e.table),a=mn.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=mn.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),d=!0)),d)break;o+=yn,l+=yn}for(o=(l=t.byteLength)-yn,d=!1;o>=0;)if(t[o]!==vn||t[l]!==vn&&l!==t.byteLength)o--,l--;else{if(n=t.subarray(o,l),"pes"===mn.ts.parseType(n,e.pid)&&(r=mn.ts.parsePesType(n,e.table),a=mn.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(s=mn.ts.parsePesTime(n))&&(s.type="audio",i.audio.push(s),d=!0)),d)break;o-=yn,l-=yn}},An=function(t,e,i){for(var n,r,a,s,o,l,d,u=0,c=yn,h=!1,p={data:[],size:0};c<t.byteLength;)if(t[u]!==vn||t[c]!==vn)u++,c++;else{if(n=t.subarray(u,c),"pes"===mn.ts.parseType(n,e.pid)&&(r=mn.ts.parsePesType(n,e.table),a=mn.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!h&&(s=mn.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0),!i.firstKeyFrame))){if(a&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)d=p.data.shift(),o.set(d,l),l+=d.byteLength;if(mn.ts.videoPacketContainsKeyFrame(o)){var g=mn.ts.parsePesTime(o);g&&(i.firstKeyFrame=g,i.firstKeyFrame.type="video")}p.size=0}p.data.push(n),p.size+=n.byteLength}if(h&&i.firstKeyFrame)break;u+=yn,c+=yn}for(u=(c=t.byteLength)-yn,h=!1;u>=0;)if(t[u]!==vn||t[c]!==vn)u--,c--;else{if(n=t.subarray(u,c),"pes"===mn.ts.parseType(n,e.pid)&&(r=mn.ts.parsePesType(n,e.table),a=mn.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(s=mn.ts.parsePesTime(n))&&(s.type="video",i.video.push(s),h=!0)),h)break;u-=yn,c-=yn}},wn=function(t,e){if(t.audio&&t.audio.length){var i=e;(void 0===i||isNaN(i))&&(i=t.audio[0].dts),t.audio.forEach((function(t){t.dts=gn(t.dts,i),t.pts=gn(t.pts,i),t.dtsTime=t.dts/fn,t.ptsTime=t.pts/fn}))}if(t.video&&t.video.length){var n=e;if((void 0===n||isNaN(n))&&(n=t.video[0].dts),t.video.forEach((function(t){t.dts=gn(t.dts,n),t.pts=gn(t.pts,n),t.dtsTime=t.dts/fn,t.ptsTime=t.pts/fn})),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=gn(r.dts,n),r.pts=gn(r.pts,n),r.dtsTime=r.dts/fn,r.ptsTime=r.pts/fn}}},Sn=function(t){for(var e,i=!1,n=0,r=null,a=null,s=0,o=0;t.length-o>=3;){switch(mn.aac.parseType(t,o)){case"timed-metadata":if(t.length-o<10){i=!0;break}if((s=mn.aac.parseId3TagSize(t,o))>t.length){i=!0;break}null===a&&(e=t.subarray(o,o+s),a=mn.aac.parseAacTimestamp(e)),o+=s;break;case"audio":if(t.length-o<7){i=!0;break}if((s=mn.aac.parseAdtsSize(t,o))>t.length){i=!0;break}null===r&&(e=t.subarray(o,o+s),r=mn.aac.parseSampleRate(e)),n++,o+=s;break;default:o++}if(i)return null}if(null===r||null===a)return null;var l=fn/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*l,pts:a+1024*n*l}]}},_n=function(t){var e={pid:null,table:null},i={};for(var n in bn(t,e),e.table)if(e.table.hasOwnProperty(n))switch(e.table[n]){case ce.H264_STREAM_TYPE:i.video=[],An(t,e,i),0===i.video.length&&delete i.video;break;case ce.ADTS_STREAM_TYPE:i.audio=[],Tn(t,e,i),0===i.audio.length&&delete i.audio}return i},En={inspect:function(t,e){var i;return(i=mn.aac.isLikelyAacData(t)?Sn(t):_n(t))&&(i.audio||i.video)?(wn(i,e),i):null},parseAudioPes_:Tn},Ln={codecs:dt,mp4:pi,flv:Li,mp2t:Ci,partial:Bi};return Ln.mp4.tools=Zi,Ln.flv.tools=sn,Ln.mp2t.tools=En,Ln}(i(11))},379:t=>{"use strict";var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var a={},s=[],o=0;o<t.length;o++){var l=t[o],d=n.base?l[0]+n.base:l[0],u=a[d]||0,c="".concat(d," ").concat(u);a[d]=u+1;var h=i(c),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var g=r(p,n);n.byIndex=o,e.splice(o,0,{identifier:c,updater:g,references:1})}s.push(c)}return s}function r(t,e){var i=e.domAPI(e);i.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,r){var a=n(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<a.length;s++){var o=i(a[s]);e[o].references--}for(var l=n(t,r),d=0;d<a.length;d++){var u=i(a[d]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}a=l}}},569:t=>{"use strict";var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,r&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var a=i.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={id:n,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";i.r(n),i.d(n,{tv:()=>ie});const t=window.navigator&&window.navigator.userAgent||"",e=/AppleWebKit\/([\d.]+)/i.exec(t),r=(e&&parseFloat(e.pop()),/iPod/i.test(t)),a=(function(){const e=t.match(/OS (\d+)_/i);e&&e[1]&&e[1]}(),/Android/i.test(t)),s=(function(){const e=t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const i=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);i&&n&&parseFloat(e[1]+"."+e[2])}(),/Firefox/i.test(t),/Edg/i.test(t)),o=!s&&(/Chrome/i.test(t)||/CriOS/i.test(t)),l=(function(){const e=t.match(/(Chrome|CriOS)\/(\d+)/);e&&e[2]&&parseFloat(e[2])}(),function(){const e=/MSIE\s(\d+)\.\d/.exec(t);let i=e&&parseFloat(e[1]);!i&&/Trident\/7.0/i.test(t)&&/rv:11.0/.test(t)&&(i=11)}(),/Safari/i.test(t)&&!o&&!a&&!s),d=(/Windows/i.test(t),Boolean("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),u=/iPad/i.test(t)||l&&d&&!/iPhone/i.test(t),c=/iPhone/i.test(t)&&!u||u||r,h=function(){let e=!1;var i;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i=t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(e=!0),e}(),p=t.search(/lighthouse/i)>=0;const g={webm:"video/webm",opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",treegpv:"video/3gpp",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function m(t){let e=11,i=8;return t<3600&&(e=14,i=5),new Date(1e3*t).toISOString().substr(e,i)}const f=(new Date).getTime();function y(){return(new Date).getTime()-f}function v(t){return Math.floor(t/1e3)}function b(t,e){return!!function(t,e){if(c)return e.webkitDisplayingFullscreen;if(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement)return!0;return!1}(t,e)}const T={"1:1":"100%","16:9":"56.25%","4:3":"75%","3:2":"66.66%","8:5":"62.5%","9:16":"177.77%"};function A(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<32;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function w(t,e){if(!t||!e)return"";if("function"==typeof window.getComputedStyle){let i;try{i=window.getComputedStyle(t)}catch(t){return""}return i?i.getPropertyValue(e)||i[e]:""}return""}function S(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};const e=t.offsetWidth,i=t.offsetHeight;let n=0,r=0;for(;t.offsetParent;)n+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:n,top:r,width:e,height:i}}function _(t,e){const i={x:0,y:0};if(c){let e=t;for(;e&&"html"!==e.nodeName.toLowerCase();){const t=w(e,"transform");if(/^matrix/.test(t)){const e=t.slice(7,-1).split(/,\s/).map(Number);i.x+=e[4],i.y+=e[5]}else if(/^matrix3d/.test(t)){const e=t.slice(9,-1).split(/,\s/).map(Number);i.x+=e[12],i.y+=e[13]}e=e.parentNode}}const n={},r=S(e.target),a=S(t),s=a.width,o=a.height;let l=e.offsetY-(a.top-r.top),d=e.offsetX-(a.left-r.left);if(e.changedTouches){const n=function(t){if(t&&t.getBoundingClientRect&&t.parentNode){const e=t.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach((t=>{void 0!==e[t]&&(i[t]=e[t])})),i.height||(i.height=parseFloat(w(t,"height"))),i.width||(i.width=parseFloat(w(t,"width"))),i}}(t);d=e.changedTouches[0].pageX-n.left,l=e.changedTouches[0].pageY+n.top,c&&(d-=i.x,l-=i.y)}return n.y=1-Math.max(0,Math.min(1,l/o)),n.x=Math.max(0,Math.min(1,d/s)),n}function E(){const t=window.location.href,e=document.referrer;if(window.parent!=window){const t=window,i=document;let n=null,r=null,a=null,s=null,o=null,l=null,d=null,u=null,c=null,h=null,p=null,g=null,m=null;const f=[],y=[],v=[];let b=null,T=null,A=null,w=0,S=w=-1;const _=function(t){try{return new URL(t).hostname}catch(e){const i=document.createElement("a");return i.href=t,i.hostname}},E=function(t){const e=(t=t.replace(".cdn.ampproject.org","")).lastIndexOf("-");return 0<=e?(t=t.substring(0,e)+"."+t.substring(e+1),_(t)):null};try{m=t.location.href}catch(t){}try{g=t.top.location.href}catch(t){}try{p=t.location.hostname}catch(t){}try{h=t.top.location.hostname}catch(t){}try{c=t.location.origin}catch(t){}try{u=t.top.location.origin}catch(t){}try{d=i.referrer,l=_(d)}catch(t){}try{o=[],s=[];for(let e=0;e<t.location.ancestorOrigins.length;e++){const i=t.location.ancestorOrigins[e];o.push(i);const r=_(i);s.push(r),i.endsWith(".cdn.ampproject.org")&&(n=E(i))}}catch(t){}null!==o&&o.length>0&&(a=o[o.length-1]),null!==s&&s.length>0&&(r=s[s.length-1]);try{let e=t;w=0;do{try{f.push(e)}catch(t){}try{y.push({url:e.location.href}),b=e.location.href}catch(t){}try{v.push({url:e.location.hostname}),A=e.location.hostname,S=w+1}catch(t){}e=e.parent,w++}while(e!==t.top&&e!==e.parent&&50>w)}catch(t){}return T=function(){if(null!==r&&""!==r)return{origin:a,hostname:r};if(null!==h&&""!==h)return{origin:u,hostname:h};if(!(1>=w)){if(!(2===w||2>=S)&&null!==A&&""!==A)return{origin:b,hostname:A};if(null!==l&&""!==l)return{origin:d,hostname:l}}return null!==p&&""!==p?{origin:m,hostname:p}:{origin:null,hostname:null}}(),null!=T.origin?T.origin:e}return t}const L="http://example.com";function C(t,e){if(/^[a-z]+:/i.test(e))return e;/^data:/.test(t)&&(t=window.location&&window.location.href||"");const i=/^\/\//.test(t),n=!window.location&&!/\/\//i.test(t);t=new window.URL(t,window.location||L);const r=new URL(e,t);return n?r.href.slice(L.length):i?r.href.slice(r.protocol.length):r.href}const I=(t,e,i)=>t&&i&&i.responseURL&&e!==i.responseURL?i.responseURL:e;function k(t){try{return new URL(t).hostname}catch(t){return null}}function M(t,e){const i=t.method||"GET",n=t.uri;let r=!1;const a=new XMLHttpRequest;return a.onabort=function(){r=!0},a.open(i,n),a.withCredentials=!!t.withCredentials,a.onload=function(){if(!r)return e(null,a)},a.onerror=function(t){return e(t)},a.send(),a}function N(t,e){for(const i of Object.keys(e))e[i]instanceof Object&&Object.assign(e[i],N((t&&Object.keys(t).length?t:{})[i],e[i]));return Object.assign(t||{},e),t}function D(){const t=document.createElement("div");t.classList.add("spinner"),this.render=()=>t}function R(){const t=document.createElement("div");t.classList.add("header"),this.render=()=>t,this.setTitle=(e,i)=>{if(i){const n=document.createElement("a");n.innerHTML=e,n.href=i,n.target="_blank",n.classList.add("title"),t.appendChild(n)}else{const i=document.createElement("span");i.classList.add("title"),i.innerHTML=e,t.appendChild(i)}},this.hide=()=>{t.style.display="none"},this.show=()=>{t.style.display="block"}}function x(){const t=document.createElement("div");t.classList.add("gradient");const e=document.createElement("div");e.classList.add("gradient-top"),t.appendChild(e);const i=document.createElement("div");i.classList.add("gradient-bottom"),t.appendChild(i),this.render=()=>t,this.hide=()=>{t.style.display="none"},this.show=()=>{t.style.display="block"}}function U(){const t=document.createElement("div");t.classList.add("timeline");const e=document.createElement("div");e.classList.add("timeline-buffer"),t.appendChild(e);const i=document.createElement("div");i.classList.add("timeline-progress");const n=document.createElement("div");n.innerHTML=m(0),n.classList.add("time-tooltip"),i.appendChild(n),t.appendChild(i),this.onmousedown=null,this.onmousemove=null,this.onmouseup=null;let r=0,a=0,s=!1;const l=e=>{const i=t.ownerDocument;t.classList.remove("sliding"),this.onmouseup&&"function"==typeof this.onmouseup&&this.onmouseup(),s=!1,i.removeEventListener("mousemove",d),i.removeEventListener("mouseup",l),i.removeEventListener("touchmove",d),i.removeEventListener("touchend",l)},d=e=>{if(s){const i=(e=>_(t,e).x)(e);a=i*r,this.onmousemove&&"function"==typeof this.onmousemove&&this.onmousemove(a)}},u=e=>{const i=t.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||o||e.cancelable&&e.preventDefault(),t.classList.add("sliding"),this.onmousedown&&"function"==typeof this.onmousedown&&this.onmousedown(),s=!0,i.addEventListener("mousemove",d),i.addEventListener("mouseup",l),i.addEventListener("touchmove",d),i.addEventListener("touchend",l),d(e)};t.addEventListener("mousedown",u),t.addEventListener("touchstart",u),t.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault()})),this.render=()=>t,this.setDuration=(t=0)=>{r=t},this.updateProgress=t=>{t<0?t=0:t>1&&(t=1),i.style.width=100*t+"%"},this.updateTimeTooltip=t=>{n.innerHTML=m(t)},this.updateBuffer=t=>{t<0?t=0:t>1&&(t=1),e.style.width=100*t+"%"},this.hide=()=>{t.style.display="none"},this.show=()=>{t.style.display="block"}}function P(){const t=document.createElement("button");t.classList.add("prev"),this.render=()=>t,this.hide=()=>{t.style.display="none"},this.show=()=>{t.style.display="block"}}function O(){let t=!1;const e=document.createElement("button");e.classList.add("play"),this.onclick=null,e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.onclick&&"function"==typeof this.onclick&&this.onclick(t)})),this.render=()=>e,this.setState=i=>{t=i,t?e.classList.add("pause"):e.classList.remove("pause")},this.hide=()=>{e.style.display="none"},this.show=()=>{e.style.display="block"}}function V(){const t=document.createElement("button");t.classList.add("next"),this.render=()=>t,this.hide=()=>{t.style.display="none"},this.show=()=>{t.style.display="block"}}function j(){let t=!1;const e=document.createElement("div");e.classList.add("volume"),this.onclick=null,e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.onclick&&"function"==typeof this.onclick&&this.onclick(t)})),this.render=()=>e,this.setState=i=>{t=i,t?e.classList.add("muted"):e.classList.remove("muted")},this.hide=()=>{e.style.display="none"},this.show=()=>{e.style.display="block"}}function z(){const t=document.createElement("div");t.classList.add("timer"),t.innerHTML=m(0),this.render=()=>t;let e=0,i=0;this.setDuration=(n=0)=>{e=n,t.innerHTML=m(i)+" / "+m(e)},this.updateTimeElapsed=(n=0)=>{i=n,t.innerHTML=m(i)+" / "+m(e)},this.hide=()=>{t.style.display="none"},this.show=()=>{t.style.display="show"}}function B(){const t=document.createElement("div");t.classList.add("big-play"),this.render=()=>t,this.hide=()=>{t.style.display="none"},this.show=()=>{t.style.display="block"}}function F(){let t=!1;const e=document.createElement("button");e.classList.add("fullscreen"),this.onclick=null,e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.onclick&&"function"==typeof this.onclick&&this.onclick(t)})),this.render=()=>e,this.setState=i=>{t=i,t?e.classList.add("off"):e.classList.remove("off")},this.hide=()=>{e.style.display="none"},this.show=()=>{e.style.display="block"}}var G=i(379),H=i.n(G),W=i(795),Y=i.n(W),Q=i(569),Z=i.n(Q),X=i(565),q=i.n(X),J=i(216),K=i.n(J),$=i(589),tt=i.n($),et=i(740),it={};it.styleTagTransform=tt(),it.setAttributes=q(),it.insert=Z().bind(null,"head"),it.domAPI=Y(),it.insertStyleElement=K();H()(et.Z,it);et.Z&&et.Z.locals&&et.Z.locals;let nt=0,rt=[];const at=(t=>{try{return new Worker(URL.createObjectURL(new Blob(["("+t+")()"])))}catch(t){}})((function(){let t,e=0;function i(){const n=performance.now();e||(e=n);n-e>=200&&(postMessage({type:"timeUpdate",time:n}),e+=200),t=setTimeout(i,20)}self.onmessage=function(e){if(e&&e.data)switch(e.data.type){case"pause":t&&(clearTimeout(t),t=null,postMessage("timeBus paused"));break;case"resume":null===t&&(t=setTimeout(i,0),postMessage("timeBus resumed"))}},t=setTimeout(i,0),postMessage("timeBus initialized")}));at.onmessage=t=>{if("timeUpdate"===t.data.type)nt=t.data.time,(t=>{rt.forEach((e=>{t%e.interval<200&&e.callback.call(null,t)}))})(nt)};let st,ot="",lt=5;const dt={};function ut(){if(ot="",!window.__tcfapi&&window!==window.top){let t,e=window;for(;!t;){try{e.frames.__tcfapiLocator&&(t=e)}catch(t){}if(e===window.top)break;e=e.parent}window.__tcfapi=function(e,i,n,r){if(t){const a=Math.random()+"",s={__tcfapiCall:{command:e,parameter:r,version:i,callId:a}};dt[a]=n,t.postMessage(s,"*")}else n({msg:"CMP not found"},!1)},window.addEventListener("message",(function(t){let e;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}else e=t.data;if(e&&e.__tcfapiReturn){const t=e.__tcfapiReturn;if(t&&dt.hasOwnProperty(t.callId))try{dt[t.callId](t.returnValue,t.success),delete dt[t.callId]}catch(t){}}}))}"function"==typeof window.__tcfapi?(window.__tcfapi("ping",2,((t,e)=>{})),window.__tcfapi("getTCData",2,((t,e)=>{e?(st=t.gdprApplies,ot=t.tcString):0==lt--||window.setTimeout(ut,1200)}))):lt-- >0&&window.setTimeout(ut,1200)}let ct="",ht=5;const pt={};function gt(){if(ct="",!window.__uspapi&&window!==window.top){let t,e=window;for(;!t;){try{e.frames.__uspapiLocator&&(t=e)}catch(t){}if(e===window.top)break;e=e.parent}window.__uspapi=function(e,i,n){if(!t)return void n({msg:"CMP not found"},!1);const r=Math.random()+"",a={__uspapiCall:{command:e,version:i,callId:r}};pt[r]=n,t.postMessage(a,"*")},window.addEventListener("message",(function(t){let e;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}else e=t.data;if(e&&e.__uspapiReturn){const t=e.__uspapiReturn;if(t&&pt.hasOwnProperty(t.callId))try{pt[t.callId](t.returnValue,t.success),delete pt[t.callId]}catch(t){}}}))}"function"==typeof window.__uspapi?window.__uspapi("getUSPData",1,((t,e)=>{e?ct=t.uspString:0==ht--||window.setTimeout(gt,1200)})):ht-- >0&&window.setTimeout(gt,1200)}var mt={686:function(t,e){!function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=d(t);if(e){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return c(this,i)}}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:t.id||null,adId:t.adId||null,sequence:t.sequence||null,apiFramework:t.apiFramework||null,universalAdId:{value:null,idRegistry:"unknown"},creativeExtensions:[]}}var g=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[],r=v(t);for(var a in!e.ERRORCODE||i.isCustomCode||/^[0-9]{3}$/.test(e.ERRORCODE)||(e.ERRORCODE=900),e.CACHEBUSTING=w(Math.round(1e8*Math.random()).toString()),e.TIMESTAMP=(new Date).toISOString(),e.RANDOM=e.random=e.CACHEBUSTING,e)e[a]=A(e[a]);for(var s in r){var o=r[s];"string"==typeof o&&n.push(f(o,e))}return n}function f(t,e){var i=(t=y(t,e)).match(/[^[\]]+(?=])/g);if(!i)return t;var n=i.filter((function(t){return g.indexOf(t)>-1}));return 0===n.length?t:y(t,n=n.reduce((function(t,e){return t[e]=-1,t}),{}))}function y(t,e){var i=t;for(var n in e){var r=e[n];i=i.replace(new RegExp("(?:\\[|%%)(".concat(n,")(?:\\]|%%)"),"g"),r)}return i}function v(t){return Array.isArray(t)?t.map((function(t){return t&&t.hasOwnProperty("url")?t.url:t})):t}function b(t,e){for(var i=0;i<e.length;i++)if(T(e[i],t))return!0;return!1}function T(t,e){if(t&&e){var i=Object.getOwnPropertyNames(t),n=Object.getOwnPropertyNames(e);return i.length===n.length&&t.id===e.id&&t.url===e.url}return!1}function A(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16))}))}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=String(t);return i.length<e?S(0,e-i.length,!1).map((function(){return"0"})).join("")+i:i}function S(t,e,i){for(var n=[],r=t<e,a=i?r?e+1:e-1:e,s=t;r?s<a:s>a;r?s++:s--)n.push(s);return n}var _={track:function(t,e,i){m(t,e,i).forEach((function(t){"undefined"!=typeof window&&null!==window&&((new Image).src=t)}))},resolveURLTemplates:m,extractURLsFromTemplates:v,containsTemplateObject:b,isTemplateObjectEqual:T,encodeURIComponentRFC3986:A,replaceUrlMacros:f,leftpad:w,range:S,isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},flatten:function t(e){return e.reduce((function(e,i){return e.concat(Array.isArray(i)?t(i):i)}),[])},joinArrayOfUniqueTemplateObjs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Array.isArray(t)?t:[],n=Array.isArray(e)?e:[];return i.concat(n).reduce((function(t,e){return b(e,t)||t.push(e),t}),[])}};function E(t){return-1!==["true","TRUE","True","1"].indexOf(t)}var L={childByName:function(t,e){var i=t.childNodes;for(var n in i){var r=i[n];if(r.nodeName===e)return r}},childrenByName:function(t,e){var i=[],n=t.childNodes;for(var r in n){var a=n[r];a.nodeName===e&&i.push(a)}return i},resolveVastAdTagURI:function(t,e){if(!e)return t;if(0===t.indexOf("//")){var i=location.protocol;return"".concat(i).concat(t)}if(-1===t.indexOf("://")){var n=e.slice(0,e.lastIndexOf("/"));return"".concat(n,"/").concat(t)}return t},parseBoolean:E,parseNodeText:function(t){return t&&(t.textContent||t.text||"").trim()},copyNodeAttribute:function(t,e,i){var n=e.getAttribute(t);n&&i.setAttribute(t,n)},parseAttributes:function(t){for(var e=t.attributes,i={},n=0;n<e.length;n++)i[e[n].nodeName]=e[n].nodeValue;return i},parseDuration:function(t){if(null==t)return-1;if(_.isNumeric(t))return parseInt(t);var e=t.split(":");if(3!==e.length)return-1;var i=e[2].split("."),n=parseInt(i[0]);2===i.length&&(n+=parseFloat("0.".concat(i[1])));var r=parseInt(60*e[1]),a=parseInt(60*e[0]*60);return isNaN(a)||isNaN(r)||isNaN(n)||r>3600||n>60?-1:a+r+n},splitVAST:function(t){var e=[],i=null;return t.forEach((function(n,r){if(n.sequence&&(n.sequence=parseInt(n.sequence,10)),n.sequence>1){var a=t[r-1];if(a&&a.sequence===n.sequence-1)return void(i&&i.push(n));delete n.sequence}i=[n],e.push(i)})),e},assignAttributes:function(t,e){if(t)for(var i in t){var n=t[i];if(n.nodeName&&n.nodeValue&&e.hasOwnProperty(n.nodeName)){var r=n.nodeValue;"boolean"==typeof e[n.nodeName]&&(r=E(r)),e[n.nodeName]=r}}},mergeWrapperAdData:function(t,e){t.errorURLTemplates=e.errorURLTemplates.concat(t.errorURLTemplates),t.impressionURLTemplates=e.impressionURLTemplates.concat(t.impressionURLTemplates),t.extensions=e.extensions.concat(t.extensions),t.followAdditionalWrappers=e.followAdditionalWrappers,t.allowMultipleAds=e.allowMultipleAds,t.fallbackOnNoAd=e.fallbackOnNoAd;var i=(e.creatives||[]).filter((function(t){return t&&"companion"===t.type})),n=i.reduce((function(t,e){return(e.variations||[]).forEach((function(e){(e.companionClickTrackingURLTemplates||[]).forEach((function(e){_.containsTemplateObject(e,t)||t.push(e)}))})),t}),[]);t.creatives=i.concat(t.creatives);var r=e.videoClickTrackingURLTemplates&&e.videoClickTrackingURLTemplates.length,a=e.videoCustomClickURLTemplates&&e.videoCustomClickURLTemplates.length;t.creatives.forEach((function(t){if(e.trackingEvents&&e.trackingEvents[t.type])for(var i in e.trackingEvents[t.type]){var s=e.trackingEvents[t.type][i];Array.isArray(t.trackingEvents[i])||(t.trackingEvents[i]=[]),t.trackingEvents[i]=t.trackingEvents[i].concat(s)}"linear"===t.type&&(r&&(t.videoClickTrackingURLTemplates=t.videoClickTrackingURLTemplates.concat(e.videoClickTrackingURLTemplates)),a&&(t.videoCustomClickURLTemplates=t.videoCustomClickURLTemplates.concat(e.videoCustomClickURLTemplates)),!e.videoClickThroughURLTemplate||null!==t.videoClickThroughURLTemplate&&void 0!==t.videoClickThroughURLTemplate||(t.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate)),"companion"===t.type&&n.length&&(t.variations||[]).forEach((function(t){t.companionClickTrackingURLTemplates=_.joinArrayOfUniqueTemplateObjs(t.companionClickTrackingURLTemplates,n)}))})),e.adVerifications&&(t.adVerifications=t.adVerifications.concat(e.adVerifications)),e.blockedAdCategories&&(t.blockedAdCategories=t.blockedAdCategories.concat(e.blockedAdCategories))}};function C(t,e){var i=function(){var t=p(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:t.id,adId:t.adId,sequence:t.sequence,apiFramework:t.apiFramework,type:"companion",required:null,variations:[]}}(e);return i.required=t.getAttribute("required")||null,i.variations=L.childrenByName(t,"Companion").map((function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:t.id||null,adType:"companionAd",width:t.width||0,height:t.height||0,assetWidth:t.assetWidth||null,assetHeight:t.assetHeight||null,expandedWidth:t.expandedWidth||null,expandedHeight:t.expandedHeight||null,apiFramework:t.apiFramework||null,adSlotID:t.adSlotID||null,pxratio:t.pxratio||"1",renderingMode:t.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(L.parseAttributes(t));e.htmlResources=L.childrenByName(t,"HTMLResource").reduce((function(t,e){var i=L.parseNodeText(e);return i?t.concat(i):t}),[]),e.iframeResources=L.childrenByName(t,"IFrameResource").reduce((function(t,e){var i=L.parseNodeText(e);return i?t.concat(i):t}),[]),e.staticResources=L.childrenByName(t,"StaticResource").reduce((function(t,e){var i=L.parseNodeText(e);return i?t.concat({url:i,creativeType:e.getAttribute("creativeType")||null}):t}),[]),e.altText=L.parseNodeText(L.childByName(t,"AltText"))||null;var i=L.childByName(t,"TrackingEvents");i&&L.childrenByName(i,"Tracking").forEach((function(t){var i=t.getAttribute("event"),n=L.parseNodeText(t);i&&n&&(Array.isArray(e.trackingEvents[i])||(e.trackingEvents[i]=[]),e.trackingEvents[i].push(n))})),e.companionClickTrackingURLTemplates=L.childrenByName(t,"CompanionClickTracking").map((function(t){return{id:t.getAttribute("id")||null,url:L.parseNodeText(t)}})),e.companionClickThroughURLTemplate=L.parseNodeText(L.childByName(t,"CompanionClickThrough"))||null;var n=L.childByName(t,"AdParameters");return n&&(e.adParameters=L.parseNodeText(n),e.xmlEncoded=n.getAttribute("xmlEncoded")||null),e})),i}function I(t){return"linear"===t.type}function k(t,e){var i,n=function(){var t=p(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:t.id,adId:t.adId,sequence:t.sequence,apiFramework:t.apiFramework,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(e);n.duration=L.parseDuration(L.parseNodeText(L.childByName(t,"Duration")));var r=t.getAttribute("skipoffset");if(null==r)n.skipDelay=null;else if("%"===r.charAt(r.length-1)&&-1!==n.duration){var a=parseInt(r,10);n.skipDelay=n.duration*(a/100)}else n.skipDelay=L.parseDuration(r);var s=L.childByName(t,"VideoClicks");if(s){var o=L.childByName(s,"ClickThrough");n.videoClickThroughURLTemplate=o?{id:o.getAttribute("id")||null,url:L.parseNodeText(o)}:null,L.childrenByName(s,"ClickTracking").forEach((function(t){n.videoClickTrackingURLTemplates.push({id:t.getAttribute("id")||null,url:L.parseNodeText(t)})})),L.childrenByName(s,"CustomClick").forEach((function(t){n.videoCustomClickURLTemplates.push({id:t.getAttribute("id")||null,url:L.parseNodeText(t)})}))}var l=L.childByName(t,"AdParameters");l&&(n.adParameters=L.parseNodeText(l)),L.childrenByName(t,"TrackingEvents").forEach((function(t){L.childrenByName(t,"Tracking").forEach((function(t){var e=t.getAttribute("event"),r=L.parseNodeText(t);if(e&&r){if("progress"===e){if(!(i=t.getAttribute("offset")))return;e="%"===i.charAt(i.length-1)?"progress-".concat(i):"progress-".concat(Math.round(L.parseDuration(i)))}Array.isArray(n.trackingEvents[e])||(n.trackingEvents[e]=[]),n.trackingEvents[e].push(r)}}))})),L.childrenByName(t,"MediaFiles").forEach((function(t){L.childrenByName(t,"MediaFile").forEach((function(t){n.mediaFiles.push(function(t){var e={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};e.id=t.getAttribute("id"),e.fileURL=L.parseNodeText(t),e.deliveryType=t.getAttribute("delivery"),e.codec=t.getAttribute("codec"),e.mimeType=t.getAttribute("type"),e.mediaType=t.getAttribute("mediaType")||"2D",e.apiFramework=t.getAttribute("apiFramework"),e.fileSize=parseInt(t.getAttribute("fileSize")||0),e.bitrate=parseInt(t.getAttribute("bitrate")||0),e.minBitrate=parseInt(t.getAttribute("minBitrate")||0),e.maxBitrate=parseInt(t.getAttribute("maxBitrate")||0),e.width=parseInt(t.getAttribute("width")||0),e.height=parseInt(t.getAttribute("height")||0);var i=t.getAttribute("scalable");i&&"string"==typeof i&&(e.scalable=L.parseBoolean(i));var n=t.getAttribute("maintainAspectRatio");return n&&"string"==typeof n&&(e.maintainAspectRatio=L.parseBoolean(n)),e}(t))}));var e=L.childByName(t,"InteractiveCreativeFile");e&&(n.interactiveCreativeFile=function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:t.type||null,apiFramework:t.apiFramework||null,variableDuration:L.parseBoolean(t.variableDuration),fileURL:null}}(L.parseAttributes(t));return e.fileURL=L.parseNodeText(t),e}(e));var i=L.childByName(t,"ClosedCaptionFiles");i&&L.childrenByName(i,"ClosedCaptionFile").forEach((function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:t.type||null,language:t.language||null,fileURL:null}}(L.parseAttributes(t));e.fileURL=L.parseNodeText(t),n.closedCaptionFiles.push(e)}));var r,a,s,o=L.childByName(t,"Mezzanine"),l=(r=o,a={},s=!1,["delivery","type","width","height"].forEach((function(t){r&&r.getAttribute(t)?a[t]=r.getAttribute(t):s=!0})),s?null:a);if(l){var d={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};d.id=o.getAttribute("id"),d.fileURL=L.parseNodeText(o),d.delivery=l.delivery,d.codec=o.getAttribute("codec"),d.type=l.type,d.width=parseInt(l.width,10),d.height=parseInt(l.height,10),d.fileSize=parseInt(o.getAttribute("fileSize"),10),d.mediaType=o.getAttribute("mediaType")||"2D",n.mezzanine=d}}));var d=L.childByName(t,"Icons");return d&&L.childrenByName(d,"Icon").forEach((function(t){n.icons.push(function(t){var e={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};e.program=t.getAttribute("program"),e.height=parseInt(t.getAttribute("height")||0),e.width=parseInt(t.getAttribute("width")||0),e.xPosition=function(t){return-1!==["left","right"].indexOf(t)?t:parseInt(t||0)}(t.getAttribute("xPosition")),e.yPosition=function(t){return-1!==["top","bottom"].indexOf(t)?t:parseInt(t||0)}(t.getAttribute("yPosition")),e.apiFramework=t.getAttribute("apiFramework"),e.pxratio=t.getAttribute("pxratio")||"1",e.offset=L.parseDuration(t.getAttribute("offset")),e.duration=L.parseDuration(t.getAttribute("duration")),L.childrenByName(t,"HTMLResource").forEach((function(t){e.type=t.getAttribute("creativeType")||"text/html",e.htmlResource=L.parseNodeText(t)})),L.childrenByName(t,"IFrameResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.iframeResource=L.parseNodeText(t)})),L.childrenByName(t,"StaticResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.staticResource=L.parseNodeText(t)}));var i=L.childByName(t,"IconClicks");return i&&(e.iconClickThroughURLTemplate=L.parseNodeText(L.childByName(i,"IconClickThrough")),L.childrenByName(i,"IconClickTracking").forEach((function(t){e.iconClickTrackingURLTemplates.push({id:t.getAttribute("id")||null,url:L.parseNodeText(t)})}))),e.iconViewTrackingURLTemplate=L.parseNodeText(L.childByName(t,"IconViewTracking")),e}(t))})),n}function M(t,e){var i=function(){var t=p(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:t.id,adId:t.adId,sequence:t.sequence,apiFramework:t.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}}}(e);return L.childrenByName(t,"TrackingEvents").forEach((function(t){var e,n;L.childrenByName(t,"Tracking").forEach((function(t){e=t.getAttribute("event"),n=L.parseNodeText(t),e&&n&&(Array.isArray(i.trackingEvents[e])||(i.trackingEvents[e]=[]),i.trackingEvents[e].push(n))}))})),L.childrenByName(t,"NonLinear").forEach((function(t){var e={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};e.id=t.getAttribute("id")||null,e.width=t.getAttribute("width"),e.height=t.getAttribute("height"),e.expandedWidth=t.getAttribute("expandedWidth"),e.expandedHeight=t.getAttribute("expandedHeight"),e.scalable=L.parseBoolean(t.getAttribute("scalable")),e.maintainAspectRatio=L.parseBoolean(t.getAttribute("maintainAspectRatio")),e.minSuggestedDuration=L.parseDuration(t.getAttribute("minSuggestedDuration")),e.apiFramework=t.getAttribute("apiFramework"),L.childrenByName(t,"HTMLResource").forEach((function(t){e.type=t.getAttribute("creativeType")||"text/html",e.htmlResource=L.parseNodeText(t)})),L.childrenByName(t,"IFrameResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.iframeResource=L.parseNodeText(t)})),L.childrenByName(t,"StaticResource").forEach((function(t){e.type=t.getAttribute("creativeType")||0,e.staticResource=L.parseNodeText(t)}));var n=L.childByName(t,"AdParameters");n&&(e.adParameters=L.parseNodeText(n)),e.nonlinearClickThroughURLTemplate=L.parseNodeText(L.childByName(t,"NonLinearClickThrough")),L.childrenByName(t,"NonLinearClickTracking").forEach((function(t){e.nonlinearClickTrackingURLTemplates.push({id:t.getAttribute("id")||null,url:L.parseNodeText(t)})})),i.variations.push(e)})),i}function N(t){var e=[];return t.forEach((function(t){var i=D(t);i&&e.push(i)})),e}function D(t){if("#comment"===t.nodeName)return null;var e,i={name:null,value:null,attributes:{},children:[]},n=t.attributes,r=t.childNodes;if(i.name=t.nodeName,t.attributes)for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.nodeName&&s.nodeValue&&(i.attributes[s.nodeName]=s.nodeValue)}for(var o in r)if(r.hasOwnProperty(o)){var l=D(r[o]);l&&i.children.push(l)}if(0===i.children.length||1===i.children.length&&["#cdata-section","#text"].indexOf(i.children[0].name)>=0){var d=L.parseNodeText(t);""!==d&&(i.value=d),i.children=[]}return null===(e=i).value&&0===Object.keys(e.attributes).length&&0===e.children.length?null:i}function R(t){var e=[];return t.forEach((function(t){var i,n,r={id:t.getAttribute("id")||null,adId:x(t),sequence:t.getAttribute("sequence")||null,apiFramework:t.getAttribute("apiFramework")||null},a=L.childByName(t,"UniversalAdId");a&&(i={idRegistry:a.getAttribute("idRegistry")||"unknown",value:L.parseNodeText(a)});var s=L.childByName(t,"CreativeExtensions");for(var o in s&&(n=N(L.childrenByName(s,"CreativeExtension"))),t.childNodes){var l=t.childNodes[o],d=void 0;switch(l.nodeName){case"Linear":d=k(l,r);break;case"NonLinearAds":d=M(l,r);break;case"CompanionAds":d=C(l,r)}d&&(i&&(d.universalAdId=i),n&&(d.creativeExtensions=n),e.push(d))}})),e}function x(t){return t.getAttribute("AdID")||t.getAttribute("adID")||t.getAttribute("adId")||null}var U={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function P(t,e){if(U[t.nodeName]&&U[t.nodeName].attributes){var i=U[t.nodeName].attributes.filter((function(e){return!t.getAttribute(e)}));i.length>0&&j({name:t.nodeName,parentName:t.parentNode.nodeName,attributes:i},e)}}function O(t,e,i){var n=U[t.nodeName],r=!i&&"Wrapper"!==t.nodeName;if(n&&!r){if(n.subElements){var a=n.subElements.filter((function(e){return!L.childByName(t,e)}));a.length>0&&j({name:t.nodeName,parentName:t.parentNode.nodeName,subElements:a},e)}i&&n.oneOfinLineResources&&(n.oneOfinLineResources.some((function(e){return L.childByName(t,e)}))||j({name:t.nodeName,parentName:t.parentNode.nodeName,oneOfResources:n.oneOfinLineResources},e))}}function V(t){return t.children&&0!==t.children.length}function j(t,e){var i=t.name,n=t.parentName,r=t.attributes,a=t.subElements,s=t.oneOfResources,o="Element '".concat(i,"'");e("VAST-warning",{message:o+=r?" missing required attribute(s) '".concat(r.join(", "),"' "):a?" missing required sub element(s) '".concat(a.join(", "),"' "):s?" must provide one of the following '".concat(s.join(", "),"' "):" is empty",parentElement:n,specVersion:4.1})}var z=function t(e,i,n){if(e&&e.nodeName)if("InLine"===e.nodeName&&(n=!0),P(e,i),V(e)){O(e,i,n);for(var r=0;r<e.children.length;r++)t(e.children[r],i,n)}else 0===L.parseNodeText(e).length&&j({name:e.nodeName,parentName:e.parentNode.nodeName},i)};function B(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.allowMultipleAds,r=i.followAdditionalWrappers,a=t.childNodes;for(var s in a){var o=a[s];if(-1!==["Wrapper","InLine"].indexOf(o.nodeName)&&("Wrapper"!==o.nodeName||!1!==r)){if(L.copyNodeAttribute("id",t,o),L.copyNodeAttribute("sequence",t,o),L.copyNodeAttribute("adType",t,o),"Wrapper"===o.nodeName)return{ad:H(o,e),type:"WRAPPER"};if("InLine"===o.nodeName)return{ad:F(o,e,{allowMultipleAds:n}),type:"INLINE"}}}}function F(t,e){return!1===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allowMultipleAds&&t.getAttribute("sequence")?null:G(t,e)}function G(t,e){var i=[];e&&z(t,e);var n=t.childNodes,r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:t.id||null,sequence:t.sequence||null,adType:t.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:{},system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(L.parseAttributes(t));for(var a in n){var s=n[a];switch(s.nodeName){case"Error":r.errorURLTemplates.push(L.parseNodeText(s));break;case"Impression":r.impressionURLTemplates.push({id:s.getAttribute("id")||null,url:L.parseNodeText(s)});break;case"Creatives":r.creatives=R(L.childrenByName(s,"Creative"));break;case"Extensions":var o=L.childrenByName(s,"Extension");r.extensions=N(o),r.adVerifications.length||(i=Y(o));break;case"AdVerifications":r.adVerifications=W(L.childrenByName(s,"Verification"));break;case"AdSystem":r.system={value:L.parseNodeText(s),version:s.getAttribute("version")||null};break;case"AdTitle":r.title=L.parseNodeText(s);break;case"AdServingId":r.adServingId=L.parseNodeText(s);break;case"Category":r.categories.push({authority:s.getAttribute("authority")||null,value:L.parseNodeText(s)});break;case"Expires":r.expires=parseInt(L.parseNodeText(s),10);break;case"ViewableImpression":r.viewableImpression=Q(s);break;case"Description":r.description=L.parseNodeText(s);break;case"Advertiser":r.advertiser={id:s.getAttribute("id")||null,value:L.parseNodeText(s)};break;case"Pricing":r.pricing={value:L.parseNodeText(s),model:s.getAttribute("model")||null,currency:s.getAttribute("currency")||null};break;case"Survey":r.survey=L.parseNodeText(s);break;case"BlockedAdCategories":r.blockedAdCategories.push({authority:s.getAttribute("authority")||null,value:L.parseNodeText(s)})}}return i.length&&(r.adVerifications=r.adVerifications.concat(i)),r}function H(t,e){var i=G(t,e),n=t.getAttribute("followAdditionalWrappers"),r=t.getAttribute("allowMultipleAds"),a=t.getAttribute("fallbackOnNoAd");i.followAdditionalWrappers=!n||L.parseBoolean(n),i.allowMultipleAds=!!r&&L.parseBoolean(r),i.fallbackOnNoAd=a?L.parseBoolean(a):null;var s=L.childByName(t,"VASTAdTagURI");if(s?i.nextWrapperURL=L.parseNodeText(s):(s=L.childByName(t,"VASTAdTagURL"))&&(i.nextWrapperURL=L.parseNodeText(L.childByName(s,"URL"))),i.creatives.forEach((function(t){if(-1!==["linear","nonlinear"].indexOf(t.type)){if(t.trackingEvents){i.trackingEvents||(i.trackingEvents={}),i.trackingEvents[t.type]||(i.trackingEvents[t.type]={});var e=function(e){var n=t.trackingEvents[e];Array.isArray(i.trackingEvents[t.type][e])||(i.trackingEvents[t.type][e]=[]),n.forEach((function(n){i.trackingEvents[t.type][e].push(n)}))};for(var n in t.trackingEvents)e(n)}t.videoClickTrackingURLTemplates&&(Array.isArray(i.videoClickTrackingURLTemplates)||(i.videoClickTrackingURLTemplates=[]),t.videoClickTrackingURLTemplates.forEach((function(t){i.videoClickTrackingURLTemplates.push(t)}))),t.videoClickThroughURLTemplate&&(i.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate),t.videoCustomClickURLTemplates&&(Array.isArray(i.videoCustomClickURLTemplates)||(i.videoCustomClickURLTemplates=[]),t.videoCustomClickURLTemplates.forEach((function(t){i.videoCustomClickURLTemplates.push(t)})))}})),i.nextWrapperURL)return i}function W(t){var e=[];return t.forEach((function(t){var i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},n=t.childNodes;for(var r in L.assignAttributes(t.attributes,i),n){var a=n[r];switch(a.nodeName){case"JavaScriptResource":case"ExecutableResource":i.resource=L.parseNodeText(a),L.assignAttributes(a.attributes,i);break;case"VerificationParameters":i.parameters=L.parseNodeText(a)}}var s=L.childByName(t,"TrackingEvents");s&&L.childrenByName(s,"Tracking").forEach((function(t){var e=t.getAttribute("event"),n=L.parseNodeText(t);e&&n&&(Array.isArray(i.trackingEvents[e])||(i.trackingEvents[e]=[]),i.trackingEvents[e].push(n))})),e.push(i)})),e}function Y(t){var e=null,i=[];return t.some((function(t){return e=L.childByName(t,"AdVerifications")})),e&&(i=W(L.childrenByName(e,"Verification"))),i}function Q(t){var e={};e.id=t.getAttribute("id")||null;var i=t.childNodes;for(var n in i){var r=i[n],a=r.nodeName,s=L.parseNodeText(r);if(("Viewable"===a||"NotViewable"===a||"ViewUndetermined"===a)&&s){var o=a.toLowerCase();Array.isArray(e[o])||(e[o]=[]),e[o].push(s)}}return e}var Z=function(){function t(){i(this,t),this._handlers=[]}return r(t,[{key:"on",value:function(t,i){if("function"!=typeof i)throw new TypeError("The handler argument must be of type Function. Received type ".concat(e(i)));if(!t)throw new TypeError("The event argument must be of type String. Received type ".concat(e(t)));return this._handlers.push({event:t,handler:i}),this}},{key:"once",value:function(t,e){return this.on(t,function(t,e,i){var n={fired:!1,wrapFn:void 0};function r(){n.fired||(t.off(e,n.wrapFn),n.fired=!0,i.bind(t).apply(void 0,arguments))}return n.wrapFn=r,r}(this,t,e))}},{key:"off",value:function(t,e){return this._handlers=this._handlers.filter((function(i){return i.event!==t||i.handler!==e})),this}},{key:"emit",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r=!1;return this._handlers.forEach((function(e){"*"===e.event&&(r=!0,e.handler.apply(e,[t].concat(i))),e.event===t&&(r=!0,e.handler.apply(e,i))})),r}},{key:"removeAllListeners",value:function(t){return t?(this._handlers=this._handlers.filter((function(e){return e.event!==t})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(t){return this._handlers.filter((function(e){return e.event===t})).length}},{key:"listeners",value:function(t){return this._handlers.reduce((function(e,i){return i.event===t&&e.push(i.handler),e}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(t){return t.event}))}}]),t}(),X=function(t,e,i){i(new Error("Please bundle the library for node to use the node urlHandler"))},q=12e4;function J(){try{var t=new window.XMLHttpRequest;return"withCredentials"in t?t:null}catch(t){return null}}function K(t,e,i){var n=i?408:t.status,r=i?"XHRURLHandler: Request timed out after ".concat(t.timeout," ms (").concat(n,")"):"XHRURLHandler: ".concat(t.statusText," (").concat(n,")");e(new Error(r),null,{statusCode:n})}var $=function(t,e,i){if("https:"===window.location.protocol&&0===t.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var n=J();n.open("GET",t),n.timeout=e.timeout||q,n.withCredentials=e.withCredentials||!1,n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onload=function(){return function(t,e){200===t.status?e(null,t.responseXML,{byteLength:t.response.length,statusCode:t.status}):K(t,e,!1)}(n,i)},n.onerror=function(){return K(n,i,!1)},n.onabort=function(){return K(n,i,!1)},n.ontimeout=function(){return K(n,i,!0)},n.send()}catch(t){i(new Error("XHRURLHandler: Unexpected error"))}},tt=function(){return!!J()},et={get:function(t,e,i){return i||("function"==typeof e&&(i=e),e={}),"undefined"==typeof window||null===window?X(t,e,i):tt()?$(t,e,i):i(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},it=0,nt=0,rt=function(t,e){!t||!e||t<=0||e<=0||(nt=(nt*it+8*t/e)/++it)},at={ERRORCODE:900,extensions:[]},st=function(t){l(n,t);var e=h(n);function n(){var t;return i(this,n),(t=e.call(this)).remainingAds=[],t.parentURLs=[],t.errorURLTemplates=[],t.rootErrorURLTemplates=[],t.maxWrapperDepth=null,t.URLTemplateFilters=[],t.fetchingOptions={},t.parsingOptions={},t}return r(n,[{key:"addURLTemplateFilter",value:function(t){"function"==typeof t&&this.URLTemplateFilters.push(t)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];this.emit("VAST-error",Object.assign.apply(Object,[{},at,e].concat(n))),_.track(t,e)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return nt}},{key:"fetchVAST",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(r,a){e.URLTemplateFilters.forEach((function(e){t=e(t)})),e.parentURLs.push(t);var s=Date.now();e.emit("VAST-resolving",{url:t,previousUrl:n,wrapperDepth:i,maxWrapperDepth:e.maxWrapperDepth,timeout:e.fetchingOptions.timeout}),e.urlHandler.get(t,e.fetchingOptions,(function(o,l){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Math.round(Date.now()-s),c=Object.assign({url:t,previousUrl:n,wrapperDepth:i,error:o,duration:u},d);e.emit("VAST-resolved",c),rt(d.byteLength,u),o?a(o):r(l)}))}))}},{key:"initParsingStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:t.timeout||q,withCredentials:t.withCredentials},this.maxWrapperDepth=t.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:t.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=t.urlHandler||t.urlhandler||et,this.vastVersion=null,rt(t.byteLength,t.requestDuration)}},{key:"getRemainingAds",value:function(t){var e=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var i=t?_.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(i,{wrapperDepth:0,url:this.rootURL}).then((function(t){return e.buildVASTResponse(t)}))}},{key:"getAndParseVAST",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),this.URLTemplateFilters.forEach((function(e){t=e(t)})),this.rootURL=t,this.fetchVAST(t).then((function(n){return i.previousUrl=t,i.isRootVAST=!0,i.url=t,e.parse(n,i).then((function(t){return e.buildVASTResponse(t)}))}))}},{key:"parseVAST",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),i.isRootVAST=!0,this.parse(t,i).then((function(t){return e.buildVASTResponse(t)}))}},{key:"buildVASTResponse",value:function(t){var e,i={ads:(e={ads:t,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:e.errorURLTemplates||[],version:e.version||null};return this.completeWrapperResolving(i),i}},{key:"parseVastXml",value:function(t,e){var i=e.isRootVAST,n=void 0!==i&&i,r=e.url,a=void 0===r?null:r,s=e.wrapperDepth,o=void 0===s?0:s,l=e.allowMultipleAds,d=e.followAdditionalWrappers;if(!t||!t.documentElement||"VAST"!==t.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:a,wrapperDepth:o}),new Error("Invalid VAST XMLDocument");var u=[],c=t.documentElement.childNodes,h=t.documentElement.getAttribute("version");for(var p in n&&h&&(this.vastVersion=h),c){var g=c[p];if("Error"===g.nodeName){var m=L.parseNodeText(g);n?this.rootErrorURLTemplates.push(m):this.errorURLTemplates.push(m)}else if("Ad"===g.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&u.length>1)break;var f=B(g,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:d});f.ad?(u.push(f.ad),this.emit("VAST-ad-parsed",{type:f.type,url:a,wrapperDepth:o,adIndex:u.length-1,vastVersion:h})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return u}},{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.url,n=void 0===i?null:i,r=e.resolveAll,a=void 0===r||r,s=e.wrapperSequence,o=void 0===s?null:s,l=e.previousUrl,d=void 0===l?null:l,u=e.wrapperDepth,c=void 0===u?0:u,h=e.isRootVAST,p=void 0!==h&&h,g=e.followAdditionalWrappers,m=e.allowMultipleAds,f=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&p&&(m=!0);try{f=this.parseVastXml(t,{isRootVAST:p,url:n,wrapperDepth:c,allowMultipleAds:m,followAdditionalWrappers:g})}catch(t){return Promise.reject(t)}return 1===f.length&&null!=o&&(f[0].sequence=o),!1===a&&(this.remainingAds=L.splitVAST(f),f=this.remainingAds.shift()),this.resolveAds(f,{wrapperDepth:c,previousUrl:d,url:n})}},{key:"resolveAds",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,n=i.wrapperDepth,r=i.previousUrl,a=i.url,s=[];return r=a,e.forEach((function(e){var i=t.resolveWrappers(e,n,r);s.push(i)})),Promise.all(s).then((function(e){var i=_.flatten(e);if(!i&&t.remainingAds.length>0){var s=t.remainingAds.shift();return t.resolveAds(s,{wrapperDepth:n,previousUrl:r,url:a})}return i}))}},{key:"resolveWrappers",value:function(t,e,i){var n=this;return new Promise((function(r){var a;if(e++,!t.nextWrapperURL)return delete t.nextWrapperURL,r(t);if(e>=n.maxWrapperDepth||-1!==n.parentURLs.indexOf(t.nextWrapperURL))return t.errorCode=302,delete t.nextWrapperURL,r(t);t.nextWrapperURL=L.resolveVastAdTagURI(t.nextWrapperURL,i),n.URLTemplateFilters.forEach((function(e){t.nextWrapperURL=e(t.nextWrapperURL)}));var s=null!==(a=n.parsingOptions.allowMultipleAds)&&void 0!==a?a:t.allowMultipleAds,o=t.sequence;n.fetchVAST(t.nextWrapperURL,e,i).then((function(a){return n.parse(a,{url:t.nextWrapperURL,previousUrl:i,wrapperSequence:o,wrapperDepth:e,followAdditionalWrappers:t.followAdditionalWrappers,allowMultipleAds:s}).then((function(e){if(delete t.nextWrapperURL,0===e.length)return t.creatives=[],r(t);e.forEach((function(e){e&&L.mergeWrapperAdData(e,t)})),r(e)}))})).catch((function(e){t.errorCode=301,t.errorMessage=e.message,r(t)}))}))}},{key:"completeWrapperResolving",value:function(t){if(0===t.ads.length)this.trackVastError(t.errorURLTemplates,{ERRORCODE:303});else for(var e=t.ads.length-1;e>=0;e--){var i=t.ads[e];(i.errorCode||0===i.creatives.length)&&(this.trackVastError(i.errorURLTemplates.concat(t.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),t.ads.splice(e,1))}}}]),n}(Z),ot=null,lt={data:{},length:0,getItem:function(t){return this.data[t]},setItem:function(t,e){this.data[t]=e,this.length=Object.keys(this.data).length},removeItem:function(t){delete this.data[t],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},dt=function(){function t(){i(this,t),this.storage=this.initStorage()}return r(t,[{key:"initStorage",value:function(){if(ot)return ot;try{ot="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(t){ot=null}return ot&&!this.isStorageDisabled(ot)||(ot=lt).clear(),ot}},{key:"isStorageDisabled",value:function(t){var e="__VASTStorage__";try{if(t.setItem(e,e),t.getItem(e)!==e)return t.removeItem(e),!0}catch(t){return!0}return t.removeItem(e),!1}},{key:"getItem",value:function(t){return this.storage.getItem(t)}},{key:"setItem",value:function(t,e){return this.storage.setItem(t,e)}},{key:"removeItem",value:function(t){return this.storage.removeItem(t)}},{key:"clear",value:function(){return this.storage.clear()}}]),t}(),ut=function(){function t(e,n,r){i(this,t),this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=n||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new st,this.storage=r||new dt,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return r(t,[{key:"getParser",value:function(){return this.vastParser}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(t){return this.vastParser.getRemainingAds(t)}},{key:"get",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Date.now();return(i=Object.assign({},this.defaultOptions,i)).hasOwnProperty("resolveAll")||(i.resolveAll=!1),this.totalCallsTimeout<n?(this.totalCalls=1,this.totalCallsTimeout=n+36e5):this.totalCalls++,new Promise((function(r,a){if(e.cappingFreeLunch>=e.totalCalls)return a(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(e.totalCalls,"/").concat(e.cappingFreeLunch)));var s=n-e.lastSuccessfulAd;if(s<0)e.lastSuccessfulAd=0;else if(s<e.cappingMinimumTimeInterval)return a(new Error("VAST call canceled – (".concat(e.cappingMinimumTimeInterval,")ms minimum interval reached")));e.vastParser.getAndParseVAST(t,i).then((function(t){return r(t)})).catch((function(t){return a(t)}))}))}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(t){this.storage.setItem("vast-client-last-successful-ad",t)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(t){this.storage.setItem("vast-client-total-calls",t)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(t){this.storage.setItem("vast-client-total-calls-timeout",t)}}]),t}(),ct=function(t){l(n,t);var e=h(n);function n(t,r,a){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l in i(this,n),(s=e.call(this)).ad=r,s.creative=a,s.variation=o,s.muted=!1,s.impressed=!1,s.skippable=!1,s.trackingEvents={},s.lastPercentage=0,s._alreadyTriggeredQuartiles={},s.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],s.creative.trackingEvents){var d=s.creative.trackingEvents[l];s.trackingEvents[l]=d.slice(0)}return I(s.creative)?s._initLinearTracking():s._initVariationTracking(),t&&s.on("start",(function(){t.lastSuccessfulAd=Date.now()})),s}return r(n,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var t in this.variation.trackingEvents){var e=this.variation.trackingEvents[t];this.trackingEvents[t]?this.trackingEvents[t]=this.trackingEvents[t].concat(e.slice(0)):this.trackingEvents[t]=e.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(t){return"companionAd"===t.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(t){this.assetDuration=t,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.skipDelay||-1;if(-1===n||this.skippable||(n>t?this.emit("skip-countdown",n-t):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var r=Math.round(t/this.assetDuration*100),a=[];if(t>0){a.push("start");for(var s=this.lastPercentage;s<r;s++)a.push("progress-".concat(s+1,"%"));for(var o in a.push("progress-".concat(Math.round(t))),this.quartiles)this.isQuartileReached(o,this.quartiles[o],t)&&(a.push(o),this._alreadyTriggeredQuartiles[o]=!0);this.lastPercentage=r}a.forEach((function(t){e.track(t,{macros:i,once:!0})})),t<this.progress&&this.track("rewind",{macros:i})}this.progress=t}},{key:"isQuartileReached",value:function(t,e,i){var n=!1;return e<=i&&!this._alreadyTriggeredQuartiles[t]&&(n=!0),n}},{key:"setMuted",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.muted!==t&&this.track(t?"mute":"unmute",{macros:e}),this.muted=t}},{key:"setPaused",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.paused!==t&&this.track(t?"pause":"resume",{macros:e}),this.paused=t}},{key:"setFullscreen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fullscreen!==t&&this.track(t?"fullscreen":"exitFullscreen",{macros:e}),this.fullscreen=t}},{key:"setExpand",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expanded!==t&&(this.track(t?"expand":"collapse",{macros:e}),this.track(t?"playerExpand":"playerCollapse",{macros:e})),this.expanded=t}},{key:"setSkipDelay",value:function(t){"number"==typeof t&&(this.skipDelay=t)}},{key:"trackImpression",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,t),this.track("creativeView",{macros:t}))}},{key:"error",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,t,{isCustomCode:e})}},{key:"errorWithCode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.error({ERRORCODE:t},e)}},{key:"complete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("complete",{macros:t})}},{key:"notUsed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("notUsed",{macros:t}),this.trackingEvents=[]}},{key:"otherAdInteraction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("otherAdInteraction",{macros:t})}},{key:"acceptInvitation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("acceptInvitation",{macros:t})}},{key:"adExpand",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adExpand",{macros:t})}},{key:"adCollapse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adCollapse",{macros:t})}},{key:"minimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("minimize",{macros:t})}},{key:"verificationNotExecuted",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!t)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var i=this.ad.adVerifications.find((function(e){return e.vendor===t}));if(!i)throw new Error("No associated verification element found for vendor: ".concat(t));var n=i.trackingEvents;if(n&&n.verificationNotExecuted){var r=n.verificationNotExecuted;this.trackURLs(r,e),this.emit("verificationNotExecuted",{trackingURLTemplates:r})}}},{key:"overlayViewDuration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.ADPLAYHEAD=t,this.track("overlayViewDuration",{macros:e})}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(this.linear?"closeLinear":"close",{macros:t})}},{key:"skip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("skip",{macros:t})}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("loaded",{macros:t})}},{key:"click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,e);var i=this.clickThroughURLTemplate||t,n=o({},e);if(i){this.progress&&(n.ADPLAYHEAD=this.progressFormatted());var r=_.resolveURLTemplates([i],n)[0];this.emit("clickthrough",r)}}},{key:"track",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.macros,n=void 0===i?{}:i,r=e.once,a=void 0!==r&&r;"closeLinear"===t&&!this.trackingEvents[t]&&this.trackingEvents.close&&(t="close");var s=this.trackingEvents[t],o=this.emitAlwaysEvents.indexOf(t)>-1;s?(this.emit(t,{trackingURLTemplates:s}),this.trackURLs(s,n)):o&&this.emit(t,null),a&&(delete this.trackingEvents[t],o&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(t),1))}},{key:"trackURLs",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(i.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(i.ADPLAYHEAD=this.progressFormatted())),this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&this.creative.universalAdId.value&&(i.UNIVERSALADID="".concat(this.creative.universalAdId.idRegistry," ").concat(this.creative.universalAdId.value)),this.ad&&(this.ad.sequence&&(i.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(i.ADTYPE=this.ad.adType),this.ad.adServingId&&(i.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(i.ADCATEGORIES=this.ad.categories.map((function(t){return t.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(i.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),_.track(t,i,e)}},{key:"convertToTimecode",value:function(t){var e=1e3*t,i=Math.floor(e/36e5),n=Math.floor(e/6e4%60),r=Math.floor(e/1e3%60),a=Math.floor(e%1e3);return"".concat(_.leftpad(i,2),":").concat(_.leftpad(n,2),":").concat(_.leftpad(r,2),".").concat(_.leftpad(a,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),n}(Z);t.VASTClient=ut,t.VASTParser=st,t.VASTTracker=ct,Object.defineProperty(t,"__esModule",{value:!0})}(e)}},ft={};function yt(t){var e=ft[t];if(void 0!==e)return e.exports;var i=ft[t]={exports:{}};return mt[t].call(i.exports,i,i.exports,yt),i.exports}yt.d=(t,e)=>{for(var i in e)yt.o(e,i)&&!yt.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},yt.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var vt={};(()=>{yt.d(vt,{h:()=>n});var t=yt(686);const e=function(t,e,i){this.errorCode=t,this.message=e,this.innerError=i};e.prototype.getErrorCode=function(){return this.errorCode},e.prototype.getMessage=function(){return this.message},e.prototype.getInnerError=function(){return this.innerError instanceof Object?this.innerError:null},e.prototype.formatMessage=function(...t){return this.message=function(t,...e){try{e.forEach((function(e,i){t=t.replace(new RegExp("\\{"+i+"}","g"),e)}))}catch(t){}return t}(this.message,t),this},e.prototype.toString=function(){return"AdError "+this.getErrorCode()+": "+this.getMessage()+(null!=this.getInnerError()?" Caused by: "+this.getInnerError():"")};const i=e,n=function(t){if(!(t instanceof Element||t instanceof HTMLDocument))throw new Error("ad container is not defined");this._adContainer=t,this._slot=null,this._videoSlot=null,this.createSlot(),this.EVENTS={AdsManagerLoaded:"AdsManagerLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog",AllAdsCompleted:"AllAdsCompleted"},this._eventCallbacks={},this._creativeEventCallbacks={},this._attributes={width:300,height:154,viewMode:"normal",desiredBitrate:268,duration:10,remainingTime:10,currentTime:0,volume:0,version:"1.1.3"},this._quartileEvents=[{event:"AdImpression",value:0},{event:"AdVideoStart",value:0},{event:"AdVideoFirstQuartile",value:25},{event:"AdVideoMidpoint",value:50},{event:"AdVideoThirdQuartile",value:75},{event:"AdVideoComplete",value:100}],this._nextQuartileIndex=0,this._defaultEventCallbacks={AdImpression:this.onAdImpression.bind(this),AdVideoStart:this.onAdVideoStart.bind(this),AdVideoFirstQuartile:this.onAdVideoFirstQuartile.bind(this),AdVideoMidpoint:this.onAdVideoMidpoint.bind(this),AdVideoThirdQuartile:this.onAdVideoThirdQuartile.bind(this),AdVideoComplete:this.onAdVideoComplete.bind(this)},this._options={autoplay:!0,muted:!0,vastLoadTimeout:23e3,loadVideoTimeout:8e3,withCredentials:!1,wrapperLimit:10,resolveAll:!0},this.ERROR_CODES={ADS_REQUEST_NETWORK_ERROR:1012,FAILED_TO_REQUEST_ADS:1005,UNKNOWN_AD_RESPONSE:1010,VAST_ASSET_NOT_FOUND:1007,VAST_EMPTY_RESPONSE:1009,VAST_LINEAR_ASSET_MISMATCH:403,VAST_LOAD_TIMEOUT:301,VAST_MEDIA_LOAD_TIMEOUT:402,VIDEO_PLAY_ERROR:400,VPAID_ERROR:901},this.ERROR_MESSAGES={ADS_REQUEST_ERROR:"Unable to request ads from server. Cause: {0}.",ADS_REQUEST_NETWORK_ERROR:"Unable to request ads from server due to network error.",FAILED_TO_REQUEST_ADS:"The was a problem requesting ads from the server.",NO_ADS_FOUND:"The response does not contain any valid ads.",UNKNOWN_AD_RESPONSE:"The ad response was not understood and cannot be parsed.",VAST_ASSET_NOT_FOUND:"No assets were found in the VAST ad response.",VAST_EMPTY_RESPONSE:"The VAST response document is empty.",VAST_LINEAR_ASSET_MISMATCH:"Linear assets were found in the VAST ad response, but none of them matched the player's capabilities.",VAST_LOAD_TIMEOUT:"Ad request reached a timeout.",VAST_MEDIA_LOAD_TIMEOUT:"VAST media file loading reached a timeout of {0} seconds.",VIDEO_PLAY_ERROR:"There was an error playing the video ad.",VPAID_CREATIVE_ERROR:"An unexpected error occurred within the VPAID creative. Refer to the inner error for more info."},this.ERRORS={VAST_EMPTY_RESPONSE:new i(this.ERROR_CODES.VAST_EMPTY_RESPONSE,this.ERROR_MESSAGES.VAST_EMPTY_RESPONSE),VAST_ASSET_NOT_FOUND:new i(this.ERROR_CODES.VAST_ASSET_NOT_FOUND,this.ERROR_MESSAGES.VAST_ASSET_NOT_FOUND),VAST_LINEAR_ASSET_MISMATCH:new i(this.ERROR_CODES.VAST_LINEAR_ASSET_MISMATCH,this.ERROR_MESSAGES.VAST_LINEAR_ASSET_MISMATCH),VAST_LOAD_TIMEOUT:new i(this.ERROR_CODES.VAST_LOAD_TIMEOUT,this.ERROR_MESSAGES.VAST_LOAD_TIMEOUT),VAST_MEDIA_LOAD_TIMEOUT:new i(this.ERROR_CODES.VAST_MEDIA_LOAD_TIMEOUT,this.ERROR_MESSAGES.VAST_MEDIA_LOAD_TIMEOUT),VIDEO_PLAY_ERROR:new i(this.ERROR_CODES.VIDEO_PLAY_ERROR,this.ERROR_MESSAGES.VIDEO_PLAY_ERROR)},this._vastClient=null,this._vastParser=null,this._vastTracker=null,this._ad=null,this._adPod=null,this._creative=null,this._mediaFiles=null,this._mediaFileIndex=0,this._mediaFile=null,this._isVPAID=!1,this._vpaidCreative=null,this._vastMediaLoadTimeoutId=null,this._vpaidProgressCounter=null,this.SUPPORTED_CREATIVE_VPAID_VERSION_MIN=2,this._hasLoaded=!1,this._hasError=!1,this._hasImpression=!1,this._hasStarted=!1};n.prototype.createSlot=function(){this._slot=document.createElement("div"),this._slot.style.position="absolute",this._slot.style.display="none",this._adContainer.appendChild(this._slot),this.createVideoSlot()},n.prototype.removeSlot=function(){this._slot.parentNode.removeChild(this._slot),this.createSlot()},n.prototype.showSlot=function(){""===this._videoSlot.src&&this.hideVideoSlot(),this._slot.style.display="block"},n.prototype.resizeSlot=function(t,e){this._slot.style.width=t+"px",this._slot.style.height=e+"px"},n.prototype.createVideoSlot=function(){this._videoSlot=document.createElement("video"),this._videoSlot.setAttribute("webkit-playsinline",!0),this._videoSlot.setAttribute("playsinline",!0),this._videoSlot.style.width="100%",this._videoSlot.style.height="100%",this._videoSlot.style.backgroundColor="rgb(0, 0, 0)",this._slot.appendChild(this._videoSlot)},n.prototype.hideVideoSlot=function(){this._videoSlot.style.display="none"},n.prototype.stopVASTMediaLoadTimeout=function(){this._vastMediaLoadTimeoutId&&(clearTimeout(this._vastMediaLoadTimeoutId),this._vastMediaLoadTimeoutId=null)},n.prototype.startVASTMediaLoadTimeout=function(){this.stopVASTMediaLoadTimeout(),this._vastMediaLoadTimeoutId=setTimeout((()=>{this.onAdError(this.ERRORS.VAST_MEDIA_LOAD_TIMEOUT.formatMessage(this._options.loadVideoTimeout))}),this._options.loadVideoTimeout)},n.prototype.updateVPAIDProgress=function(){this._attributes.remainingTime=this._isCreativeFunctionInvokable("getAdRemainingTime")?this._vpaidCreative.getAdRemainingTime():-1,isNaN(this._attributes.remainingTime)||1===this._attributes.remainingTime||(this._attributes.currentTime=this._attributes.duration-this._attributes.remainingTime,this._vastTracker.setProgress(this._attributes.currentTime))},n.prototype.startVPAIDProgress=function(){this.stopVPAIDProgress(),this._vpaidProgressCounter=setInterval((()=>{this._isVPAID&&this._vpaidCreative&&this._vastTracker?this.updateVPAIDProgress():this.stopVPAIDProgress()}),1e3)},n.prototype.stopVPAIDProgress=function(){this._vpaidProgressCounter&&(clearInterval(this._vpaidProgressCounter),this._vpaidProgressCounter=null)},n.prototype.addEventListener=function(t,e,i){const n=e.bind(i);this._eventCallbacks[t]=n},n.prototype.removeEventListener=function(t){this._eventCallbacks[t]=null},n.prototype.onAdsManagerLoaded=function(){this.EVENTS.AdsManagerLoaded in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdsManagerLoaded]&&this._eventCallbacks[this.EVENTS.AdsManagerLoaded]()},n.prototype.onAdLoaded=function(){this.stopVASTMediaLoadTimeout(),this.EVENTS.AdLoaded in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdLoaded]&&this._eventCallbacks[this.EVENTS.AdLoaded](this._creative)},n.prototype.onAdDurationChange=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&(this._attributes.duration=this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():-1,-1!==this._attributes.duration&&this._vastTracker.setDuration(this._attributes.duration)),this.EVENTS.AdDurationChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdDurationChange]&&this._eventCallbacks[this.EVENTS.AdDurationChange]()},n.prototype.onAdSizeChange=function(){this.EVENTS.AdSizeChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdSizeChange]&&this._eventCallbacks[this.EVENTS.AdSizeChange]()},n.prototype.onAdStarted=function(){this.showSlot(),this.EVENTS.AdStarted in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdStarted]&&this._eventCallbacks[this.EVENTS.AdStarted]()},n.prototype.onAdVideoStart=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoStart in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoStart]&&this._eventCallbacks[this.EVENTS.AdVideoStart]()},n.prototype.onAdStopped=function(){this.EVENTS.AdStopped in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdStopped]&&this._eventCallbacks[this.EVENTS.AdStopped](),this.destroyAd()},n.prototype.onAdSkipped=function(){this.EVENTS.AdSkipped in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdSkipped]&&this._eventCallbacks[this.EVENTS.AdSkipped](),this.destroyAd()},n.prototype.onAdVolumeChange=function(){this.EVENTS.AdVolumeChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVolumeChange]&&this._eventCallbacks[this.EVENTS.AdVolumeChange]()},n.prototype.onAdImpression=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&(this._hasImpression||(this._attributes.duration=this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():-1,-1!==this._attributes.duration&&this._vastTracker.setDuration(this._attributes.duration),this._vastTracker.trackImpression(),this.startVPAIDProgress(),this._hasImpression=!0)),this.EVENTS.AdImpression in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdImpression]&&this._eventCallbacks[this.EVENTS.AdImpression]()},n.prototype.onAdClickThru=function(t,e,i){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this._vastTracker.click(),this.EVENTS.AdClickThru in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdClickThru]&&this._eventCallbacks[this.EVENTS.AdClickThru](t,e,i)},n.prototype.onAdVideoFirstQuartile=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoFirstQuartile in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoFirstQuartile]&&this._eventCallbacks[this.EVENTS.AdVideoFirstQuartile]()},n.prototype.onAdVideoMidpoint=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoMidpoint in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoMidpoint]&&this._eventCallbacks[this.EVENTS.AdVideoMidpoint]()},n.prototype.onAdVideoThirdQuartile=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoThirdQuartile in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoThirdQuartile]&&this._eventCallbacks[this.EVENTS.AdVideoThirdQuartile]()},n.prototype.onAdPaused=function(){this._vastTracker&&this._vastTracker.setPaused(!0),this.EVENTS.AdPaused in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdPaused]&&this._eventCallbacks[this.EVENTS.AdPaused]()},n.prototype.onAdPlaying=function(){this._vastTracker&&this._vastTracker.setPaused(!1),this.EVENTS.AdPlaying in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdPlaying]&&this._eventCallbacks[this.EVENTS.AdPlaying]()},n.prototype.onAdVideoComplete=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this._vastTracker.complete(),this.EVENTS.AdVideoComplete in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoComplete]&&this._eventCallbacks[this.EVENTS.AdVideoComplete]()},n.prototype.onAllAdsCompleted=function(){this.EVENTS.AllAdsCompleted in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AllAdsCompleted]&&this._eventCallbacks[this.EVENTS.AllAdsCompleted]()},n.prototype.onAdError=function(t){this._hasError=!0,this.stopVASTMediaLoadTimeout(),this.stopVPAIDProgress(),this.EVENTS.AdError in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdError]&&this._eventCallbacks[this.EVENTS.AdError](t)},n.prototype.onAdLog=function(t){this.EVENTS.AdLog in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdLog]&&this._eventCallbacks[this.EVENTS.AdLog](t)},n.prototype.processVASTResponse=function(e){const i=e.ads;0!=i.length?(i.length>1?(this._adPod=i.sort((function(t,e){let i=t.sequence,n=e.sequence;return i===n?0:null===i?1:null===n||i<n?-1:i>n?1:0})),this._ad=i[0]):this._ad=i[0],this._ad&&(this._creative=i[0].creatives.filter((t=>"linear"===t.type))[0],this._creative&&(0!=this._creative.mediaFiles.length?(this._mediaFiles=this._creative.mediaFiles.filter((t=>this.canPlayVideoType(t.mimeType)||"application/javascript"===t.mimeType?t:void 0)),this._mediaFiles.sort((function(t,e){let i=t.height,n=e.height;return i<n?-1:i>n?1:0})),this._mediaFiles&&0!=this._mediaFiles.length?(this._vastTracker=new t.VASTTracker(null,this._ad,this._creative),this._vastTracker.load(),this.onAdsManagerLoaded()):this.onAdError(this.ERRORS.VAST_LINEAR_ASSET_MISMATCH)):this.onAdError(this.ERRORS.VAST_ASSET_NOT_FOUND)))):this.onAdError(this.ERRORS.VAST_EMPTY_RESPONSE)},n.prototype.requestAds=function(e,i={}){Object.assign(this._options,i);const n={timeout:this._options.vastLoadTimeout,withCredentials:this._options.withCredentials,wrapperLimit:this._options.wrapperLimit,resolveAll:this._options.resolveAll};if(this.destroy(),e&&"string"==typeof e){let i=!1;try{new URL(e),i=!0}catch(t){}if(i)this._vastClient=new t.VASTClient,this._vastClient.get(e,n).then((t=>{this.processVASTResponse(t)})).catch((t=>{this.onAdError(t.message)}));else{const i=(new window.DOMParser).parseFromString(e,"text/xml");this._vastParser=new t.VASTParser,this._vastParser.parseVAST(i,n).then((t=>{this.processVASTResponse(t)})).catch((t=>{this.onAdError(t.message)}))}}else this.onAdError("VAST URL/XML is empty")},n.prototype.canPlayVideoType=function(t){return!!("video/3gpp"===t&&this.supportsThreeGPVideo()||"video/webm"===t&&this.supportsWebmVideo()||"video/ogg"===t&&this.supportsOggTheoraVideo()||"video/mp4"===t&&this.supportsH264BaselineVideo())},n.prototype.supportsVideo=function(){return!!document.createElement("video").canPlayType},n.prototype.supportsH264BaselineVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},n.prototype.supportsOggTheoraVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/ogg; codecs="theora, vorbis"')},n.prototype.supportsWebmVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/webm; codecs="vp8, vorbis"')},n.prototype.supportsThreeGPVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/3gpp; codecs="mp4v.20.8, samr"')},n.prototype.handshakeVersion=function(t){return this._vpaidCreative.handshakeVersion(t)},n.prototype._isCreativeFunctionInvokable=function(t){return!!this._vpaidCreative&&(t=this._vpaidCreative[t])&&"function"==typeof t},n.prototype.checkVPAIDInterface=function(t){for(var e={passed:!0,missingInterfaces:""},i=t.length-1;0<=i;i--)this._isCreativeFunctionInvokable(t[i])||(e.passed=!1,e.missingInterfaces+=t[i]+" ");return e},n.prototype.setCallbacksForCreative=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this._vpaidCreative.subscribe(t[i],i,e)},n.prototype.removeCallbacksForCreative=function(t){for(var e in t)t.hasOwnProperty(e)&&this._vpaidCreative.unsubscribe(e)},n.prototype.creativeAssetLoaded=function(){var t,e=this;if((t=e.checkVPAIDInterface("handshakeVersion initAd startAd stopAd subscribe unsubscribe getAdLinear".split(" "))).passed||e.onAdError("Missing interfaces in the VPAID creative: "+t.missingInterfaces),t.passed&&function(){var t=e.handshakeVersion(e.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1));return t?!(parseFloat(t)<e.SUPPORTED_CREATIVE_VPAID_VERSION_MIN&&(e.onAdError("Only support creatives with VPAID version >= "+e.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1)),1)):(e.onAdError("Cannot get VPAID version from the creative"),!1)}()){this._creativeEventCallbacks={AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:this.onAdSkipped,AdLoaded:this.onAdLoaded,AdSizeChange:this.onAdSizeChange,AdDurationChange:this.onAdDurationChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog},this.setCallbacksForCreative(this._creativeEventCallbacks,this);const t=this._attributes.width,e=this._attributes.height,i={AdParameters:this._creative.adParameters},n={slot:this._slot,videoSlot:this._videoSlot,videoSlotCanAutoPlay:!0};this.startVASTMediaLoadTimeout(),this._vpaidCreative.initAd(t,e,this._attributes.viewMode,this._attributes.desiredBitrate,i,n)}},n.prototype.loadCreativeAsset=function(t){const e=document.getElementById("vpaidIframe"),i=document.createElement("iframe");i.id="vpaidIframe",null==e?this._adContainer.appendChild(i):this._adContainer.replaceChild(i,e),i.width=0,i.height=0,i.style.display="none",i.setAttribute("allowfullscreen",""),i.setAttribute("sandbox","allow-scripts allow-same-origin"),i.setAttribute("allow","autoplay;"),i.tabIndex=-1,i.contentWindow.document.open(),i.contentWindow.document.write('<script type="text/javascript" src="'+t+'"> <\/script>'),i.contentWindow.document.close(),this._loadIntervalTimer=setInterval((()=>{let t=document.getElementById("vpaidIframe").contentWindow.getVPAIDAd;t&&"function"==typeof t&&(clearInterval(this._loadIntervalTimer),t=t(),void 0===t||null==t||(this._vpaidCreative=t,this.creativeAssetLoaded()))}),200)},n.prototype.removeCreativeAsset=function(){const t=document.getElementById("vpaidIframe");t&&t.parentNode.removeChild(t)},n.prototype.destroyAd=function(){this.destroy(),this.onAllAdsCompleted()},n.prototype.isCreativeExists=function(){return this._creative&&0!=this._creative.mediaFiles.length},n.prototype.init=function(t,e,i){this.isCreativeExists()?(this._mediaFileIndex=this._mediaFiles.findIndex((function(t){return t.height>=e})),-1!=this._mediaFileIndex?this._mediaFile=this._mediaFiles[this._mediaFileIndex]:this._mediaFile=this._mediaFiles[this._mediaFiles.length-1],this._mediaFile&&("application/javascript"===this._mediaFile.mimeType&&(this._isVPAID=!0),this._attributes.width=t,this._attributes.height=e,this._attributes.viewMode=i,this.resizeSlot(this._attributes.width,this._attributes.height),this._videoSlot.addEventListener("error",(()=>{this.onAdError(this.ERRORS.VIDEO_PLAY_ERROR)}),!1),this._isVPAID?this.loadCreativeAsset(this._mediaFile.fileURL):(this._slot.addEventListener("click",(()=>{!this._isVPAID&&this._vastTracker&&this._vastTracker.click()})),this._videoSlot.addEventListener("canplay",(()=>{})),this._videoSlot.addEventListener("volumechange",(t=>{this._vastTracker&&this._vastTracker.setMuted(t.target.muted)})),this._videoSlot.addEventListener("timeupdate",(t=>{if(this.isCreativeExists()){if(this._nextQuartileIndex>=this._quartileEvents.length)return;const e=100*t.target.currentTime/t.target.duration;if(e>=this._quartileEvents[this._nextQuartileIndex].value){const t=this._quartileEvents[this._nextQuartileIndex].event;this._defaultEventCallbacks[t](),this._nextQuartileIndex+=1}e>=0&&(this._hasImpression||(this._vastTracker&&this._vastTracker.trackImpression(),this._hasImpression=!0)),this._vastTracker&&this._vastTracker.setProgress(t.target.currentTime),t.target.duration>0&&(this._attributes.remainingTime=t.target.duration-t.target.currentTime)}}),!0),this._videoSlot.addEventListener("loadedmetadata",(t=>{this._attributes.duration=t.target.duration,this._vastTracker&&this._vastTracker.setDuration(t.target.duration),this.onAdDurationChange()})),this._videoSlot.addEventListener("ended",(()=>{this._vastTracker&&this._vastTracker.complete(),this.onAdStopped()})),this._videoSlot.setAttribute("src",this._mediaFile.fileURL),this.onAdLoaded()),this._vastTracker&&this._vastTracker.on("clickthrough",(t=>{this._isVPAID||this.onAdClickThru(t);const e=window.open(t,"_blank");void 0!==e?e.focus():window.location.href=t})))):this.onAdError("")},n.prototype.start=function(){this.isCreativeExists()&&(this._videoSlot.muted=this._options.muted,this._isVPAID?this._isCreativeFunctionInvokable("startAd")&&this._vpaidCreative.startAd():(this._videoSlot.load(),this._videoSlot.play(),this.onAdStarted()))},n.prototype.getDuration=function(){return this.isCreativeExists()&&this._attributes.duration},n.prototype.pause=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("pauseAd")&&this._vpaidCreative.pauseAd():(this._videoSlot.pause(),this.onAdPaused()))},n.prototype.resume=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("resumeAd")&&this._vpaidCreative.resumeAd():(this._videoSlot.play(),this.onAdPlaying()))},n.prototype.stop=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("stopAd")&&this._vpaidCreative.stopAd():this.onAdStopped())},n.prototype.skip=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("skipAd")&&this._vpaidCreative.skipAd():this.onAdSkipped())},n.prototype.resize=function(t,e,i){this.isCreativeExists()&&(this._attributes.width=t,this._attributes.height=e,this._attributes.viewMode=i,this.resizeSlot(this._attributes.width,this._attributes.height),this._isVPAID?this._isCreativeFunctionInvokable("resizeAd")&&this._vpaidCreative.resizeAd(t,e,i):this.onAdSizeChange())},n.prototype.getVolume=function(){if(this.isCreativeExists())return this._isVPAID?this._isCreativeFunctionInvokable("getAdVolume")?this._vpaidCreative.getAdVolume():-1:this._videoSlot.volume},n.prototype.setVolume=function(t){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("setAdVolume")&&this._vpaidCreative.setAdVolume(t):t!==this._videoSlot.volume&&(this._attributes.volume=t,this._videoSlot.volume=t,this.onAdVolumeChange()))},n.prototype.getRemainingTime=function(){if(this.isCreativeExists())return this._isVPAID?this._isCreativeFunctionInvokable("getAdRemainingTime")?this._vpaidCreative.getAdRemainingTime():-1:this._attributes.remainingTime},n.prototype.collapse=function(){this.isCreativeExists()&&this._isVPAID&&this._isCreativeFunctionInvokable("collapseAd")&&this._vpaidCreative.collapseAd()},n.prototype.expand=function(){this.isCreativeExists()&&this._isVPAID&&this._isCreativeFunctionInvokable("expandAd")&&this._vpaidCreative.expandAd()},n.prototype.destroy=function(){this.isCreativeExists(),this.stopVASTMediaLoadTimeout(),this.stopVPAIDProgress(),this._isVPAID&&(this.removeCallbacksForCreative(this._creativeEventCallbacks),this.removeCreativeAsset()),this._nextQuartileIndex=0,this._isVPAID=!1,this._hasLoaded=!1,this._hasError=!1,this._hasImpression=!1,this._hasStarted=!1,this._ad=null,this._creative=null,this._mediaFile=null,this._vpaidCreative=null,this._vastTracker=null,this.removeSlot()},n.prototype.getVersion=function(){return this._attributes.version}})();var bt=vt.h;const Tt=function(t,e,i){this._player=t,this._adContainer=e,this._adsManager=null,this._options=Object.assign({desktop:{inView:{vastUrl:null,interval:5e3,retryInterval:1e4},notInView:{vastUrl:null,interval:15e3,retryInterval:1e4}},mobile:{inView:{vastUrl:null,interval:5e3,retryInterval:1e4},notInView:{vastUrl:null,interval:15e3,retryInterval:1e4}},gdpr:!1,usp:!1,schain:null,customMacros:{}},i),this.lastAdHasError=!1,this.lastAdErrorRuntime=0,this.lastAdRequestRuntime=0,this.lastAdCompleteRuntime=0,this.isAdPlaying=!1,this._options.gdpr&&ut(),this._options.usp&&gt(),this._adContainer&&this.initAdsManager()};Tt.prototype.getInterval=function(){if(this.lastAdHasError){const t=1e3*this.getRetryInterval(),e=this.lastAdErrorRuntime-this.lastAdRequestRuntime;let i=0;return e<t&&(i=t-e),v(i)}return this._player.visible()?v(this.getInViewInterval()):v(this.getNotInViewInterval())},Tt.prototype.getRetryInterval=function(){return this._player.visible()?v(this.getInViewRetryInterval()):v(this.getNotInViewRetryInterval())},Tt.prototype.getInViewInterval=function(){return h?this._options.mobile.inView.interval:this._options.desktop.inView.interval},Tt.prototype.getNotInViewInterval=function(){return h?this._options.mobile.notInView.interval:this._options.desktop.notInView.interval},Tt.prototype.getInViewRetryInterval=function(){return h?this._options.mobile.inView.retryInterval:this._options.desktop.inView.retryInterval},Tt.prototype.getNotInViewRetryInterval=function(){return h?this._options.mobile.notInView.retryInterval:this._options.desktop.notInView.retryInterval},Tt.prototype.getInViewVastUrl=function(){return h?this._options.mobile.inView.vastUrl:this._options.desktop.inView.vastUrl},Tt.prototype.getNotInViewVastUrl=function(){return h?this._options.mobile.notInView.vastUrl:this._options.desktop.notInView.vastUrl},Tt.prototype.getVastUrl=function(){return this._player.visible()?this.getInViewVastUrl():this.getNotInViewVastUrl()},Tt.prototype.initAdsManager=function(){this._adsManager=new bt(this._adContainer);const t=t=>{this.lastAdHasError=!0,this.isAdPlaying=!1,this.lastAdErrorRuntime=y(),this.lastAdCompleteRuntime=this.lastAdErrorRuntime,this._adsManager&&this._adsManager.destroy(),this._player._el.classList.remove("ads"),this._player.paused()&&this._player.play()},e=()=>{this._player._el.classList.remove("ads"),this._player.ended()||this._player.play()};this._adsManager.addEventListener("AdError",t),this._adsManager.addEventListener("AdsManagerLoaded",(()=>{const e=this._player._videoSlot.clientWidth,i=this._player._videoSlot.clientHeight,n=this.getViewMode();try{this._adsManager.init(e,i,n)}catch(e){t()}})),this._adsManager.addEventListener("AdLoaded",(e=>{if("linear"===e.type)try{this._adsManager.start()}catch(e){t()}})),this._adsManager.addEventListener("AdStarted",(()=>{this._player._el.classList.add("ads"),this._player.paused()||this._player.pause()})),this._adsManager.addEventListener("AdDurationChange",(()=>{})),this._adsManager.addEventListener("AdSizeChange",(()=>{})),this._adsManager.addEventListener("AdVideoStart",(()=>{})),this._adsManager.addEventListener("AdImpression",(()=>{})),this._adsManager.addEventListener("AdVideoFirstQuartile",(()=>{})),this._adsManager.addEventListener("AdVideoMidpoint",(()=>{})),this._adsManager.addEventListener("AdVideoThirdQuartile",(()=>{})),this._adsManager.addEventListener("AdPaused",(()=>{})),this._adsManager.addEventListener("AdPlaying",(()=>{})),this._adsManager.addEventListener("AdVideoComplete",(()=>{})),this._adsManager.addEventListener("AdStopped",e),this._adsManager.addEventListener("AdSkipped",e),this._adsManager.addEventListener("AdClickThru",((t,e)=>{})),this._adsManager.addEventListener("AllAdsCompleted",(()=>{this.lastAdHasError=!1,this.isAdPlaying=!1,this.lastAdCompleteRuntime=y()})),((t,e=200)=>{e=parseInt(e),rt.push({callback:t,interval:e})})(this.checkIfPlayAd.bind(this))},Tt.prototype.checkIfPlayAd=function(){c&&this._player.fullscreen()||y()-this.lastAdCompleteRuntime>=1e3*this.getInterval()&&!this.isAdPlaying&&!this._player.ended()&&!this._player.paused()&&this.playAd()},Tt.prototype.getViewMode=function(){return this._player.fullscreen()?"fullscreen":"normal"},Tt.prototype.getSChain=function(){return function(t){if(!(t&&"object"==typeof t&&t.hasOwnProperty("ver")&&t.hasOwnProperty("complete")&&t.hasOwnProperty("nodes")))return"";const e="asi sid hp rid name domain".split(" ");return t.ver+","+t.complete+"!"+t.nodes.map((function(t){return e.map((function(e){return t[e]?encodeURIComponent(t[e]):""})).join(",")})).join("!")}(this._options.schain)},Tt.prototype.populateCustomMacros=function(t){return this._options.customMacros&&Object.getOwnPropertyNames(this._options.customMacros).forEach((e=>{if(-1!=t.indexOf("["+e+"]"))try{const i="function"==typeof this._options.customMacros[e],n=encodeURIComponent(i?this._options.customMacros[e]():this._options.customMacros[e]);t=t.replace(new RegExp(`(?:\\[|%%)(${e})(?:\\]|%%)`,"g"),n),i&&(this._options.customMacros[e]=n)}catch(t){}})),t},Tt.prototype.getMacros=function(){return{CACHEBUSTER:Math.floor(1e6*Math.random()),TIMESTAMP:Date.now(),HEIGHT:this._player._videoSlot.clientHeight,WIDTH:this._player._videoSlot.clientWidth,URL:encodeURIComponent(E()),DOMAIN:k(E()),USER_AGENT:encodeURIComponent(navigator.userAgent),DEVICE:h?2:1,DNT:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,UTM:"",DURATION:this._player.getDuration(),IS_VISIBLE:this._player.visible()?1:0,GDPR:this._options.gdpr&&st?1:0,GDPR_CONSENT:this._options.gdpr?"string"!=typeof ot?"":ot:"",US_PRIVACY:this._options.usp?"string"!=typeof ct?"":ct:"",SCHAIN:this.getSChain(),ABC:encodeURIComponent(this._player.getVariantName())}},Tt.prototype.playAd=function(){this._adsManager&&(this.isAdPlaying=!0,this.lastAdRequestRuntime=y(),this._adsManager.requestAds(this.populateCustomMacros(function(t,e){let i=t;for(const t in e){const n=e[t];i=i.replace(new RegExp(`(?:\\[|%%)(${t})(?:\\]|%%)`,"g"),n)}return i}(this.getVastUrl(),this.getMacros()))))},Tt.prototype.resizeAd=function(t,e){this._adsManager&&this._adsManager.resize(t,e,this.getViewMode())};const At=Tt;class wt{constructor(){this.listeners={}}on(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}off(t,e){if(!this.listeners[t])return!1;const i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1}trigger(t){const e=this.listeners[t];if(e)if(2===arguments.length){const t=e.length;for(let i=0;i<t;++i)e[i].call(this,arguments[1])}else{const t=Array.prototype.slice.call(arguments,1),i=e.length;for(let n=0;n<i;++n)e[n].apply(this,t)}}dispose(){this.listeners={}}pipe(t){this.on("data",(function(e){t.push(e)}))}}function St(t,e){return St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},St(t,e)}function _t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,St(t,e)}var Et=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,n=0;n<i;++n)e[n].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=e.length,s=0;s<a;++s)e[s].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();function Lt(){return Lt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Lt.apply(this,arguments)}var Ct=i(11),It=i.n(Ct);function kt(t){for(var e,i=(e=t,It().atob?It().atob(e):Buffer.from(e,"base64").toString("binary")),n=new Uint8Array(i.length),r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}var Mt=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return _t(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(Et),Nt=String.fromCharCode(9),Dt=function(t){var e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),i={};return e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),i},Rt=function(t){for(var e,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((e=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),n[e[0]]=e[1]);return n},xt=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}_t(e,t);var i=e.prototype;return i.push=function(t){var e,i,n=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,i){var n=i(t);return n===t?e:e.concat([n])}),[t]).forEach((function(t){for(var r=0;r<n.customParsers.length;r++)if(n.customParsers[r].call(n,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void n.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void n.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void n.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(t))return i=Lt(Dt(e[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},e[1]){var a=Rt(e[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=Dt(a.BYTERANGE))}n.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=Rt(e[1]),i.attributes.RESOLUTION){var s=i.attributes.RESOLUTION.split("x"),o={};s[0]&&(o.width=parseInt(s[0],10)),s[1]&&(o.height=parseInt(s[1],10)),i.attributes.RESOLUTION=o}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}n.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=Rt(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))n.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void n.trigger("data",i);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=Rt(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void n.trigger("data",i);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=Rt(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void n.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void n.trigger("data",i);if((e=/^#EXT-X-SKIP:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"skip"}).attributes=Rt(e[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(Nt)),void n.trigger("data",i);if((e=/^#EXT-X-PART:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"part"}).attributes=Rt(e[1]),["DURATION"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=Dt(i.attributes.BYTERANGE)),void n.trigger("data",i);if((e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"server-control"}).attributes=Rt(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=/YES/.test(i.attributes[t]))})),void n.trigger("data",i);if((e=/^#EXT-X-PART-INF:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"part-inf"}).attributes=Rt(e[1]),["PART-TARGET"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseFloat(i.attributes[t]))})),void n.trigger("data",i);if((e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"preload-hint"}).attributes=Rt(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(i.attributes.hasOwnProperty(t)){i.attributes[t]=parseInt(i.attributes[t],10);var e="BYTERANGE-LENGTH"===t?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[e]=i.attributes[t],delete i.attributes[t]}})),void n.trigger("data",i);if((e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t))&&e[1])return(i={type:"tag",tagType:"rendition-report"}).attributes=Rt(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){i.attributes.hasOwnProperty(t)&&(i.attributes[t]=parseInt(i.attributes[t],10))})),void n.trigger("data",i);n.trigger("data",{type:"tag",data:t.slice(4)})}}}else n.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var e=this,i=t.expression,n=t.customType,r=t.dataParser,a=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push((function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:r(t),customType:n,segment:a}),!0}))},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push((function(t){return e.test(t)?i(t):t}))},e}(Et),Ut=function(t){var e={};return Object.keys(t).forEach((function(i){var n;e[(n=i,n.toLowerCase().replace(/-(\w)/g,(function(t){return t[1].toUpperCase()})))]=t[i]})),e},Pt=function(t){var e=t.serverControl,i=t.targetDuration,n=t.partTargetDuration;if(e){var r="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",o=i&&3*i,l=n&&2*n;i&&!e.hasOwnProperty(a)&&(e[a]=o,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+o+")."})),o&&e[a]<o&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+e[a]+") to targetDuration * 3 ("+o+")"}),e[a]=o),n&&!e.hasOwnProperty(s)&&(e[s]=3*n,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+e[s]+")."})),n&&e[s]<l&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+e[s]+") to partTargetDuration * 2 ("+l+")."}),e[s]=l)}},Ot=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new Mt,e.parseStream=new xt,e.lineStream.pipe(e.parseStream);var i,n,r=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e),a=[],s={},o=!1,l=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var c=0,h=0;return e.on("end",(function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&i&&(s.map=i),!s.key&&n&&(s.key=n),s.timeline||"number"!=typeof u||(s.timeline=u),e.manifest.preloadSegment=s)})),e.parseStream.on("data",(function(t){var e,p;({tag:function(){({version:function(){t.version&&(this.manifest.version=t.version)},"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(s.byterange=e,e.length=t.length,"offset"in t||(t.offset=c)),"offset"in t&&(s.byterange=e,e.offset=t.offset),c=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes});if("com.microsoft.playready"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:t.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:kt(t.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(n.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,u=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange),n&&(i.key=n)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||d,t.attributes?(s.attributes||(s.attributes={}),Lt(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(p={default:/yes/i.test(t.attributes.DEFAULT)}).default?p.autoselect=!0:p.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(p.language=t.attributes.LANGUAGE),t.attributes.URI&&(p.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(p.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(p.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(p.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=p}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,Pt.call(this,this.manifest))},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=t.data},"cue-out-cont":function(){s.cueOutCont=t.data},"cue-in":function(){s.cueIn=t.data},skip:function(){this.manifest.skip=Ut(t.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part:function(){var e=this;o=!0;var i=this.manifest.segments.length,n=Ut(t.attributes);s.parts=s.parts||[],s.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=h),h=n.byterange.offset+n.byterange.length);var r=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+i,t.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(t,i){t.hasOwnProperty("lastPart")||e.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var e=this.manifest.serverControl=Ut(t.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Pt.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var e=this.manifest.segments.length,i=Ut(t.attributes),n=i.type&&"PART"===i.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=n?h:0,n&&(h=i.byterange.offset+i.byterange.length)));var r=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+e,t.attributes,["TYPE","URI"]),i.type)for(var a=0;a<s.preloadHints.length-1;a++){var o=s.preloadHints[a];o.type&&(o.type===i.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+e+" has the same TYPE "+i.type+" as preload hint #"+a}))}},"rendition-report":function(){var e=Ut(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);var i=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];o&&n.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+i,t.attributes,n)},"part-inf":function(){this.manifest.partInf=Ut(t.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Pt.call(this,this.manifest)}}[t.tagType]||l).call(r)},uri:function(){s.uri=t.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=u,i&&(s.map=i),h=0,s={}},comment:function(){},custom:function(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)})),e}_t(e,t);var i=e.prototype;return i.warnOnMissingAttributes_=function(t,e,i){var n=[];i.forEach((function(t){e.hasOwnProperty(t)||n.push(t)})),n.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+n.join(", ")})},i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n"),this.trigger("end")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(Et);i(328);const Vt=function(t,e){const i=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{};let n=!1;for(const t in i){for(const r in i[t])if(n=e(i[t][r]),n)break;if(n)break}return!!n},jt={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/};const zt=(t,e)=>`${t}-${e}`,Bt=({playlist:t,uri:e,id:i})=>{t.id=i,t.playlistErrors_=0,e&&(t.uri=e),t.attributes=t.attributes||{}},Ft=(t,e)=>{t.mediaGroups&&["AUDIO","SUBTITLES"].forEach((i=>{if(t.mediaGroups[i])for(const n in t.mediaGroups[i])for(const r in t.mediaGroups[i][n]){const a=t.mediaGroups[i][n][r];e(a,i,n,r)}}))},Gt=(t,e)=>{t.uri=e;for(let e=0;e<t.playlists.length;e++)if(!t.playlists[e].uri){const i=`placeholder-uri-${e}`;t.playlists[e].uri=i}const i=(t=>{if(!t||!t.playlists||!t.playlists.length)return Vt(t,(t=>t.playlists&&t.playlists.length||t.uri));for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e],n=i.attributes&&i.attributes.CODECS;if((!n||!n.split(",").every((t=>{return void 0===(e=t)&&(e=""),jt.audio.test(e.trim().toLowerCase());var e})))&&!Vt(t,(t=>{return n=t,!(!(e=i)&&!n||!e&&n||e&&!n||e!==n&&(!e.id||!n.id||e.id!==n.id)&&(!e.resolvedUri||!n.resolvedUri||e.resolvedUri!==n.resolvedUri)&&(!e.uri||!n.uri||e.uri!==n.uri));var e,n})))return!1}return!0})(t);Ft(t,((e,n,r,a)=>{const s=`placeholder-uri-${n}-${r}-${a}`;if(!e.playlists||!e.playlists.length){if(i&&"AUDIO"===n&&!e.uri)for(let e=0;e<t.playlists.length;e++){const i=t.playlists[e];if(i.attributes&&i.attributes.AUDIO&&i.attributes.AUDIO===r)return}e.playlists=[Object.assign({},e)]}e.playlists.forEach((function(e,i){const n=zt(i,s);e.uri?e.resolvedUri=e.resolvedUri||C(t.uri,e.uri):(e.uri=0===i?s:n,e.resolvedUri=e.uri),e.id=e.id||n,e.attributes=e.attributes||{},t.playlists[e.id]=e,t.playlists[e.uri]=e}))})),(t=>{let e=t.playlists.length;for(;e--;){const i=t.playlists[e];Bt({playlist:i,id:zt(e,i.uri)}),i.resolvedUri=C(t.uri,i.uri),t.playlists[i.id]=i,t.playlists[i.uri]=i,i.attributes.BANDWIDTH}})(t),Ht(t)},Ht=t=>{Ft(t,(e=>{e.uri&&(e.resolvedUri=C(t.uri,e.uri))}))};class Wt extends wt{constructor(t,e={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");const{withCredentials:i=!1,handleManifestRedirects:n=!1}=e;this.src=t,this.withCredentials=i,this.handleManifestRedirects=n,this.experimentalLLHLS=!1,this.state="HAVE_NOTHING",this.master={uri:t,playlists:[]},this._handleMediaupdatetimeout=this._handleMediaupdatetimeout.bind(this),this.on("mediaupdatetimeout",this._handleMediaupdatetimeout)}_handleMediaupdatetimeout(){if("HAVE_METADATA"!==this.state)return;const t=this.media();let e=C(this.master.uri,t.uri);this.experimentalLLHLS&&(e=Yt(e,t)),this.state="HAVE_CURRENT_METADATA",this.request=M({uri:e,withCredentials:this.withCredentials},((t,e)=>{if(this.request)return t?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}))}playlistRequestError(t,e,i){const{uri:n,id:r}=e;this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[r],status:t.status,message:`HLS playlist request error at URL: ${n}.`,responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")}_updateMediaUpdateTimeout(t){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout((()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this._updateMediaUpdateTimeout(t)}),t))}dispose(){this.trigger("dispose"),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),window.clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}start(){this.started=!0,this.request=M({uri:this.src,withCredentials:this.withCredentials},((t,e)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:e.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:e.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=I(this.handleManifestRedirects,this.src,e);const i=this._parseManifest({manifestString:e.responseText,url:this.src});this.setupInitialPlaylist(i)}))}pause(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this._media?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const e=this.media();if(t){const t=e?(e.partTargetDuration||e.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=window.setTimeout((()=>{this.mediaUpdateTimeout=null,this.load()}),t)}else this.started?e&&!e.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}_parseManifest({url:t,manifestString:e}){return(({manifestString:t,customTagParsers:e=[],customTagMappers:i=[],experimentalLLHLS:n})=>{const r=new Ot;e.forEach((t=>r.addParser(t))),i.forEach((t=>r.addTagMapper(t))),r.push(t),r.end();const a=r.manifest;if(n||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(t){a.hasOwnProperty(t)&&delete a[t]})),a.segments&&a.segments.forEach((function(t){["parts","preloadHints"].forEach((function(e){t.hasOwnProperty(e)&&delete t[e]}))}))),!a.targetDuration){let t=10;a.segments&&a.segments.length&&(t=a.segments.reduce(((t,e)=>Math.max(t,e.duration)),0)),a.targetDuration=t}const s=(t=>{const e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]})(a);if(s.length&&!a.partTargetDuration){const t=s.reduce(((t,e)=>Math.max(t,e.duration)),0);a.partTargetDuration=t}return a})({manifestString:e,customTagParsers:[],customTagMappers:[],experimentalLLHLS:!1})}setupInitialPlaylist(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,Gt(this.master,this.src),t.playlists.forEach((t=>{t.segments=qt(t),t.segments.forEach((e=>{Xt(e,t.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));const e=this.src||window.location.href;this.master=((t,e)=>{const i=zt(0,e),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:e,id:i,resolvedUri:e,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[e]=n.playlists[0],n})(0,e),this.haveMetadata({playlistObject:t,url:e,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")}haveMetadata({playlistString:t,playlistObject:e,url:i,id:n}){this.request=null,this.state="HAVE_METADATA";const r=e||this._parseManifest({url:i,manifestString:t});r.lastRequest=Date.now(),Bt({playlist:r,uri:i,id:n});const a=Kt(this.master,r);this.targetDuration=r.partTargetDuration||r.targetDuration,this._pendingMedia=null,a?(this.master=a,this._media=this.master.playlists[n]):this.trigger("playlistunchanged"),this._updateMediaUpdateTimeout(Qt(this.media(),!!a)),this.trigger("loadedplaylist")}media(t,e){if(!t)return this._media;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(window.clearTimeout(this.finalRenditionTimeout),e){const e=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,t,!1),e))}const i=this.state,n=!this._media||t.id!==this._media.id,r=this.master.playlists[t.id];if(r&&r.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this._media=t,void(n&&(this.trigger("mediachanging"),"HAVE_MASTER"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this._updateMediaUpdateTimeout(Qt(t,!0)),n){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this._media&&this.trigger("mediachanging"),this._pendingMedia=t,this.request=M({uri:t.resolvedUri,withCredentials:this.withCredentials},((e,n)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=I(this.handleManifestRedirects,t.resolvedUri,n),e)return this.playlistRequestError(this.request,t,i);this.haveMetadata({playlistString:n.responseText,url:t.uri,id:t.id}),"HAVE_MASTER"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")}}))}}}const Yt=(t,e)=>{if(e.endList||!e.serverControl)return t;const i={};if(e.serverControl.canBlockReload){const{preloadSegment:t}=e;let n=e.mediaSequence+e.segments.length;if(t){const r=t.parts||[],a=(({preloadSegment:t})=>{if(!t)return;const{parts:e,preloadHints:i}=t;let n=(i||[]).reduce(((t,e)=>t+("PART"===e.type?1:0)),0);return n+=e&&e.length?e.length:0,n})(e)-1;a>-1&&a!==r.length-1&&(i._HLS_part=a),(a>-1||r.length)&&n--}i._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(i._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const e=new window.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(t){i.hasOwnProperty(t)&&e.searchParams.set(t,i[t])})),t=e.toString()}return t},Qt=(t,e)=>{const i=t.segments||[],n=i[i.length-1],r=n&&n.parts&&n.parts[n.parts.length-1],a=r&&r.duration||n&&n.duration;return e&&a?1e3*a:500*(t.partTargetDuration||t.targetDuration||10)},Zt=(t,e)=>{if(!t)return e;const i=N(t,e);if(t.preloadHints&&!e.preloadHints&&delete i.preloadHints,t.parts&&!e.parts)delete i.parts;else if(t.parts&&e.parts)for(let n=0;n<e.parts.length;n++)t.parts&&t.parts[n]&&(i.parts[n]=N(t.parts[n],e.parts[n]));return!t.skipped&&e.skipped&&(i.skipped=!1),t.preload&&!e.preload&&(i.preload=!1),i},Xt=(t,e)=>{!t.resolvedUri&&t.uri&&(t.resolvedUri=C(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=C(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=C(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=C(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach((t=>{t.resolvedUri||(t.resolvedUri=C(e,t.uri))})),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach((t=>{t.resolvedUri||(t.resolvedUri=C(e,t.uri))}))},qt=function(t){const e=t.segments||[],i=t.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(let t=0;t<i.preloadHints.length;t++)if("MAP"===i.preloadHints[t].type)return e;i.duration=t.targetDuration,i.preload=!0,e.push(i)}return e},Jt=(t,e)=>t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence&&t.preloadSegment===e.preloadSegment,Kt=(t,e,i=Jt)=>{const n=N(t,{}),r=n.playlists[e.id];if(!r)return null;if(i(r,e))return null;e.segments=qt(e);const a=N(r,e);if(a.preloadSegment&&!e.preloadSegment&&delete a.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let t=0;t<e.skip.skippedSegments;t++)e.segments.unshift({skipped:!0})}a.segments=((t,e,i)=>{const n=t.slice(),r=e.slice();i=i||0;const a=[];let s;for(let t=0;t<r.length;t++){const e=n[t+i],o=r[t];e?(s=e.map||s,a.push(Zt(e,o))):(s&&!o.map&&(o.map=s),a.push(o))}return a})(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}a.segments.forEach((t=>{Xt(t,a.resolvedUri)}));for(let t=0;t<n.playlists.length;t++)n.playlists[t].id===e.id&&(n.playlists[t]=a);return n.playlists[e.id]=a,n.playlists[e.uri]=a,Ft(t,((t,i,n,r)=>{if(t.playlists)for(let i=0;i<t.playlists.length;i++)e.id===t.playlists[i].id&&(t.playlists[i]=a)})),n};class $t extends wt{constructor(t){super();const{src:e,handleManifestRedirects:i,withCredentials:n}=t;if(!e)throw new Error("A non-empty playlist URL or JSON manifest string is required");this.withCredentials=n,this._requestOptions={withCredentials:n,handleManifestRedirects:i},this.mediaSource=new window.MediaSource,this._handleDurationChange=this._handleDurationChange.bind(this),this._handleSourceOpen=this._handleSourceOpen.bind(this),this._handleSourceEnded=this._handleSourceEnded.bind(this),this.mediaSource.addEventListener("durationchange",this._handleDurationChange),this.mediaSource.addEventListener("sourceopen",this._handleSourceOpen),this.mediaSource.addEventListener("sourceended",this._handleSourceEnded),this._masterPlaylistLoader=new Wt(e,this._requestOptions),this._setupMasterPlaylistLoaderListeners(),this._masterPlaylistLoader.load()}_handleDurationChange(){this.trigger("durationchange")}_handleSourceOpen(){this.trigger("sourceopen")}_handleSourceEnded(){}_setupMasterPlaylistLoaderListeners(){this._masterPlaylistLoader.on("loadedmetadata",(()=>{const t=this._masterPlaylistLoader.media();t.targetDuration;t.endList})),this._masterPlaylistLoader.on("loadedplaylist",(()=>{}))}}const te=function(t,e={},i){if(!(t instanceof Element||t instanceof HTMLDocument))throw new Error("player element is not defined");if(this._el=t,this._el.classList.add("paused"),this._slot=null,this._videoSlot=null,this._resizer=null,this._ads=null,this._playPromise=null,this._gradient=null,this._header=null,this._spinner=null,this._bigPlayButton=null,this._controlBar=null,this._timeline=null,this._prevButton=null,this._playButton=null,this._nextButton=null,this._timer=null,this._fullscreenButton=null,this._attributes={variantName:"",sessionId:A(),isReady:!1,userActive:!1,userActivity:!1,aspectRatioPercentage:null,poster:null,src:null,duration:0,remainingTime:0,currentTime:0,waitingTime:0,muted:!0,volume:0,get hidden(){return document.hidden},fullscreen:!1,visibilityThreshold:50,intersectionRatio:1,get visible(){return!this.hidden&&(!!this.fullscreen||(t=this.intersectionRatio,e=this.visibilityThreshold,100*t>=e));var t,e},prevVisible:!0,inactivityTimeout:2e3,version:"1.0.3"},this._options=Object.assign({width:"auto",height:"auto",aspectRatio:"16:9",title:null,url:null,poster:null,src:null,sources:null,autoplay:!1,preload:"metadata",loop:!1,playbackRates:null,muted:!0,volume:1,controls:!0,inactivityTimeout:2e3,stickyFloating:!1,textTracks:null,ads:null,timeRanges:null,abTest:null},e),this._options.abTest&&this._options.abTest.enabled&&this._options.abTest.hasOwnProperty("variants")){let t=null;const e=function(t){const e=[];let i=0;return t&&t.variants.forEach((t=>{i+=t.percentage,e.push(i)})),{ranges:e,lastRange:i}},i=function(t,e,i){let n=null;const r=Math.round(Math.random()*i);for(let i=0;i<e.length;i++)if(r<=e[i]){n=t.variants[i];break}return n},n=function(t,e){let i=null;const n=t.variants;return e&&(i=n.find((t=>t.name==e))),i};let r=null;if(function(t,e=window.location.href){return e.includes(t)}("ab_test_variant_name")&&(r=function(t,e=window.location.href,i){let n=null;try{n=new URL(e).searchParams.get(t)}catch(t){}return n||i}("ab_test_variant_name")),r)t=n(this._options.abTest,r);else{const{ranges:n,lastRange:r}=e(this._options.abTest);t=i(this._options.abTest,n,r)}t&&(this._attributes.variantName=t.name,this._options=N(this._options,t.options))}if(this._attributes.muted=this._options.muted,this._attributes.volume=this._attributes.muted?0:this._options.volume,this._attributes.muted||0!=this._attributes.volume||(this._attributes.muted=!0),"muted"===this._options.autoplay&&(this._attributes.muted=!0,this._attributes.volume=0),this._attributes.aspectRatioPercentage=T[this._options.aspectRatio],this._attributes.aspectRatioPercentage&&function(t,e){if(!e||"string"!=typeof e||e.length<1)return;let i=null;t?(i=document.getElementById(t),i?i.textContent=e:(i=document.createElement("style"),i.id=t,i.textContent=e,document.head.appendChild(i))):(i=document.createElement("style"),i.textContent=e,document.head.appendChild(i))}(`adserve-tv-player-${this._attributes.sessionId}`,`.adserve-tv-player-${this._attributes.sessionId} .video-container {\n        padding-bottom: ${this._attributes.aspectRatioPercentage}\n      }`),this._options.inactivityTimeout&&(this._attributes.inactivityTimeout=this._options.inactivityTimeout),this._options.timeRanges&&0!=this._options.timeRanges.length){const t=this._options.timeRanges.filter((t=>t.enabled));if(!t.length)return;const e=t=>{if(!t)return NaN;const e=t.split(":");return 3600*parseInt(e[0]||"0")+60*parseInt(e[1]||"0")+parseInt(e[2]||"0")};setInterval((()=>{const i=new Date,n=3600*i.getUTCHours()+60*i.getUTCMinutes()+i.getUTCSeconds();t.find((t=>{const i=e(t.range[0]),r=e(t.range[1]);if(!isNaN(i)&&!isNaN(r))return i<=r?n>=i&&n<=r:n<=r||n>=i}))}),1e3)}this.EVENTS={PlayerReady:"PlayerReady",PlayerVisibilityChange:"PlayerVisibilityChange",PlayerFullscreenChange:"PlayerFullscreenChange",PlayerVolumeChange:"PlayerVolumeChange",PlayerVideoPlaying:"PlayerVideoPlaying",PlayerVideoPaused:"PlayerVideoPaused",PlayerVideoComplete:"PlayerVideoComplete",PlayerUserActive:"PlayerUserActive",PlayerUserInactive:"PlayerUserInactive",PlayerResize:"PlayerResize",PlayerError:"PlayerError"},this._callback=i,this._eventCallbacks={},function(t,e){const i=new IntersectionObserver(e,{root:null,threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});try{i.observe(t)}catch(t){}}(this._el,(t=>{const{intersectionRatio:e}=t[t.length-1];this._attributes.intersectionRatio=e,this.onVisibilityChange()})),document.addEventListener("visibilitychange",(()=>{this.onVisibilityChange()})),this.createSlot()};te.prototype.createSlot=function(){this._slot=document.createElement("div"),this._slot.classList.add("video-container"),this._el.classList.add("adserve-tv-player"),this._el.classList.add("adserve-tv-player-"+this._attributes.sessionId),this._el.appendChild(this._slot),"auto"===this._options.width&&"auto"===this._options.height||(this._el.style.width="number"==typeof this._options.width?this._options.width+"px":this._options.width,this._el.style.height="number"==typeof this._options.height?this._options.height+"px":this._options.height),this.createVideoSlot()},te.prototype.createVideoSlot=function(){if(this._videoSlot=document.createElement("video"),this._videoSlot.setAttribute("webkit-playsinline",!0),this._videoSlot.setAttribute("playsinline",!0),this._videoSlot.setAttribute("preload",this._options.preload),this._videoSlot.setAttribute("tabindex",-1),this._videoSlot.style.backgroundColor="rgb(0, 0, 0)",this._videoSlot.classList.add("video"),this._attributes.muted&&(this._videoSlot.muted=!0),this._slot.appendChild(this._videoSlot),c?(this._videoSlot.addEventListener("webkitbeginfullscreen",(()=>{this.onFullscreenChange()})),this._videoSlot.addEventListener("webkitendfullscreen",(()=>{this.onFullscreenChange()}))):(document.addEventListener("fullscreenchange",(()=>{this.onFullscreenChange()})),document.addEventListener("webkitfullscreenchange",(()=>{this.onFullscreenChange()})),document.addEventListener("mozfullscreenchange",(()=>{this.onFullscreenChange()}))),this._resizer=document.createElement("iframe"),this._resizer.classList.add("resizer"),this._resizer.setAttribute("allowtransparency",!0),this._slot.appendChild(this._resizer),this._resizer.contentWindow.onresize=this.onResize.bind(this),this.createOverlay(),this.setSrc(this._options.src),this.setPoster(this._options.poster),this.userActive(!0),this.listenForUserActivity(),this._options.stickyFloating){const t=S(this._el),e=()=>{window.scrollY>t.top+t.height?this._el.classList.add("sticky"):this._el.classList.remove("sticky")};window.addEventListener("scroll",e)}window.setTimeout((()=>{this._attributes.isReady=!0,ee.push(this),this._callback&&"function"==typeof this._callback&&this._callback(),this._options.ads&&this._options.ads.enabled&&!p&&this.createAdContainer(),this.onPlayerReady()}),75)},te.prototype.createAdContainer=function(){const t=document.createElement("div");t.classList.add("ad-container"),this._slot.appendChild(t),this._ads=new At(this,t,this._options.ads)},te.prototype.userActive=function(t){if(void 0===t)return this._attributes.userActive;if((t=!!t)!==this._attributes.userActive){if(this._attributes.userActive=t,this._attributes.userActive)return this._attributes.userActivity=!0,this._el.classList.remove("user-inactive"),this._el.classList.add("user-active"),void this.onUserActive();this._el.addEventListener("mousemove",(t=>{t.stopPropagation(),t.preventDefault()}),{once:!0}),this._attributes.userActivity=!1,this._el.classList.remove("user-active"),this._el.classList.add("user-inactive"),this.onUserInactive()}},te.prototype.reportUserActivity=function(){this._attributes.userActivity=!0},te.prototype.listenForUserActivity=function(){let t,e,i;const n=this.reportUserActivity.bind(this),r=()=>{n(),window.clearInterval(t)};let s;this._el.addEventListener("mousedown",(()=>{n(),window.clearInterval(t),t=window.setInterval(n,250)})),this._el.addEventListener("mousemove",(t=>{t.screenX===e&&t.screenY===i||(e=t.screenX,i=t.screenY,n())})),this._el.addEventListener("mouseup",r),this._el.addEventListener("mouseleave",r),!this._controlBar||c||a||(this._controlBar.addEventListener("mouseenter",(()=>{this._options.inactivityTimeout=0})),this._controlBar.addEventListener("mouseleave",(()=>{this._options.inactivityTimeout=this._attributes.inactivityTimeout}))),window.setInterval((()=>{if(!this._attributes.userActivity)return;this._attributes.userActivity=!1,this.userActive(!0),window.clearTimeout(s);const t=this._options.inactivityTimeout;t<=0||(s=window.setTimeout((()=>{this._attributes.userActivity||this.userActive(!1)}),t))}),250)},te.prototype.createOverlay=function(){const t=document.createElement("div");if(t.classList.add("overlay"),this._gradient=new x,t.appendChild(this._gradient.render()),this._header=new R,t.appendChild(this._header.render()),this._spinner=new D,t.appendChild(this._spinner.render()),this._bigPlayButton=new B,t.appendChild(this._bigPlayButton.render()),this._options.controls){this._controlBar=document.createElement("div"),this._controlBar.classList.add("control-bar"),this._timeline=new U,this._controlBar.appendChild(this._timeline.render());const e=document.createElement("div");e.classList.add("controls"),this._prevButton=new P,e.appendChild(this._prevButton.render()),this._prevButton.hide(),this._playButton=new O,e.appendChild(this._playButton.render()),this._nextButton=new V,e.appendChild(this._nextButton.render()),this._nextButton.hide(),this._volumeButton=new j,this._attributes.muted&&this._volumeButton.setState(!0),e.appendChild(this._volumeButton.render()),this._timer=new z,e.appendChild(this._timer.render()),this._fullscreenButton=new F,e.appendChild(this._fullscreenButton.render()),this._controlBar.appendChild(e),t.appendChild(this._controlBar)}this._el.appendChild(t)},te.prototype.onResize=function(){this._ads&&this._ads.resizeAd(this._videoSlot.clientWidth,this._videoSlot.clientHeight),this.onPlayerResize()},te.prototype.onPlayerResize=function(){this.EVENTS.PlayerResize in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerResize]&&this._eventCallbacks[this.EVENTS.PlayerResize]()},te.prototype.onUserActive=function(){this.onPlayerUserActive()},te.prototype.onPlayerUserActive=function(){this.EVENTS.PlayerUserActive in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerUserActive]&&this._eventCallbacks[this.EVENTS.PlayerUserActive]()},te.prototype.onUserInactive=function(){this.onPlayerUserInactive()},te.prototype.onPlayerUserInactive=function(){this.EVENTS.PlayerUserInactive in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerUserInactive]&&this._eventCallbacks[this.EVENTS.PlayerUserInactive]()},te.prototype.onFullscreenChange=function(){this._attributes.fullscreen=b(document,this._videoSlot),this._fullscreenButton&&this._fullscreenButton.setState(this._attributes.fullscreen),this.onPlayerFullscreenChange(this._attributes.fullscreen)},te.prototype.onPlayerFullscreenChange=function(t){this.EVENTS.PlayerFullscreenChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerFullscreenChange]&&this._eventCallbacks[this.EVENTS.PlayerFullscreenChange](t)},te.prototype.onVisibilityChange=function(){const t=this._attributes.visible;this._attributes.prevVisible!==t&&(this._attributes.prevVisible=t,this.onPlayerVisibilityChange(t))},te.prototype.onPlayerReady=function(){this.EVENTS.PlayerReady in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerReady]&&this._eventCallbacks[this.EVENTS.PlayerReady]()},te.prototype.onPlayerVisibilityChange=function(t){this.EVENTS.PlayerVisibilityChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerVisibilityChange]&&this._eventCallbacks[this.EVENTS.PlayerVisibilityChange](t)},te.prototype.onPlayerVolumeChange=function(){this.EVENTS.PlayerVolumeChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerVolumeChange]&&this._eventCallbacks[this.EVENTS.PlayerVolumeChange]()},te.prototype.onPlayerVideoPlaying=function(){this.EVENTS.PlayerVideoPlaying in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerVideoPlaying]&&this._eventCallbacks[this.EVENTS.PlayerVideoPlaying]()},te.prototype.onPlayerVideoPaused=function(){this.EVENTS.PlayerVideoPaused in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerVideoPaused]&&this._eventCallbacks[this.EVENTS.PlayerVideoPaused]()},te.prototype.onContentComplete=function(){this._el.classList.add("ended"),this._options.loop&&(this.setCurrentTime(0),this.play()),this.onPlayerVideoComplete()},te.prototype.onPlayerVideoComplete=function(){this.EVENTS.PlayerVideoComplete in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerVideoComplete]&&this._eventCallbacks[this.EVENTS.PlayerVideoComplete]()},te.prototype.onPlayerError=function(t){this.EVENTS.PlayerError in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.PlayerError]&&this._eventCallbacks[this.EVENTS.PlayerError](t)},te.prototype.addEventListener=function(t,e,i){const n=e.bind(i);this._eventCallbacks[t]=n},te.prototype.removeEventListener=function(t){t in this._eventCallbacks&&(this._eventCallbacks[t]=null)},te.prototype.setSrc=function(t){if(t&&(t&&"string"==typeof t&&(this._attributes.src=t),this._attributes.src)){if(this._attributes.mimeType=function(t=""){const e=function(t){if("string"==typeof t){const e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(e)return e.pop().toLowerCase()}return""}(t);return g[e.toLowerCase()]||""}(this._attributes.src),"application/x-mpegurl"===this._attributes.mimeType&&function(){const t=document.createElement("video");["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(e){return/maybe|probably/i.test(t.canPlayType(e))}))}(),"application/dash+xml"===this._attributes.mimeType&&!/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")))return;this._videoSlot.addEventListener("loadstart",(()=>{"muted"===this._options.autoplay&&this.play(),"play"!==this._options.autoplay&&"any"!==this._options.autoplay||this.play()})),this._videoSlot.addEventListener("waiting",(()=>{this._el.classList.add("waiting"),this._attributes.waitingTime=this.getCurrentTime();const t=()=>{this._attributes.waitingTime!==this.getCurrentTime()&&(this._el.classList.remove("waiting"),this._videoSlot.removeEventListener("timeupdate",t))};this._videoSlot.addEventListener("timeupdate",t)})),this._videoSlot.addEventListener("canplay",(()=>{this._el.classList.remove("waiting")})),this._videoSlot.addEventListener("canplaythrough",(()=>{this._el.classList.remove("waiting")})),this._videoSlot.addEventListener("play",(()=>{this._el.classList.remove("ended"),this._el.classList.remove("paused"),this._playButton&&this._playButton.setState(!0),this.onPlayerVideoPlaying()})),this._videoSlot.addEventListener("pause",(()=>{this._el.classList.remove("ended"),this._el.classList.add("paused"),this._playButton&&this._playButton.setState(!1),this.onPlayerVideoPaused()})),this._videoSlot.addEventListener("volumechange",(()=>{this._volumeButton&&this._volumeButton.setState(!this.getVolume()),this.onPlayerVolumeChange()})),this._videoSlot.addEventListener("progress",(t=>{let e=0;const i=t.target.buffered,n=t.target.currentTime;try{for(;!(i.start(e)<=n&&n<=i.end(e));)e+=1;const r=i.start(e)/t.target.duration,a=i.end(e)/t.target.duration-r;this._timeline&&this._timeline.updateBuffer(a)}catch(t){}})),this._videoSlot.addEventListener("timeupdate",(t=>{t.target.currentTime,t.target.duration;this._attributes.currentTime=t.target.currentTime,this._attributes.remainingTime=t.target.duration-t.target.currentTime,this._timeline&&(this._timeline.updateProgress(t.target.currentTime>0&&t.target.duration>0?t.target.currentTime/t.target.duration:0),this._timeline.updateTimeTooltip(t.target.currentTime)),this._timer&&this._timer.updateTimeElapsed(t.target.currentTime)})),this._videoSlot.addEventListener("loadeddata",(t=>{})),this._videoSlot.addEventListener("loadedmetadata",(t=>{t.target.duration!==1/0&&(this._attributes.duration=t.target.duration,this._timeline&&this._timeline.setDuration(t.target.duration),this._timer&&this._timer.setDuration(t.target.duration))})),this._videoSlot.addEventListener("durationchange",(t=>{t.target.duration!==1/0&&(this._attributes.duration=t.target.duration,this._timeline&&this._timeline.setDuration(t.target.duration),this._timer&&this._timer.setDuration(t.target.duration))})),this._videoSlot.addEventListener("ended",(()=>{this._playButton&&this._playButton.setState(!1),this.onContentComplete()})),this._videoSlot.addEventListener("error",(t=>{this._el.classList.remove("waiting"),this.pause(),this.onPlayerError("The media could not be loaded, either because the server or network failed or because the format is not supported.")}));const t=new $t({src:this._attributes.src});if(this._videoSlot.setAttribute("src",window.URL.createObjectURL(t.mediaSource)),!0===this._options.autoplay&&this._videoSlot.setAttribute("autoplay",!0),this._options.title&&this._header&&this._header.setTitle(this._options.title,this._options.url),this._playButton&&(this._playButton.onclick=()=>{this.paused()?this.play():this.pause()}),this._timeline){let t=!1;this._timeline.onmousedown=()=>{this._el.classList.add("slider-active"),t=!this.paused(),this.pause()},this._timeline.onmousemove=t=>{this.setCurrentTime(t)},this._timeline.onmouseup=()=>{this._el.classList.remove("slider-active"),t&&!this._videoSlot.ended&&this.play()}}this._volumeButton&&(this._volumeButton.onclick=()=>{this.getVolume()?this.setVolume(0):this.setVolume(1)}),this._fullscreenButton&&(this._fullscreenButton.onclick=()=>{this.fullscreen()?this.exitFullscreen():this.requestFullscreen()})}},te.prototype.getCurrentSrc=function(){return this._attributes.src},te.prototype.setPoster=function(t){t&&(this._attributes.poster=t,this._videoSlot.poster=this._attributes.poster)},te.prototype.getPoster=function(){return this._attributes.poster},te.prototype.play=function(t){if(t&&this.setSrc(t),this._videoSlot&&this._attributes.src&&this._videoSlot.paused){this._attributes.muted&&(this._videoSlot.muted=!0,this._videoSlot.volume=0,this._attributes.muted=!0,this._attributes.volume=0);const t=3;let e=0;this._playPromise=this._videoSlot.play(),this._playPromise instanceof Promise&&this._playPromise.then((()=>{})).catch((i=>{e<=t&&("any"===this._options.autoplay&&(this._attributes.muted=!0,this._attributes.volume=0,this.play()),e++)}))}},te.prototype.paused=function(){return!!this._videoSlot&&this._videoSlot.paused},te.prototype.pause=function(){this._videoSlot&&!this._videoSlot.paused&&this._videoSlot.pause()},te.prototype.ended=function(){return!!this._videoSlot&&this._videoSlot.ended},te.prototype.getVolume=function(){return this._videoSlot?this._videoSlot.muted?0:this._videoSlot.volume:this._attributes.volume},te.prototype.setVolume=function(t){if(this._videoSlot){t?(this._videoSlot.muted=!1,this._attributes.muted=!1):(this._videoSlot.muted=!0,this._attributes.muted=!0);t!==this._videoSlot.volume&&(this._videoSlot.volume=t,this._attributes.volume=t)}},te.prototype.readyState=function(){return null},te.prototype.getDuration=function(){return this._videoSlot&&this._attributes.src?this._attributes.duration:-1},te.prototype.getCurrentTime=function(){return this._videoSlot&&this._attributes.src?this._attributes.currentTime:-1},te.prototype.setCurrentTime=function(t){void 0!==t&&(t<0&&(t=0),this._videoSlot&&this._attributes.src&&(t!=this._attributes.duration&&this._el.classList.remove("ended"),this._videoSlot.currentTime=t))},te.prototype.getRemainingTime=function(){return this._videoSlot&&this._attributes.src?this._attributes.remainingTime:-1},te.prototype.visible=function(){return this._attributes.visible},te.prototype.hidden=function(){return this._attributes.hidden},te.prototype.fullscreen=function(){return this._videoSlot&&b(document,this._videoSlot)},te.prototype.requestFullscreen=function(){var t,e;this._videoSlot&&this._attributes.src&&!b(document,this._videoSlot)&&(t=this._el,e=this._videoSlot,c?e.webkitEnterFullscreen():"requestFullscreen"in t?t.requestFullscreen():"webkitRequestFullscreen"in t?t.webkitRequestFullscreen():"mozRequestFullScreen"in t&&t.mozRequestFullScreen())},te.prototype.exitFullscreen=function(){var t,e;this._videoSlot&&this._attributes.src&&b(document,this._videoSlot)&&(t=document,e=this._videoSlot,c?e.webkitExitFullscreen():"exitFullscreen"in t?t.exitFullscreen():"webkitExitFullscreen"in t?t.webkitExitFullscreen():"mozCancelFullScreen"in t&&t.mozCancelFullScreen())},te.prototype.getWidth=function(){return this._el.clientWidth},te.prototype.getHeight=function(){return this._el.clientHeight},te.prototype.getVariantName=function(){return this._attributes.variantName},te.prototype.destroy=function(){},te.prototype.getSessionId=function(){return this._attributes.sessionId},te.prototype.getVersion=function(){return this._attributes.version};let ee=[{}];ee=window.adserve&&window.adserve.tv?window.adserve.tv.Players:[];const ie={Player:te,Players:ee}})(),adserve=n})();